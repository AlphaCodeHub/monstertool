var an=Object.defineProperty;var ln=(e,t,n)=>t in e?an(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var De=(e,t,n)=>(ln(e,typeof t!="symbol"?t+"":t,n),n),dt=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var k=(e,t,n)=>(dt(e,t,"read from private field"),n?n.call(e):t.get(e)),ee=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},ge=(e,t,n,i)=>(dt(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);var st=(e,t,n,i)=>({set _(r){ge(e,t,r,n)},get _(){return k(e,t,i)}}),ie=(e,t,n)=>(dt(e,t,"access private method"),n);function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){if(this instanceof i){var r=[null];r.push.apply(r,arguments);var s=Function.bind.apply(t,r);return new s}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})}),n}var global$1=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,inited=!1;function init(){inited=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)lookup[t]=e[t],revLookup[e.charCodeAt(t)]=t;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63}function toByteArray(e){inited||init();var t,n,i,r,s,a,b=e.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=e[b-2]==="="?2:e[b-1]==="="?1:0,a=new Arr(b*3/4-s),i=s>0?b-4:b;var E=0;for(t=0,n=0;t<i;t+=4,n+=3)r=revLookup[e.charCodeAt(t)]<<18|revLookup[e.charCodeAt(t+1)]<<12|revLookup[e.charCodeAt(t+2)]<<6|revLookup[e.charCodeAt(t+3)],a[E++]=r>>16&255,a[E++]=r>>8&255,a[E++]=r&255;return s===2?(r=revLookup[e.charCodeAt(t)]<<2|revLookup[e.charCodeAt(t+1)]>>4,a[E++]=r&255):s===1&&(r=revLookup[e.charCodeAt(t)]<<10|revLookup[e.charCodeAt(t+1)]<<4|revLookup[e.charCodeAt(t+2)]>>2,a[E++]=r>>8&255,a[E++]=r&255),a}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[e&63]}function encodeChunk(e,t,n){for(var i,r=[],s=t;s<n;s+=3)i=(e[s]<<16)+(e[s+1]<<8)+e[s+2],r.push(tripletToBase64(i));return r.join("")}function fromByteArray(e){inited||init();for(var t,n=e.length,i=n%3,r="",s=[],a=16383,b=0,E=n-i;b<E;b+=a)s.push(encodeChunk(e,b,b+a>E?E:b+a));return i===1?(t=e[n-1],r+=lookup[t>>2],r+=lookup[t<<4&63],r+="=="):i===2&&(t=(e[n-2]<<8)+e[n-1],r+=lookup[t>>10],r+=lookup[t>>4&63],r+=lookup[t<<2&63],r+="="),s.push(r),s.join("")}function read(e,t,n,i,r){var s,a,b=r*8-i-1,E=(1<<b)-1,l=E>>1,c=-7,I=n?r-1:0,x=n?-1:1,m=e[t+I];for(I+=x,s=m&(1<<-c)-1,m>>=-c,c+=b;c>0;s=s*256+e[t+I],I+=x,c-=8);for(a=s&(1<<-c)-1,s>>=-c,c+=i;c>0;a=a*256+e[t+I],I+=x,c-=8);if(s===0)s=1-l;else{if(s===E)return a?NaN:(m?-1:1)*(1/0);a=a+Math.pow(2,i),s=s-l}return(m?-1:1)*a*Math.pow(2,s-i)}function write(e,t,n,i,r,s){var a,b,E,l=s*8-r-1,c=(1<<l)-1,I=c>>1,x=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=i?0:s-1,g=i?1:-1,S=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(b=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(E=Math.pow(2,-a))<1&&(a--,E*=2),a+I>=1?t+=x/E:t+=x*Math.pow(2,1-I),t*E>=2&&(a++,E/=2),a+I>=c?(b=0,a=c):a+I>=1?(b=(t*E-1)*Math.pow(2,r),a=a+I):(b=t*Math.pow(2,I-1)*Math.pow(2,r),a=0));r>=8;e[n+m]=b&255,m+=g,b/=256,r-=8);for(a=a<<r|b,l+=r;l>0;e[n+m]=a&255,m+=g,a/=256,l-=8);e[n+m-g]|=S*128}var toString={}.toString,isArray$2=Array.isArray||function(e){return toString.call(e)=="[object Array]"};/*!
* The buffer module from node.js, for the browser.
*
* @author Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
* @license MIT
*/var INSPECT_MAX_BYTES=50;Buffer.TYPED_ARRAY_SUPPORT=global$1.TYPED_ARRAY_SUPPORT!==void 0?global$1.TYPED_ARRAY_SUPPORT:!0;kMaxLength();function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,t){if(kMaxLength()<t)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=Buffer.prototype):(e===null&&(e=new Buffer(t)),e.length=t),e}function Buffer(e,t,n){if(!Buffer.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer))return new Buffer(e,t,n);if(typeof e=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}return from(this,e,t,n)}Buffer.poolSize=8192;Buffer._augment=function(e){return e.__proto__=Buffer.prototype,e};function from(e,t,n,i){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?fromArrayBuffer(e,t,n,i):typeof t=="string"?fromString(e,t,n):fromObject(e,t)}Buffer.from=function(e,t,n){return from(null,e,t,n)};Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&Buffer[Symbol.species]);function assertSize(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function alloc(e,t,n,i){return assertSize(t),t<=0?createBuffer(e,t):n!==void 0?typeof i=="string"?createBuffer(e,t).fill(n,i):createBuffer(e,t).fill(n):createBuffer(e,t)}Buffer.alloc=function(e,t,n){return alloc(null,e,t,n)};function allocUnsafe(e,t){if(assertSize(t),e=createBuffer(e,t<0?0:checked(t)|0),!Buffer.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}Buffer.allocUnsafe=function(e){return allocUnsafe(null,e)};Buffer.allocUnsafeSlow=function(e){return allocUnsafe(null,e)};function fromString(e,t,n){if((typeof n!="string"||n==="")&&(n="utf8"),!Buffer.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=byteLength(t,n)|0;e=createBuffer(e,i);var r=e.write(t,n);return r!==i&&(e=e.slice(0,r)),e}function fromArrayLike(e,t){var n=t.length<0?0:checked(t.length)|0;e=createBuffer(e,n);for(var i=0;i<n;i+=1)e[i]=t[i]&255;return e}function fromArrayBuffer(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return n===void 0&&i===void 0?t=new Uint8Array(t):i===void 0?t=new Uint8Array(t,n):t=new Uint8Array(t,n,i),Buffer.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=Buffer.prototype):e=fromArrayLike(e,t),e}function fromObject(e,t){if(internalIsBuffer(t)){var n=checked(t.length)|0;return e=createBuffer(e,n),e.length===0||t.copy(e,0,0,n),e}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||isnan(t.length)?createBuffer(e,0):fromArrayLike(e,t);if(t.type==="Buffer"&&isArray$2(t.data))return fromArrayLike(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return e|0}Buffer.isBuffer=isBuffer;function internalIsBuffer(e){return!!(e!=null&&e._isBuffer)}Buffer.compare=function(t,n){if(!internalIsBuffer(t)||!internalIsBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var i=t.length,r=n.length,s=0,a=Math.min(i,r);s<a;++s)if(t[s]!==n[s]){i=t[s],r=n[s];break}return i<r?-1:r<i?1:0};Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Buffer.concat=function(t,n){if(!isArray$2(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return Buffer.alloc(0);var i;if(n===void 0)for(n=0,i=0;i<t.length;++i)n+=t[i].length;var r=Buffer.allocUnsafe(n),s=0;for(i=0;i<t.length;++i){var a=t[i];if(!internalIsBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,s),s+=a.length}return r};function byteLength(e,t){if(internalIsBuffer(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var n=e.length;if(n===0)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return base64ToBytes(e).length;default:if(i)return utf8ToBytes(e).length;t=(""+t).toLowerCase(),i=!0}}Buffer.byteLength=byteLength;function slowToString(e,t,n){var i=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,n);case"utf8":case"utf-8":return utf8Slice(this,t,n);case"ascii":return asciiSlice(this,t,n);case"latin1":case"binary":return latin1Slice(this,t,n);case"base64":return base64Slice(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}Buffer.prototype._isBuffer=!0;function swap(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}Buffer.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<t;n+=2)swap(this,n,n+1);return this};Buffer.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<t;n+=4)swap(this,n,n+3),swap(this,n+1,n+2);return this};Buffer.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<t;n+=8)swap(this,n,n+7),swap(this,n+1,n+6),swap(this,n+2,n+5),swap(this,n+3,n+4);return this};Buffer.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?utf8Slice(this,0,t):slowToString.apply(this,arguments)};Buffer.prototype.equals=function(t){if(!internalIsBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:Buffer.compare(this,t)===0};Buffer.prototype.inspect=function(){var t="",n=INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"};Buffer.prototype.compare=function(t,n,i,r,s){if(!internalIsBuffer(t))throw new TypeError("Argument must be a Buffer");if(n===void 0&&(n=0),i===void 0&&(i=t?t.length:0),r===void 0&&(r=0),s===void 0&&(s=this.length),n<0||i>t.length||r<0||s>this.length)throw new RangeError("out of range index");if(r>=s&&n>=i)return 0;if(r>=s)return-1;if(n>=i)return 1;if(n>>>=0,i>>>=0,r>>>=0,s>>>=0,this===t)return 0;for(var a=s-r,b=i-n,E=Math.min(a,b),l=this.slice(r,s),c=t.slice(n,i),I=0;I<E;++I)if(l[I]!==c[I]){a=l[I],b=c[I];break}return a<b?-1:b<a?1:0};function bidirectionalIndexOf(e,t,n,i,r){if(e.length===0)return-1;if(typeof n=="string"?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0)if(r)n=0;else return-1;if(typeof t=="string"&&(t=Buffer.from(t,i)),internalIsBuffer(t))return t.length===0?-1:arrayIndexOf(e,t,n,i,r);if(typeof t=="number")return t=t&255,Buffer.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):arrayIndexOf(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,n,i,r){var s=1,a=e.length,b=t.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(e.length<2||t.length<2)return-1;s=2,a/=2,b/=2,n/=2}function E(m,g){return s===1?m[g]:m.readUInt16BE(g*s)}var l;if(r){var c=-1;for(l=n;l<a;l++)if(E(e,l)===E(t,c===-1?0:l-c)){if(c===-1&&(c=l),l-c+1===b)return c*s}else c!==-1&&(l-=l-c),c=-1}else for(n+b>a&&(n=a-b),l=n;l>=0;l--){for(var I=!0,x=0;x<b;x++)if(E(e,l+x)!==E(t,x)){I=!1;break}if(I)return l}return-1}Buffer.prototype.includes=function(t,n,i){return this.indexOf(t,n,i)!==-1};Buffer.prototype.indexOf=function(t,n,i){return bidirectionalIndexOf(this,t,n,i,!0)};Buffer.prototype.lastIndexOf=function(t,n,i){return bidirectionalIndexOf(this,t,n,i,!1)};function hexWrite(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var s=t.length;if(s%2!==0)throw new TypeError("Invalid hex string");i>s/2&&(i=s/2);for(var a=0;a<i;++a){var b=parseInt(t.substr(a*2,2),16);if(isNaN(b))return a;e[n+a]=b}return a}function utf8Write(e,t,n,i){return blitBuffer(utf8ToBytes(t,e.length-n),e,n,i)}function asciiWrite(e,t,n,i){return blitBuffer(asciiToBytes(t),e,n,i)}function latin1Write(e,t,n,i){return asciiWrite(e,t,n,i)}function base64Write(e,t,n,i){return blitBuffer(base64ToBytes(t),e,n,i)}function ucs2Write(e,t,n,i){return blitBuffer(utf16leToBytes(t,e.length-n),e,n,i)}Buffer.prototype.write=function(t,n,i,r){if(n===void 0)r="utf8",i=this.length,n=0;else if(i===void 0&&typeof n=="string")r=n,i=this.length,n=0;else if(isFinite(n))n=n|0,isFinite(i)?(i=i|0,r===void 0&&(r="utf8")):(r=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-n;if((i===void 0||i>s)&&(i=s),t.length>0&&(i<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return hexWrite(this,t,n,i);case"utf8":case"utf-8":return utf8Write(this,t,n,i);case"ascii":return asciiWrite(this,t,n,i);case"latin1":case"binary":return latin1Write(this,t,n,i);case"base64":return base64Write(this,t,n,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,n,i);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}};Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(e,t,n){return t===0&&n===e.length?fromByteArray(e):fromByteArray(e.slice(t,n))}function utf8Slice(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var s=e[r],a=null,b=s>239?4:s>223?3:s>191?2:1;if(r+b<=n){var E,l,c,I;switch(b){case 1:s<128&&(a=s);break;case 2:E=e[r+1],(E&192)===128&&(I=(s&31)<<6|E&63,I>127&&(a=I));break;case 3:E=e[r+1],l=e[r+2],(E&192)===128&&(l&192)===128&&(I=(s&15)<<12|(E&63)<<6|l&63,I>2047&&(I<55296||I>57343)&&(a=I));break;case 4:E=e[r+1],l=e[r+2],c=e[r+3],(E&192)===128&&(l&192)===128&&(c&192)===128&&(I=(s&15)<<18|(E&63)<<12|(l&63)<<6|c&63,I>65535&&I<1114112&&(a=I))}}a===null?(a=65533,b=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|a&1023),i.push(a),r+=b}return decodeCodePointsArray(i)}var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(e){var t=e.length;if(t<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=MAX_ARGUMENTS_LENGTH));return n}function asciiSlice(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]&127);return i}function latin1Slice(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function hexSlice(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",s=t;s<n;++s)r+=toHex(e[s]);return r}function utf16leSlice(e,t,n){for(var i=e.slice(t,n),r="",s=0;s<i.length;s+=2)r+=String.fromCharCode(i[s]+i[s+1]*256);return r}Buffer.prototype.slice=function(t,n){var i=this.length;t=~~t,n=n===void 0?i:~~n,t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),n<0?(n+=i,n<0&&(n=0)):n>i&&(n=i),n<t&&(n=t);var r;if(Buffer.TYPED_ARRAY_SUPPORT)r=this.subarray(t,n),r.__proto__=Buffer.prototype;else{var s=n-t;r=new Buffer(s,void 0);for(var a=0;a<s;++a)r[a]=this[a+t]}return r};function checkOffset(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUIntLE=function(t,n,i){t=t|0,n=n|0,i||checkOffset(t,n,this.length);for(var r=this[t],s=1,a=0;++a<n&&(s*=256);)r+=this[t+a]*s;return r};Buffer.prototype.readUIntBE=function(t,n,i){t=t|0,n=n|0,i||checkOffset(t,n,this.length);for(var r=this[t+--n],s=1;n>0&&(s*=256);)r+=this[t+--n]*s;return r};Buffer.prototype.readUInt8=function(t,n){return n||checkOffset(t,1,this.length),this[t]};Buffer.prototype.readUInt16LE=function(t,n){return n||checkOffset(t,2,this.length),this[t]|this[t+1]<<8};Buffer.prototype.readUInt16BE=function(t,n){return n||checkOffset(t,2,this.length),this[t]<<8|this[t+1]};Buffer.prototype.readUInt32LE=function(t,n){return n||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};Buffer.prototype.readUInt32BE=function(t,n){return n||checkOffset(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};Buffer.prototype.readIntLE=function(t,n,i){t=t|0,n=n|0,i||checkOffset(t,n,this.length);for(var r=this[t],s=1,a=0;++a<n&&(s*=256);)r+=this[t+a]*s;return s*=128,r>=s&&(r-=Math.pow(2,8*n)),r};Buffer.prototype.readIntBE=function(t,n,i){t=t|0,n=n|0,i||checkOffset(t,n,this.length);for(var r=n,s=1,a=this[t+--r];r>0&&(s*=256);)a+=this[t+--r]*s;return s*=128,a>=s&&(a-=Math.pow(2,8*n)),a};Buffer.prototype.readInt8=function(t,n){return n||checkOffset(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};Buffer.prototype.readInt16LE=function(t,n){n||checkOffset(t,2,this.length);var i=this[t]|this[t+1]<<8;return i&32768?i|4294901760:i};Buffer.prototype.readInt16BE=function(t,n){n||checkOffset(t,2,this.length);var i=this[t+1]|this[t]<<8;return i&32768?i|4294901760:i};Buffer.prototype.readInt32LE=function(t,n){return n||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};Buffer.prototype.readInt32BE=function(t,n){return n||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};Buffer.prototype.readFloatLE=function(t,n){return n||checkOffset(t,4,this.length),read(this,t,!0,23,4)};Buffer.prototype.readFloatBE=function(t,n){return n||checkOffset(t,4,this.length),read(this,t,!1,23,4)};Buffer.prototype.readDoubleLE=function(t,n){return n||checkOffset(t,8,this.length),read(this,t,!0,52,8)};Buffer.prototype.readDoubleBE=function(t,n){return n||checkOffset(t,8,this.length),read(this,t,!1,52,8)};function checkInt(e,t,n,i,r,s){if(!internalIsBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<s)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}Buffer.prototype.writeUIntLE=function(t,n,i,r){if(t=+t,n=n|0,i=i|0,!r){var s=Math.pow(2,8*i)-1;checkInt(this,t,n,i,s,0)}var a=1,b=0;for(this[n]=t&255;++b<i&&(a*=256);)this[n+b]=t/a&255;return n+i};Buffer.prototype.writeUIntBE=function(t,n,i,r){if(t=+t,n=n|0,i=i|0,!r){var s=Math.pow(2,8*i)-1;checkInt(this,t,n,i,s,0)}var a=i-1,b=1;for(this[n+a]=t&255;--a>=0&&(b*=256);)this[n+a]=t/b&255;return n+i};Buffer.prototype.writeUInt8=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=t&255,n+1};function objectWriteUInt16(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,s=Math.min(e.length-n,2);r<s;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>(i?r:1-r)*8}Buffer.prototype.writeUInt16LE=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=t&255,this[n+1]=t>>>8):objectWriteUInt16(this,t,n,!0),n+2};Buffer.prototype.writeUInt16BE=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=t&255):objectWriteUInt16(this,t,n,!1),n+2};function objectWriteUInt32(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,s=Math.min(e.length-n,4);r<s;++r)e[n+r]=t>>>(i?r:3-r)*8&255}Buffer.prototype.writeUInt32LE=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t&255):objectWriteUInt32(this,t,n,!0),n+4};Buffer.prototype.writeUInt32BE=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255):objectWriteUInt32(this,t,n,!1),n+4};Buffer.prototype.writeIntLE=function(t,n,i,r){if(t=+t,n=n|0,!r){var s=Math.pow(2,8*i-1);checkInt(this,t,n,i,s-1,-s)}var a=0,b=1,E=0;for(this[n]=t&255;++a<i&&(b*=256);)t<0&&E===0&&this[n+a-1]!==0&&(E=1),this[n+a]=(t/b>>0)-E&255;return n+i};Buffer.prototype.writeIntBE=function(t,n,i,r){if(t=+t,n=n|0,!r){var s=Math.pow(2,8*i-1);checkInt(this,t,n,i,s-1,-s)}var a=i-1,b=1,E=0;for(this[n+a]=t&255;--a>=0&&(b*=256);)t<0&&E===0&&this[n+a+1]!==0&&(E=1),this[n+a]=(t/b>>0)-E&255;return n+i};Buffer.prototype.writeInt8=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[n]=t&255,n+1};Buffer.prototype.writeInt16LE=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=t&255,this[n+1]=t>>>8):objectWriteUInt16(this,t,n,!0),n+2};Buffer.prototype.writeInt16BE=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=t&255):objectWriteUInt16(this,t,n,!1),n+2};Buffer.prototype.writeInt32LE=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=t&255,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):objectWriteUInt32(this,t,n,!0),n+4};Buffer.prototype.writeInt32BE=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255):objectWriteUInt32(this,t,n,!1),n+4};function checkIEEE754(e,t,n,i,r,s){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function writeFloat(e,t,n,i,r){return r||checkIEEE754(e,t,n,4),write(e,t,n,i,23,4),n+4}Buffer.prototype.writeFloatLE=function(t,n,i){return writeFloat(this,t,n,!0,i)};Buffer.prototype.writeFloatBE=function(t,n,i){return writeFloat(this,t,n,!1,i)};function writeDouble(e,t,n,i,r){return r||checkIEEE754(e,t,n,8),write(e,t,n,i,52,8),n+8}Buffer.prototype.writeDoubleLE=function(t,n,i){return writeDouble(this,t,n,!0,i)};Buffer.prototype.writeDoubleBE=function(t,n,i){return writeDouble(this,t,n,!1,i)};Buffer.prototype.copy=function(t,n,i,r){if(i||(i=0),!r&&r!==0&&(r=this.length),n>=t.length&&(n=t.length),n||(n=0),r>0&&r<i&&(r=i),r===i||t.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-n<r-i&&(r=t.length-n+i);var s=r-i,a;if(this===t&&i<n&&n<r)for(a=s-1;a>=0;--a)t[a+n]=this[a+i];else if(s<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(a=0;a<s;++a)t[a+n]=this[a+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+s),n);return s};Buffer.prototype.fill=function(t,n,i,r){if(typeof t=="string"){if(typeof n=="string"?(r=n,n=0,i=this.length):typeof i=="string"&&(r=i,i=this.length),t.length===1){var s=t.charCodeAt(0);s<256&&(t=s)}if(r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!Buffer.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else typeof t=="number"&&(t=t&255);if(n<0||this.length<n||this.length<i)throw new RangeError("Out of range index");if(i<=n)return this;n=n>>>0,i=i===void 0?this.length:i>>>0,t||(t=0);var a;if(typeof t=="number")for(a=n;a<i;++a)this[a]=t;else{var b=internalIsBuffer(t)?t:utf8ToBytes(new Buffer(t,r).toString()),E=b.length;for(a=0;a<i-n;++a)this[a+n]=b[a%E]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(e){if(e=stringtrim(e).replace(INVALID_BASE64_RE,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){t=t||1/0;for(var n,i=e.length,r=null,s=[],a=0;a<i;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}else if(a+1===i){(t-=3)>-1&&s.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(t-=3)>-1&&s.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return s}function asciiToBytes(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n)&255);return t}function utf16leToBytes(e,t){for(var n,i,r,s=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),i=n>>8,r=n%256,s.push(r),s.push(i);return s}function base64ToBytes(e){return toByteArray(base64clean(e))}function blitBuffer(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function isnan(e){return e!==e}function isBuffer(e){return e!=null&&(!!e._isBuffer||isFastBuffer(e)||isSlowBuffer(e))}function isFastBuffer(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&isFastBuffer(e.slice(0,0))}function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}var cachedSetTimeout=defaultSetTimout,cachedClearTimeout=defaultClearTimeout;typeof global$1.setTimeout=="function"&&(cachedSetTimeout=setTimeout);typeof global$1.clearTimeout=="function"&&(cachedClearTimeout=clearTimeout);function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch{try{return cachedSetTimeout.call(null,e,0)}catch{return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch{try{return cachedClearTimeout.call(null,e)}catch{return cachedClearTimeout.call(this,e)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function nextTick(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];queue.push(new Item(e,t)),queue.length===1&&!draining&&runTimeout(drainQueue)}function Item(e,t){this.fun=e,this.array=t}Item.prototype.run=function(){this.fun.apply(null,this.array)};var title="browser",platform="browser",browser=!0,env={},argv=[],version="",versions={},release={},config={};function noop(){}var on=noop,addListener=noop,once=noop,off=noop,removeListener=noop,removeAllListeners=noop,emit=noop;function binding$1(e){throw new Error("process.binding is not supported")}function cwd(){return"/"}function chdir(e){throw new Error("process.chdir is not supported")}function umask(){return 0}var performance=global$1.performance||{},performanceNow=performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return new Date().getTime()};function hrtime(e){var t=performanceNow.call(performance)*.001,n=Math.floor(t),i=Math.floor(t%1*1e9);return e&&(n=n-e[0],i=i-e[1],i<0&&(n--,i+=1e9)),[n,i]}var startTime=new Date;function uptime(){var e=new Date,t=e-startTime;return t/1e3}var browser$1={nextTick,title,browser,env,argv,version,versions,on,addListener,once,off,removeListener,removeAllListeners,emit,binding:binding$1,cwd,chdir,umask,hrtime,platform,release,config,uptime};function commonjsRequire$1(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$2={exports:{}},_polyfillNode_fs={},_polyfillNode_fs$1=Object.freeze({__proto__:null,default:_polyfillNode_fs}),require$$0=getAugmentedNamespace(_polyfillNode_fs$1),_nodeResolve_empty={},_nodeResolve_empty$1=Object.freeze({__proto__:null,default:_nodeResolve_empty}),require$$1=getAugmentedNamespace(_nodeResolve_empty$1),hasFetch=isFunction$1(global$1.fetch)&&isFunction$1(global$1.ReadableStream),_blobConstructor;function blobConstructor(){if(typeof _blobConstructor<"u")return _blobConstructor;try{new global$1.Blob([new ArrayBuffer(1)]),_blobConstructor=!0}catch{_blobConstructor=!1}return _blobConstructor}var xhr;function checkTypeSupport(e){xhr||(xhr=new global$1.XMLHttpRequest,xhr.open("GET",global$1.location.host?"/":"https://example.com"));try{return xhr.responseType=e,xhr.responseType===e}catch{return!1}}var haveArrayBuffer=typeof global$1.ArrayBuffer<"u",haveSlice=haveArrayBuffer&&isFunction$1(global$1.ArrayBuffer.prototype.slice),arraybuffer=haveArrayBuffer&&checkTypeSupport("arraybuffer"),msstream=!hasFetch&&haveSlice&&checkTypeSupport("ms-stream"),mozchunkedarraybuffer=!hasFetch&&haveArrayBuffer&&checkTypeSupport("moz-chunked-arraybuffer"),overrideMimeType=isFunction$1(xhr.overrideMimeType),vbArray=isFunction$1(global$1.VBArray);function isFunction$1(e){return typeof e=="function"}xhr=null;var inherits;typeof Object.create=="function"?inherits=function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:inherits=function(t,n){t.super_=n;var i=function(){};i.prototype=n.prototype,t.prototype=new i,t.prototype.constructor=t};var inherits$1=inherits,formatRegExp=/%[sdj%]/g;function format$1(e){if(!isString(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(inspect(arguments[n]));return t.join(" ")}for(var n=1,i=arguments,r=i.length,s=String(e).replace(formatRegExp,function(b){if(b==="%%")return"%";if(n>=r)return b;switch(b){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch{return"[Circular]"}default:return b}}),a=i[n];n<r;a=i[++n])isNull(a)||!isObject(a)?s+=" "+a:s+=" "+inspect(a);return s}function deprecate(e,t){if(isUndefined(global$1.process))return function(){return deprecate(e,t).apply(this,arguments)};if(browser$1.noDeprecation===!0)return e;var n=!1;function i(){if(!n){if(browser$1.throwDeprecation)throw new Error(t);browser$1.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}return i}var debugs={},debugEnviron;function debuglog(e){if(isUndefined(debugEnviron)&&(debugEnviron=browser$1.env.NODE_DEBUG||""),e=e.toUpperCase(),!debugs[e])if(new RegExp("\\b"+e+"\\b","i").test(debugEnviron)){var t=0;debugs[e]=function(){var n=format$1.apply(null,arguments);console.error("%s %d: %s",e,t,n)}}else debugs[e]=function(){};return debugs[e]}function inspect(e,t){var n={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),isBoolean(t)?n.showHidden=t:t&&_extend(n,t),isUndefined(n.showHidden)&&(n.showHidden=!1),isUndefined(n.depth)&&(n.depth=2),isUndefined(n.colors)&&(n.colors=!1),isUndefined(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=stylizeWithColor),formatValue(n,e,n.depth)}inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(e,t){var n=inspect.styles[t];return n?"\x1B["+inspect.colors[n][0]+"m"+e+"\x1B["+inspect.colors[n][1]+"m":e}function stylizeNoColor(e,t){return e}function arrayToHash(e){var t={};return e.forEach(function(n,i){t[n]=!0}),t}function formatValue(e,t,n){if(e.customInspect&&t&&isFunction(t.inspect)&&t.inspect!==inspect&&!(t.constructor&&t.constructor.prototype===t)){var i=t.inspect(n,e);return isString(i)||(i=formatValue(e,i,n)),i}var r=formatPrimitive(e,t);if(r)return r;var s=Object.keys(t),a=arrayToHash(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),isError(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return formatError(t);if(s.length===0){if(isFunction(t)){var b=t.name?": "+t.name:"";return e.stylize("[Function"+b+"]","special")}if(isRegExp(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(isDate(t))return e.stylize(Date.prototype.toString.call(t),"date");if(isError(t))return formatError(t)}var E="",l=!1,c=["{","}"];if(isArray$1(t)&&(l=!0,c=["[","]"]),isFunction(t)){var I=t.name?": "+t.name:"";E=" [Function"+I+"]"}if(isRegExp(t)&&(E=" "+RegExp.prototype.toString.call(t)),isDate(t)&&(E=" "+Date.prototype.toUTCString.call(t)),isError(t)&&(E=" "+formatError(t)),s.length===0&&(!l||t.length==0))return c[0]+E+c[1];if(n<0)return isRegExp(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var x;return l?x=formatArray(e,t,n,a,s):x=s.map(function(m){return formatProperty(e,t,n,a,m,l)}),e.seen.pop(),reduceToSingleString(x,E,c)}function formatPrimitive(e,t){if(isUndefined(t))return e.stylize("undefined","undefined");if(isString(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(isNumber(t))return e.stylize(""+t,"number");if(isBoolean(t))return e.stylize(""+t,"boolean");if(isNull(t))return e.stylize("null","null")}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,t,n,i,r){for(var s=[],a=0,b=t.length;a<b;++a)hasOwnProperty$1(t,String(a))?s.push(formatProperty(e,t,n,i,String(a),!0)):s.push("");return r.forEach(function(E){E.match(/^\d+$/)||s.push(formatProperty(e,t,n,i,E,!0))}),s}function formatProperty(e,t,n,i,r,s){var a,b,E;if(E=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]},E.get?E.set?b=e.stylize("[Getter/Setter]","special"):b=e.stylize("[Getter]","special"):E.set&&(b=e.stylize("[Setter]","special")),hasOwnProperty$1(i,r)||(a="["+r+"]"),b||(e.seen.indexOf(E.value)<0?(isNull(n)?b=formatValue(e,E.value,null):b=formatValue(e,E.value,n-1),b.indexOf(`
`)>-1&&(s?b=b.split(`
`).map(function(l){return"  "+l}).join(`
`).substr(2):b=`
`+b.split(`
`).map(function(l){return"   "+l}).join(`
`))):b=e.stylize("[Circular]","special")),isUndefined(a)){if(s&&r.match(/^\d+$/))return b;a=JSON.stringify(""+r),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+b}function reduceToSingleString(e,t,n){var i=e.reduce(function(r,s){return s.indexOf(`
`)>=0,r+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function isArray$1(e){return Array.isArray(e)}function isBoolean(e){return typeof e=="boolean"}function isNull(e){return e===null}function isNullOrUndefined(e){return e==null}function isNumber(e){return typeof e=="number"}function isString(e){return typeof e=="string"}function isUndefined(e){return e===void 0}function isRegExp(e){return isObject(e)&&objectToString(e)==="[object RegExp]"}function isObject(e){return typeof e=="object"&&e!==null}function isDate(e){return isObject(e)&&objectToString(e)==="[object Date]"}function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}function isFunction(e){return typeof e=="function"}function objectToString(e){return Object.prototype.toString.call(e)}function _extend(e,t){if(!t||!isObject(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}function hasOwnProperty$1(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var domain;function EventHandlers(){}EventHandlers.prototype=Object.create(null);function EventEmitter(){EventEmitter.init.call(this)}EventEmitter.EventEmitter=EventEmitter;EventEmitter.usingDomains=!1;EventEmitter.prototype.domain=void 0;EventEmitter.prototype._events=void 0;EventEmitter.prototype._maxListeners=void 0;EventEmitter.defaultMaxListeners=10;EventEmitter.init=function(){this.domain=null,EventEmitter.usingDomains&&domain.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new EventHandlers,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this};function $getMaxListeners(e){return e._maxListeners===void 0?EventEmitter.defaultMaxListeners:e._maxListeners}EventEmitter.prototype.getMaxListeners=function(){return $getMaxListeners(this)};function emitNone(e,t,n){if(t)e.call(n);else for(var i=e.length,r=arrayClone(e,i),s=0;s<i;++s)r[s].call(n)}function emitOne(e,t,n,i){if(t)e.call(n,i);else for(var r=e.length,s=arrayClone(e,r),a=0;a<r;++a)s[a].call(n,i)}function emitTwo(e,t,n,i,r){if(t)e.call(n,i,r);else for(var s=e.length,a=arrayClone(e,s),b=0;b<s;++b)a[b].call(n,i,r)}function emitThree(e,t,n,i,r,s){if(t)e.call(n,i,r,s);else for(var a=e.length,b=arrayClone(e,a),E=0;E<a;++E)b[E].call(n,i,r,s)}function emitMany(e,t,n,i){if(t)e.apply(n,i);else for(var r=e.length,s=arrayClone(e,r),a=0;a<r;++a)s[a].apply(n,i)}EventEmitter.prototype.emit=function(t){var n,i,r,s,a,b,E,l=t==="error";if(b=this._events,b)l=l&&b.error==null;else if(!l)return!1;if(E=this.domain,l){if(n=arguments[1],E)n||(n=new Error('Uncaught, unspecified "error" event')),n.domainEmitter=this,n.domain=E,n.domainThrown=!1,E.emit("error",n);else{if(n instanceof Error)throw n;var c=new Error('Uncaught, unspecified "error" event. ('+n+")");throw c.context=n,c}return!1}if(i=b[t],!i)return!1;var I=typeof i=="function";switch(r=arguments.length,r){case 1:emitNone(i,I,this);break;case 2:emitOne(i,I,this,arguments[1]);break;case 3:emitTwo(i,I,this,arguments[1],arguments[2]);break;case 4:emitThree(i,I,this,arguments[1],arguments[2],arguments[3]);break;default:for(s=new Array(r-1),a=1;a<r;a++)s[a-1]=arguments[a];emitMany(i,I,this,s)}return!0};function _addListener(e,t,n,i){var r,s,a;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(s=e._events,s?(s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),a=s[t]):(s=e._events=new EventHandlers,e._eventsCount=0),!a)a=s[t]=n,++e._eventsCount;else if(typeof a=="function"?a=s[t]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),!a.warned&&(r=$getMaxListeners(e),r&&r>0&&a.length>r)){a.warned=!0;var b=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");b.name="MaxListenersExceededWarning",b.emitter=e,b.type=t,b.count=a.length,emitWarning(b)}return e}function emitWarning(e){typeof console.warn=="function"?console.warn(e):console.log(e)}EventEmitter.prototype.addListener=function(t,n){return _addListener(this,t,n,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function(t,n){return _addListener(this,t,n,!0)};function _onceWrap(e,t,n){var i=!1;function r(){e.removeListener(t,r),i||(i=!0,n.apply(e,arguments))}return r.listener=n,r}EventEmitter.prototype.once=function(t,n){if(typeof n!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,_onceWrap(this,t,n)),this};EventEmitter.prototype.prependOnceListener=function(t,n){if(typeof n!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,_onceWrap(this,t,n)),this};EventEmitter.prototype.removeListener=function(t,n){var i,r,s,a,b;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(r=this._events,!r)return this;if(i=r[t],!i)return this;if(i===n||i.listener&&i.listener===n)--this._eventsCount===0?this._events=new EventHandlers:(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||n));else if(typeof i!="function"){for(s=-1,a=i.length;a-->0;)if(i[a]===n||i[a].listener&&i[a].listener===n){b=i[a].listener,s=a;break}if(s<0)return this;if(i.length===1){if(i[0]=void 0,--this._eventsCount===0)return this._events=new EventHandlers,this;delete r[t]}else spliceOne(i,s);r.removeListener&&this.emit("removeListener",t,b||n)}return this};EventEmitter.prototype.off=function(e,t){return this.removeListener(e,t)};EventEmitter.prototype.removeAllListeners=function(t){var n,i;if(i=this._events,!i)return this;if(!i.removeListener)return arguments.length===0?(this._events=new EventHandlers,this._eventsCount=0):i[t]&&(--this._eventsCount===0?this._events=new EventHandlers:delete i[t]),this;if(arguments.length===0){for(var r=Object.keys(i),s=0,a;s<r.length;++s)a=r[s],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=new EventHandlers,this._eventsCount=0,this}if(n=i[t],typeof n=="function")this.removeListener(t,n);else if(n)do this.removeListener(t,n[n.length-1]);while(n[0]);return this};EventEmitter.prototype.listeners=function(t){var n,i,r=this._events;return r?(n=r[t],n?typeof n=="function"?i=[n.listener||n]:i=unwrapListeners(n):i=[]):i=[],i};EventEmitter.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):listenerCount$1.call(e,t)};EventEmitter.prototype.listenerCount=listenerCount$1;function listenerCount$1(e){var t=this._events;if(t){var n=t[e];if(typeof n=="function")return 1;if(n)return n.length}return 0}EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function spliceOne(e,t){for(var n=t,i=n+1,r=e.length;i<r;n+=1,i+=1)e[n]=e[i];e.pop()}function arrayClone(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}function unwrapListeners(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function BufferList(){this.head=null,this.tail=null,this.length=0}BufferList.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length};BufferList.prototype.unshift=function(e){var t={data:e,next:this.head};this.length===0&&(this.tail=t),this.head=t,++this.length};BufferList.prototype.shift=function(){if(this.length!==0){var e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}};BufferList.prototype.clear=function(){this.head=this.tail=null,this.length=0};BufferList.prototype.join=function(e){if(this.length===0)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n};BufferList.prototype.concat=function(e){if(this.length===0)return Buffer.alloc(0);if(this.length===1)return this.head.data;for(var t=Buffer.allocUnsafe(e>>>0),n=this.head,i=0;n;)n.data.copy(t,i),i+=n.data.length,n=n.next;return t};var isBufferEncoding=Buffer.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function assertEncoding(e){if(e&&!isBufferEncoding(e))throw new Error("Unknown encoding: "+e)}function StringDecoder(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),assertEncoding(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:this.write=passThroughWrite;return}this.charBuffer=new Buffer(6),this.charReceived=0,this.charLength=0}StringDecoder.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=t.charCodeAt(t.length-1);if(r>=55296&&r<=56319){this.charLength+=this.surrogateSize,t="";continue}if(this.charReceived=this.charLength=0,e.length===0)return t;break}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,r=t.charCodeAt(i);if(r>=55296&&r<=56319){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),e.copy(this.charBuffer,0,0,s),t.substring(0,i)}return t};StringDecoder.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(t==1&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t};StringDecoder.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,i=this.charBuffer,r=this.encoding;t+=i.slice(0,n).toString(r)}return t};function passThroughWrite(e){return e.toString(this.encoding)}function utf16DetectIncompleteChar(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}Readable.ReadableState=ReadableState;var debug=debuglog("stream");inherits$1(Readable,EventEmitter);function prependListener(e,t,n){if(typeof e.prependListener=="function")return e.prependListener(t,n);!e._events||!e._events[t]?e.on(t,n):Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]}function listenerCount(e,t){return e.listeners(t).length}function ReadableState(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof Duplex&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16*1024;this.highWaterMark=n||n===0?n:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new StringDecoder(e.encoding),this.encoding=e.encoding)}function Readable(e){if(!(this instanceof Readable))return new Readable(e);this._readableState=new ReadableState(e,this),this.readable=!0,e&&typeof e.read=="function"&&(this._read=e.read),EventEmitter.call(this)}Readable.prototype.push=function(e,t){var n=this._readableState;return!n.objectMode&&typeof e=="string"&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=Buffer.from(e,t),t="")),readableAddChunk(this,n,e,t,!1)};Readable.prototype.unshift=function(e){var t=this._readableState;return readableAddChunk(this,t,e,"",!0)};Readable.prototype.isPaused=function(){return this._readableState.flowing===!1};function readableAddChunk(e,t,n,i,r){var s=chunkInvalid(t,n);if(s)e.emit("error",s);else if(n===null)t.reading=!1,onEofChunk(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!r){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&r){var b=new Error("stream.unshift() after end event");e.emit("error",b)}else{var E;t.decoder&&!r&&!i&&(n=t.decoder.write(n),E=!t.objectMode&&n.length===0),r||(t.reading=!1),E||(t.flowing&&t.length===0&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&emitReadable(e))),maybeReadMore(e,t)}else r||(t.reading=!1);return needMoreData(t)}function needMoreData(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}Readable.prototype.setEncoding=function(e){return this._readableState.decoder=new StringDecoder(e),this._readableState.encoding=e,this};var MAX_HWM=8388608;function computeNewHighWaterMark(e){return e>=MAX_HWM?e=MAX_HWM:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function howMuchToRead(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=computeNewHighWaterMark(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}Readable.prototype.read=function(e){debug("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return debug("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?endReadable(this):emitReadable(this),null;if(e=howMuchToRead(e,t),e===0&&t.ended)return t.length===0&&endReadable(this),null;var i=t.needReadable;debug("need readable",i),(t.length===0||t.length-e<t.highWaterMark)&&(i=!0,debug("length less than watermark",i)),t.ended||t.reading?(i=!1,debug("reading or ended",i)):i&&(debug("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=howMuchToRead(n,t)));var r;return e>0?r=fromList(e,t):r=null,r===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&endReadable(this)),r!==null&&this.emit("data",r),r};function chunkInvalid(e,t){var n=null;return!Buffer.isBuffer(t)&&typeof t!="string"&&t!==null&&t!==void 0&&!e.objectMode&&(n=new TypeError("Invalid non-string/buffer chunk")),n}function onEofChunk(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,emitReadable(e)}}function emitReadable(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(debug("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?nextTick(emitReadable_,e):emitReadable_(e))}function emitReadable_(e){debug("emit readable"),e.emit("readable"),flow(e)}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,nextTick(maybeReadMore_,e,t))}function maybeReadMore_(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(debug("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}Readable.prototype._read=function(e){this.emit("error",new Error("not implemented"))};Readable.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e);break}i.pipesCount+=1,debug("pipe count=%d opts=%j",i.pipesCount,t);var r=!t||t.end!==!1,s=r?b:c;i.endEmitted?nextTick(s):n.once("end",s),e.on("unpipe",a);function a(T){debug("onunpipe"),T===n&&c()}function b(){debug("onend"),e.end()}var E=pipeOnDrain(n);e.on("drain",E);var l=!1;function c(){debug("cleanup"),e.removeListener("close",g),e.removeListener("finish",S),e.removeListener("drain",E),e.removeListener("error",m),e.removeListener("unpipe",a),n.removeListener("end",b),n.removeListener("end",c),n.removeListener("data",x),l=!0,i.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&E()}var I=!1;n.on("data",x);function x(T){debug("ondata"),I=!1;var P=e.write(T);P===!1&&!I&&((i.pipesCount===1&&i.pipes===e||i.pipesCount>1&&indexOf(i.pipes,e)!==-1)&&!l&&(debug("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,I=!0),n.pause())}function m(T){debug("onerror",T),d(),e.removeListener("error",m),listenerCount(e,"error")===0&&e.emit("error",T)}prependListener(e,"error",m);function g(){e.removeListener("finish",S),d()}e.once("close",g);function S(){debug("onfinish"),e.removeListener("close",g),d()}e.once("finish",S);function d(){debug("unpipe"),n.unpipe(e)}return e.emit("pipe",n),i.flowing||(debug("pipe resume"),n.resume()),e};function pipeOnDrain(e){return function(){var t=e._readableState;debug("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&e.listeners("data").length&&(t.flowing=!0,flow(e))}}Readable.prototype.unpipe=function(e){var t=this._readableState;if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;r<i;r++)n[r].emit("unpipe",this);return this}var s=indexOf(t.pipes,e);return s===-1?this:(t.pipes.splice(s,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)};Readable.prototype.on=function(e,t){var n=EventEmitter.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var i=this._readableState;!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&emitReadable(this):nextTick(nReadingNextTick,this))}return n};Readable.prototype.addListener=Readable.prototype.on;function nReadingNextTick(e){debug("readable nexttick read 0"),e.read(0)}Readable.prototype.resume=function(){var e=this._readableState;return e.flowing||(debug("resume"),e.flowing=!0,resume(this,e)),this};function resume(e,t){t.resumeScheduled||(t.resumeScheduled=!0,nextTick(resume_,e,t))}function resume_(e,t){t.reading||(debug("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),flow(e),t.flowing&&!t.reading&&e.read(0)}Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function flow(e){var t=e._readableState;for(debug("flow",t.flowing);t.flowing&&e.read()!==null;);}Readable.prototype.wrap=function(e){var t=this._readableState,n=!1,i=this;e.on("end",function(){if(debug("wrapped end"),t.decoder&&!t.ended){var a=t.decoder.end();a&&a.length&&i.push(a)}i.push(null)}),e.on("data",function(a){if(debug("wrapped data"),t.decoder&&(a=t.decoder.write(a)),!(t.objectMode&&a==null)&&!(!t.objectMode&&(!a||!a.length))){var b=i.push(a);b||(n=!0,e.pause())}});for(var r in e)this[r]===void 0&&typeof e[r]=="function"&&(this[r]=function(a){return function(){return e[a].apply(e,arguments)}}(r));var s=["error","close","destroy","pause","resume"];return forEach(s,function(a){e.on(a,i.emit.bind(i,a))}),i._read=function(a){debug("wrapped _read",a),n&&(n=!1,e.resume())},i};Readable._fromList=fromList;function fromList(e,t){if(t.length===0)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(t.decoder?n=t.buffer.join(""):t.buffer.length===1?n=t.buffer.head.data:n=t.buffer.concat(t.length),t.buffer.clear()):n=fromListPartial(e,t.buffer,t.decoder),n}function fromListPartial(e,t,n){var i;return e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?i=t.shift():i=n?copyFromBufferString(e,t):copyFromBuffer(e,t),i}function copyFromBufferString(e,t){var n=t.head,i=1,r=n.data;for(e-=r.length;n=n.next;){var s=n.data,a=e>s.length?s.length:e;if(a===s.length?r+=s:r+=s.slice(0,e),e-=a,e===0){a===s.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=s.slice(a));break}++i}return t.length-=i,r}function copyFromBuffer(e,t){var n=Buffer.allocUnsafe(e),i=t.head,r=1;for(i.data.copy(n),e-=i.data.length;i=i.next;){var s=i.data,a=e>s.length?s.length:e;if(s.copy(n,n.length-e,0,a),e-=a,e===0){a===s.length?(++r,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=s.slice(a));break}++r}return t.length-=r,n}function endReadable(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,nextTick(endReadableNT,t,e))}function endReadableNT(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function forEach(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n)}function indexOf(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}Writable.WritableState=WritableState;inherits$1(Writable,EventEmitter);function nop(){}function WriteReq(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function WritableState(e,t){Object.defineProperty(this,"buffer",{get:deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof Duplex&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16*1024;this.highWaterMark=n||n===0?n:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=e.decodeStrings===!1;this.decodeStrings=!r,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(s){onwrite(t,s)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}WritableState.prototype.getBuffer=function(){for(var t=this.bufferedRequest,n=[];t;)n.push(t),t=t.next;return n};function Writable(e){if(!(this instanceof Writable)&&!(this instanceof Duplex))return new Writable(e);this._writableState=new WritableState(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev)),EventEmitter.call(this)}Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function writeAfterEnd(e,t){var n=new Error("write after end");e.emit("error",n),nextTick(t,n)}function validChunk(e,t,n,i){var r=!0,s=!1;return n===null?s=new TypeError("May not write null values to stream"):!Buffer.isBuffer(n)&&typeof n!="string"&&n!==void 0&&!t.objectMode&&(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),nextTick(i,s),r=!1),r}Writable.prototype.write=function(e,t,n){var i=this._writableState,r=!1;return typeof t=="function"&&(n=t,t=null),Buffer.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),typeof n!="function"&&(n=nop),i.ended?writeAfterEnd(this,n):validChunk(this,i,e,n)&&(i.pendingcb++,r=writeOrBuffer(this,i,e,t,n)),r};Writable.prototype.cork=function(){var e=this._writableState;e.corked++};Writable.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&clearBuffer(this,e))};Writable.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function decodeChunk(e,t,n){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=Buffer.from(t,n)),t}function writeOrBuffer(e,t,n,i,r){n=decodeChunk(t,n,i),Buffer.isBuffer(n)&&(i="buffer");var s=t.objectMode?1:n.length;t.length+=s;var a=t.length<t.highWaterMark;if(a||(t.needDrain=!0),t.writing||t.corked){var b=t.lastBufferedRequest;t.lastBufferedRequest=new WriteReq(n,i,r),b?b.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else doWrite(e,t,!1,s,n,i,r);return a}function doWrite(e,t,n,i,r,s,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,s,t.onwrite),t.sync=!1}function onwriteError(e,t,n,i,r){--t.pendingcb,n?nextTick(r,i):r(i),e._writableState.errorEmitted=!0,e.emit("error",i)}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var n=e._writableState,i=n.sync,r=n.writecb;if(onwriteStateUpdate(n),t)onwriteError(e,n,i,t,r);else{var s=needFinish(n);!s&&!n.corked&&!n.bufferProcessing&&n.bufferedRequest&&clearBuffer(e,n),i?nextTick(afterWrite,e,n,s,r):afterWrite(e,n,s,r)}}function afterWrite(e,t,n,i){n||onwriteDrain(e,t),t.pendingcb--,i(),finishMaybe(e,t)}function onwriteDrain(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,r=new Array(i),s=t.corkedRequestsFree;s.entry=n;for(var a=0;n;)r[a]=n,n=n.next,a+=1;doWrite(e,t,!0,t.length,r,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new CorkedRequest(t)}else{for(;n;){var b=n.chunk,E=n.encoding,l=n.callback,c=t.objectMode?1:b.length;if(doWrite(e,t,!1,c,b,E,l),n=n.next,t.writing)break}n===null&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}Writable.prototype._write=function(e,t,n){n(new Error("not implemented"))};Writable.prototype._writev=null;Writable.prototype.end=function(e,t,n){var i=this._writableState;typeof e=="function"?(n=e,e=null,t=null):typeof t=="function"&&(n=t,t=null),e!=null&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),!i.ending&&!i.finished&&endWritable(this,i,n)};function needFinish(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function prefinish(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function finishMaybe(e,t){var n=needFinish(t);return n&&(t.pendingcb===0?(prefinish(e,t),t.finished=!0,e.emit("finish")):prefinish(e,t)),n}function endWritable(e,t,n){t.ending=!0,finishMaybe(e,t),n&&(t.finished?nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function CorkedRequest(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var i=t.entry;for(t.entry=null;i;){var r=i.callback;e.pendingcb--,r(n),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}inherits$1(Duplex,Readable);var keys=Object.keys(Writable.prototype);for(var v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(e){if(!(this instanceof Duplex))return new Duplex(e);Readable.call(this,e),Writable.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||nextTick(onEndNT,this)}function onEndNT(e){e.end()}inherits$1(Transform,Duplex);function TransformState(e){this.afterTransform=function(t,n){return afterTransform(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function afterTransform(e,t,n){var i=e._transformState;i.transforming=!1;var r=i.writecb;if(!r)return e.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,n!=null&&e.push(n),r(t);var s=e._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&e._read(s.highWaterMark)}function Transform(e){if(!(this instanceof Transform))return new Transform(e);Duplex.call(this,e),this._transformState=new TransformState(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(n){done(t,n)}):done(t)})}Transform.prototype.push=function(e,t){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,e,t)};Transform.prototype._transform=function(e,t,n){throw new Error("Not implemented")};Transform.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}};Transform.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};function done(e,t){if(t)return e.emit("error",t);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}inherits$1(PassThrough,Transform);function PassThrough(e){if(!(this instanceof PassThrough))return new PassThrough(e);Transform.call(this,e)}PassThrough.prototype._transform=function(e,t,n){n(null,e)};inherits$1(Stream,EventEmitter);Stream.Readable=Readable;Stream.Writable=Writable;Stream.Duplex=Duplex;Stream.Transform=Transform;Stream.PassThrough=PassThrough;Stream.Stream=Stream;function Stream(){EventEmitter.call(this)}Stream.prototype.pipe=function(e,t){var n=this;function i(c){e.writable&&e.write(c)===!1&&n.pause&&n.pause()}n.on("data",i);function r(){n.readable&&n.resume&&n.resume()}e.on("drain",r),!e._isStdio&&(!t||t.end!==!1)&&(n.on("end",a),n.on("close",b));var s=!1;function a(){s||(s=!0,e.end())}function b(){s||(s=!0,typeof e.destroy=="function"&&e.destroy())}function E(c){if(l(),EventEmitter.listenerCount(this,"error")===0)throw c}n.on("error",E),e.on("error",E);function l(){n.removeListener("data",i),e.removeListener("drain",r),n.removeListener("end",a),n.removeListener("close",b),n.removeListener("error",E),e.removeListener("error",E),n.removeListener("end",l),n.removeListener("close",l),e.removeListener("close",l)}return n.on("end",l),n.on("close",l),e.on("close",l),e.emit("pipe",n),e};var rStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};function IncomingMessage(e,t,n){var i=this;Readable.call(i),i._mode=n,i.headers={},i.rawHeaders=[],i.trailers={},i.rawTrailers=[],i.on("end",function(){browser$1.nextTick(function(){i.emit("close")})});var r;if(n==="fetch"){i._fetchResponse=t,i.url=t.url,i.statusCode=t.status,i.statusMessage=t.statusText;for(var s,a,b=t.headers[Symbol.iterator]();s=(a=b.next()).value,!a.done;)i.headers[s[0].toLowerCase()]=s[1],i.rawHeaders.push(s[0],s[1]);var E=t.body.getReader();r=function(){E.read().then(function(x){if(!i._destroyed){if(x.done){i.push(null);return}i.push(new Buffer(x.value)),r()}})},r()}else{i._xhr=e,i._pos=0,i.url=e.responseURL,i.statusCode=e.status,i.statusMessage=e.statusText;var l=e.getAllResponseHeaders().split(/\r?\n/);if(l.forEach(function(x){var m=x.match(/^([^:]+):\s*(.*)/);if(m){var g=m[1].toLowerCase();g==="set-cookie"?(i.headers[g]===void 0&&(i.headers[g]=[]),i.headers[g].push(m[2])):i.headers[g]!==void 0?i.headers[g]+=", "+m[2]:i.headers[g]=m[2],i.rawHeaders.push(m[1],m[2])}}),i._charset="x-user-defined",!overrideMimeType){var c=i.rawHeaders["mime-type"];if(c){var I=c.match(/;\s*charset=([^;])(;|$)/);I&&(i._charset=I[1].toLowerCase())}i._charset||(i._charset="utf-8")}}}inherits$1(IncomingMessage,Readable);IncomingMessage.prototype._read=function(){};IncomingMessage.prototype._onXHRProgress=function(){var e=this,t=e._xhr,n=null;switch(e._mode){case"text:vbarray":if(t.readyState!==rStates.DONE)break;try{n=new global$1.VBArray(t.responseBody).toArray()}catch{}if(n!==null){e.push(new Buffer(n));break}case"text":try{n=t.responseText}catch{e._mode="text:vbarray";break}if(n.length>e._pos){var i=n.substr(e._pos);if(e._charset==="x-user-defined"){for(var r=new Buffer(i.length),s=0;s<i.length;s++)r[s]=i.charCodeAt(s)&255;e.push(r)}else e.push(i,e._charset);e._pos=n.length}break;case"arraybuffer":if(t.readyState!==rStates.DONE||!t.response)break;n=t.response,e.push(new Buffer(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=t.response,t.readyState!==rStates.LOADING||!n)break;e.push(new Buffer(new Uint8Array(n)));break;case"ms-stream":if(n=t.response,t.readyState!==rStates.LOADING)break;var a=new global$1.MSStreamReader;a.onprogress=function(){a.result.byteLength>e._pos&&(e.push(new Buffer(new Uint8Array(a.result.slice(e._pos)))),e._pos=a.result.byteLength)},a.onload=function(){e.push(null)},a.readAsArrayBuffer(n);break}e._xhr.readyState===rStates.DONE&&e._mode!=="ms-stream"&&e.push(null)};function toArrayBuffer(e){if(e instanceof Uint8Array){if(e.byteOffset===0&&e.byteLength===e.buffer.byteLength)return e.buffer;if(typeof e.buffer.slice=="function")return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(isBuffer(e)){for(var t=new Uint8Array(e.length),n=e.length,i=0;i<n;i++)t[i]=e[i];return t.buffer}else throw new Error("Argument must be a Buffer")}function decideMode(e,t){return hasFetch&&t?"fetch":mozchunkedarraybuffer?"moz-chunked-arraybuffer":msstream?"ms-stream":arraybuffer&&e?"arraybuffer":vbArray&&e?"text:vbarray":"text"}function ClientRequest(e){var t=this;Writable.call(t),t._opts=e,t._body=[],t._headers={},e.auth&&t.setHeader("Authorization","Basic "+new Buffer(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(r){t.setHeader(r,e.headers[r])});var n,i=!0;if(e.mode==="disable-fetch")i=!1,n=!0;else if(e.mode==="prefer-streaming")n=!1;else if(e.mode==="allow-wrong-content-type")n=!overrideMimeType;else if(!e.mode||e.mode==="default"||e.mode==="prefer-fast")n=!0;else throw new Error("Invalid value for opts.mode");t._mode=decideMode(n,i),t.on("finish",function(){t._onFinish()})}inherits$1(ClientRequest,Writable);var unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];ClientRequest.prototype.setHeader=function(e,t){var n=this,i=e.toLowerCase();unsafeHeaders.indexOf(i)===-1&&(n._headers[i]={name:e,value:t})};ClientRequest.prototype.getHeader=function(e){var t=this;return t._headers[e.toLowerCase()].value};ClientRequest.prototype.removeHeader=function(e){var t=this;delete t._headers[e.toLowerCase()]};ClientRequest.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,n=e._headers,i;if((t.method==="POST"||t.method==="PUT"||t.method==="PATCH")&&(blobConstructor()?i=new global$1.Blob(e._body.map(function(a){return toArrayBuffer(a)}),{type:(n["content-type"]||{}).value||""}):i=Buffer.concat(e._body).toString()),e._mode==="fetch"){var r=Object.keys(n).map(function(a){return[n[a].name,n[a].value]});global$1.fetch(e._opts.url,{method:e._opts.method,headers:r,body:i,mode:"cors",credentials:t.withCredentials?"include":"same-origin"}).then(function(a){e._fetchResponse=a,e._connect()},function(a){e.emit("error",a)})}else{var s=e._xhr=new global$1.XMLHttpRequest;try{s.open(e._opts.method,e._opts.url,!0)}catch(a){browser$1.nextTick(function(){e.emit("error",a)});return}"responseType"in s&&(s.responseType=e._mode.split(":")[0]),"withCredentials"in s&&(s.withCredentials=!!t.withCredentials),e._mode==="text"&&"overrideMimeType"in s&&s.overrideMimeType("text/plain; charset=x-user-defined"),Object.keys(n).forEach(function(a){s.setRequestHeader(n[a].name,n[a].value)}),e._response=null,s.onreadystatechange=function(){switch(s.readyState){case rStates.LOADING:case rStates.DONE:e._onXHRProgress();break}},e._mode==="moz-chunked-arraybuffer"&&(s.onprogress=function(){e._onXHRProgress()}),s.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{s.send(i)}catch(a){browser$1.nextTick(function(){e.emit("error",a)});return}}}};function statusValid(e){try{var t=e.status;return t!==null&&t!==0}catch{return!1}}ClientRequest.prototype._onXHRProgress=function(){var e=this;!statusValid(e._xhr)||e._destroyed||(e._response||e._connect(),e._response._onXHRProgress())};ClientRequest.prototype._connect=function(){var e=this;e._destroyed||(e._response=new IncomingMessage(e._xhr,e._fetchResponse,e._mode),e.emit("response",e._response))};ClientRequest.prototype._write=function(e,t,n){var i=this;i._body.push(e),n()};ClientRequest.prototype.abort=ClientRequest.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()};ClientRequest.prototype.end=function(e,t,n){var i=this;typeof e=="function"&&(n=e,e=void 0),Writable.prototype.end.call(i,e,t,n)};ClientRequest.prototype.flushHeaders=function(){};ClientRequest.prototype.setTimeout=function(){};ClientRequest.prototype.setNoDelay=function(){};ClientRequest.prototype.setSocketKeepAlive=function(){};/*!https://mths.be/punycode v1.4.1 by @mathias*/var maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode;function error(e){throw new RangeError(errors[e])}function map$1(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function mapDomain(e,t){var n=e.split("@"),i="";n.length>1&&(i=n[0]+"@",e=n[1]),e=e.replace(regexSeparators,".");var r=e.split("."),s=map$1(r,t).join(".");return i+s}function ucs2decode(e){for(var t=[],n=0,i=e.length,r,s;n<i;)r=e.charCodeAt(n++),r>=55296&&r<=56319&&n<i?(s=e.charCodeAt(n++),(s&64512)==56320?t.push(((r&1023)<<10)+(s&1023)+65536):(t.push(r),n--)):t.push(r);return t}function digitToBasic(e,t){return e+22+75*(e<26)-((t!=0)<<5)}function adapt(e,t,n){var i=0;for(e=n?floor(e/damp):e>>1,e+=floor(e/t);e>baseMinusTMin*tMax>>1;i+=base)e=floor(e/baseMinusTMin);return floor(i+(baseMinusTMin+1)*e/(e+skew))}function encode(e){var t,n,i,r,s,a,b,E,l,c,I,x=[],m,g,S,d;for(e=ucs2decode(e),m=e.length,t=initialN,n=0,s=initialBias,a=0;a<m;++a)I=e[a],I<128&&x.push(stringFromCharCode(I));for(i=r=x.length,r&&x.push(delimiter);i<m;){for(b=maxInt,a=0;a<m;++a)I=e[a],I>=t&&I<b&&(b=I);for(g=i+1,b-t>floor((maxInt-n)/g)&&error("overflow"),n+=(b-t)*g,t=b,a=0;a<m;++a)if(I=e[a],I<t&&++n>maxInt&&error("overflow"),I==t){for(E=n,l=base;c=l<=s?tMin:l>=s+tMax?tMax:l-s,!(E<c);l+=base)d=E-c,S=base-c,x.push(stringFromCharCode(digitToBasic(c+d%S,0))),E=floor(d/S);x.push(stringFromCharCode(digitToBasic(E,0))),s=adapt(n,g,i==r),n=0,++i}++n,++t}return x.join("")}function toASCII(e){return mapDomain(e,function(t){return regexNonASCII.test(t)?"xn--"+encode(t):t})}function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function stringifyPrimitive(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function stringify(e,t,n,i){return t=t||"&",n=n||"=",e===null&&(e=void 0),typeof e=="object"?map(objectKeys(e),function(r){var s=encodeURIComponent(stringifyPrimitive(r))+n;return isArray(e[r])?map(e[r],function(a){return s+encodeURIComponent(stringifyPrimitive(a))}).join(t):s+encodeURIComponent(stringifyPrimitive(e[r]))}).join(t):i?encodeURIComponent(stringifyPrimitive(i))+n+encodeURIComponent(stringifyPrimitive(e)):""}function map(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n}var objectKeys=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t};function parse$1(e,t,n,i){t=t||"&",n=n||"=";var r={};if(typeof e!="string"||e.length===0)return r;var s=/\+/g;e=e.split(t);var a=1e3;i&&typeof i.maxKeys=="number"&&(a=i.maxKeys);var b=e.length;a>0&&b>a&&(b=a);for(var E=0;E<b;++E){var l=e[E].replace(s,"%20"),c=l.indexOf(n),I,x,m,g;c>=0?(I=l.substr(0,c),x=l.substr(c+1)):(I=l,x=""),m=decodeURIComponent(I),g=decodeURIComponent(x),hasOwnProperty(r,m)?isArray(r[m])?r[m].push(g):r[m]=[r[m],g]:r[m]=g}return r}const URL$1=global$1.URL,URLSearchParams=global$1.URLSearchParams;var _polyfillNode_url={parse:urlParse,resolve:urlResolve,resolveObject:urlResolveObject,fileURLToPath:urlFileURLToPath,format:urlFormat,Url,URL:URL$1,URLSearchParams};function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function urlParse(e,t,n){if(e&&isObject(e)&&e instanceof Url)return e;var i=new Url;return i.parse(e,t,n),i}Url.prototype.parse=function(e,t,n){return parse(this,e,t,n)};function parse(e,t,n,i){if(!isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),s=r!==-1&&r<t.indexOf("#")?"?":"#",a=t.split(s),b=/\\/g;a[0]=a[0].replace(b,"/"),t=a.join(s);var E=t;if(E=E.trim(),!i&&t.split("#").length===1){var l=simplePathPattern.exec(E);if(l)return e.path=E,e.href=E,e.pathname=l[1],l[2]?(e.search=l[2],n?e.query=parse$1(e.search.substr(1)):e.query=e.search.substr(1)):n&&(e.search="",e.query={}),e}var c=protocolPattern.exec(E);if(c){c=c[0];var I=c.toLowerCase();e.protocol=I,E=E.substr(c.length)}if(i||c||E.match(/^\/\/[^@\/]+@[^@\/]+/)){var x=E.substr(0,2)==="//";x&&!(c&&hostlessProtocol[c])&&(E=E.substr(2),e.slashes=!0)}var m,g,S,d;if(!hostlessProtocol[c]&&(x||c&&!slashedProtocol[c])){var T=-1;for(m=0;m<hostEndingChars.length;m++)g=E.indexOf(hostEndingChars[m]),g!==-1&&(T===-1||g<T)&&(T=g);var P,F;for(T===-1?F=E.lastIndexOf("@"):F=E.lastIndexOf("@",T),F!==-1&&(P=E.slice(0,F),E=E.slice(F+1),e.auth=decodeURIComponent(P)),T=-1,m=0;m<nonHostChars.length;m++)g=E.indexOf(nonHostChars[m]),g!==-1&&(T===-1||g<T)&&(T=g);T===-1&&(T=E.length),e.host=E.slice(0,T),E=E.slice(T),parseHost(e),e.hostname=e.hostname||"";var y=e.hostname[0]==="["&&e.hostname[e.hostname.length-1]==="]";if(!y){var o=e.hostname.split(/\./);for(m=0,S=o.length;m<S;m++){var p=o[m];if(p&&!p.match(hostnamePartPattern)){for(var f="",u=0,w=p.length;u<w;u++)p.charCodeAt(u)>127?f+="x":f+=p[u];if(!f.match(hostnamePartPattern)){var O=o.slice(0,m),_=o.slice(m+1),$=p.match(hostnamePartStart);$&&(O.push($[1]),_.unshift($[2])),_.length&&(E="/"+_.join(".")+E),e.hostname=O.join(".");break}}}}e.hostname.length>hostnameMaxLen?e.hostname="":e.hostname=e.hostname.toLowerCase(),y||(e.hostname=toASCII(e.hostname)),d=e.port?":"+e.port:"";var X=e.hostname||"";e.host=X+d,e.href+=e.host,y&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),E[0]!=="/"&&(E="/"+E))}if(!unsafeProtocol[I])for(m=0,S=autoEscape.length;m<S;m++){var K=autoEscape[m];if(E.indexOf(K)!==-1){var Q=encodeURIComponent(K);Q===K&&(Q=escape(K)),E=E.split(K).join(Q)}}var te=E.indexOf("#");te!==-1&&(e.hash=E.substr(te),E=E.slice(0,te));var ue=E.indexOf("?");if(ue!==-1?(e.search=E.substr(ue),e.query=E.substr(ue+1),n&&(e.query=parse$1(e.query)),E=E.slice(0,ue)):n&&(e.search="",e.query={}),E&&(e.pathname=E),slashedProtocol[I]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){d=e.pathname||"";var ce=e.search||"";e.path=d+ce}return e.href=format(e),e}function urlFileURLToPath(e){if(typeof e=="string")e=new Url().parse(e);else if(!(e instanceof Url))throw new TypeError('The "path" argument must be of type string or an instance of URL. Received type '+typeof e+String(e));if(e.protocol!=="file:")throw new TypeError("The URL must be of scheme file");return getPathFromURLPosix(e)}function getPathFromURLPosix(e){const t=e.pathname;for(let n=0;n<t.length;n++)if(t[n]==="%"){const i=t.codePointAt(n+2)|32;if(t[n+1]==="2"&&i===102)throw new TypeError("must not include encoded / characters")}return decodeURIComponent(t)}function urlFormat(e){return isString(e)&&(e=parse({},e)),format(e)}function format(e){var t=e.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var n=e.protocol||"",i=e.pathname||"",r=e.hash||"",s=!1,a="";e.host?s=t+e.host:e.hostname&&(s=t+(e.hostname.indexOf(":")===-1?e.hostname:"["+this.hostname+"]"),e.port&&(s+=":"+e.port)),e.query&&isObject(e.query)&&Object.keys(e.query).length&&(a=stringify(e.query));var b=e.search||a&&"?"+a||"";return n&&n.substr(-1)!==":"&&(n+=":"),e.slashes||(!n||slashedProtocol[n])&&s!==!1?(s="//"+(s||""),i&&i.charAt(0)!=="/"&&(i="/"+i)):s||(s=""),r&&r.charAt(0)!=="#"&&(r="#"+r),b&&b.charAt(0)!=="?"&&(b="?"+b),i=i.replace(/[?#]/g,function(E){return encodeURIComponent(E)}),b=b.replace("#","%23"),n+s+i+b+r}Url.prototype.format=function(){return format(this)};function urlResolve(e,t){return urlParse(e,!1,!0).resolve(t)}Url.prototype.resolve=function(e){return this.resolveObject(urlParse(e,!1,!0)).format()};function urlResolveObject(e,t){return e?urlParse(e,!1,!0).resolveObject(t):t}Url.prototype.resolveObject=function(e){if(isString(e)){var t=new Url;t.parse(e,!1,!0),e=t}for(var n=new Url,i=Object.keys(this),r=0;r<i.length;r++){var s=i[r];n[s]=this[s]}if(n.hash=e.hash,e.href==="")return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),b=0;b<a.length;b++){var E=a[b];E!=="protocol"&&(n[E]=e[E])}return slashedProtocol[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}var l;if(e.protocol&&e.protocol!==n.protocol){if(!slashedProtocol[e.protocol]){for(var c=Object.keys(e),I=0;I<c.length;I++){var x=c[I];n[x]=e[x]}return n.href=n.format(),n}if(n.protocol=e.protocol,!e.host&&!hostlessProtocol[e.protocol]){for(l=(e.pathname||"").split("/");l.length&&!(e.host=l.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),l[0]!==""&&l.unshift(""),l.length<2&&l.unshift(""),n.pathname=l.join("/")}else n.pathname=e.pathname;if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",g=n.search||"";n.path=m+g}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var S=n.pathname&&n.pathname.charAt(0)==="/",d=e.host||e.pathname&&e.pathname.charAt(0)==="/",T=d||S||n.host&&e.pathname,P=T,F=n.pathname&&n.pathname.split("/")||[],y=n.protocol&&!slashedProtocol[n.protocol];l=e.pathname&&e.pathname.split("/")||[],y&&(n.hostname="",n.port=null,n.host&&(F[0]===""?F[0]=n.host:F.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(l[0]===""?l[0]=e.host:l.unshift(e.host)),e.host=null),T=T&&(l[0]===""||F[0]===""));var o;if(d)n.host=e.host||e.host===""?e.host:n.host,n.hostname=e.hostname||e.hostname===""?e.hostname:n.hostname,n.search=e.search,n.query=e.query,F=l;else if(l.length)F||(F=[]),F.pop(),F=F.concat(l),n.search=e.search,n.query=e.query;else if(!isNullOrUndefined(e.search))return y&&(n.hostname=n.host=F.shift(),o=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1,o&&(n.auth=o.shift(),n.host=n.hostname=o.shift())),n.search=e.search,n.query=e.query,(!isNull(n.pathname)||!isNull(n.search))&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!F.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var p=F.slice(-1)[0],f=(n.host||e.host||F.length>1)&&(p==="."||p==="..")||p==="",u=0,w=F.length;w>=0;w--)p=F[w],p==="."?F.splice(w,1):p===".."?(F.splice(w,1),u++):u&&(F.splice(w,1),u--);if(!T&&!P)for(;u--;u)F.unshift("..");T&&F[0]!==""&&(!F[0]||F[0].charAt(0)!=="/")&&F.unshift(""),f&&F.join("/").substr(-1)!=="/"&&F.push("");var O=F[0]===""||F[0]&&F[0].charAt(0)==="/";return y&&(n.hostname=n.host=O?"":F.length?F.shift():"",o=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1,o&&(n.auth=o.shift(),n.host=n.hostname=o.shift())),T=T||n.host&&F.length,T&&!O&&F.unshift(""),F.length?n.pathname=F.join("/"):(n.pathname=null,n.path=null),(!isNull(n.pathname)||!isNull(n.search))&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n};Url.prototype.parseHost=function(){return parseHost(this)};function parseHost(e){var t=e.host,n=portPattern.exec(t);n&&(n=n[0],n!==":"&&(e.port=n.substr(1)),t=t.substr(0,t.length-n.length)),t&&(e.hostname=t)}var _polyfillNode_url$1=Object.freeze({__proto__:null,URL:URL$1,URLSearchParams,Url,default:_polyfillNode_url,fileURLToPath:urlFileURLToPath,format:urlFormat,parse:urlParse,resolve:urlResolve,resolveObject:urlResolveObject});function request$1(e,t){typeof e=="string"&&(e=urlParse(e));var n=global$1.location.protocol.search(/^https?:$/)===-1?"http:":"",i=e.protocol||n,r=e.hostname||e.host,s=e.port,a=e.path||"/";r&&r.indexOf(":")!==-1&&(r="["+r+"]"),e.url=(r?i+"//"+r:"")+(s?":"+s:"")+a,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var b=new ClientRequest(e);return t&&b.on("response",t),b}function get$1(e,t){var n=request$1(e,t);return n.end(),n}function Agent$1(){}Agent$1.defaultMaxSockets=4;var METHODS$1=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],STATUS_CODES$1={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},_polyfillNode_http={request:request$1,get:get$1,Agent:Agent$1,METHODS:METHODS$1,STATUS_CODES:STATUS_CODES$1},_polyfillNode_http$1=Object.freeze({__proto__:null,Agent:Agent$1,METHODS:METHODS$1,STATUS_CODES:STATUS_CODES$1,default:_polyfillNode_http,get:get$1,request:request$1}),require$$2=getAugmentedNamespace(_polyfillNode_http$1);function request(e,t){typeof e=="string"&&(e=urlParse(e));var n=global$1.location.protocol.search(/^https?:$/)===-1?"http:":"",i=e.protocol||n,r=e.hostname||e.host,s=e.port,a=e.path||"/";r&&r.indexOf(":")!==-1&&(r="["+r+"]"),e.url=(r?i+"//"+r:"")+(s?":"+s:"")+a,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var b=new ClientRequest(e);return t&&b.on("response",t),b}function get(e,t){var n=request(e,t);return n.end(),n}function Agent(){}Agent.defaultMaxSockets=4;var METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},_polyfillNode_https={request,get,Agent,METHODS,STATUS_CODES},_polyfillNode_https$1=Object.freeze({__proto__:null,Agent,METHODS,STATUS_CODES,default:_polyfillNode_https,get,request}),require$$3=getAugmentedNamespace(_polyfillNode_https$1),require$$4=getAugmentedNamespace(_polyfillNode_url$1),msg={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function arraySet(e,t,n,i,r){if(t.subarray&&e.subarray){e.set(t.subarray(n,n+i),r);return}for(var s=0;s<i;s++)e[r+s]=t[n+s]}var Buf8=Uint8Array,Buf16=Uint16Array,Buf32=Int32Array,Z_FIXED$2=4,Z_BINARY$1=0,Z_TEXT$1=1,Z_UNKNOWN$2=2;function zero$1(e){for(var t=e.length;--t>=0;)e[t]=0}var STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);var static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);var _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);var _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);var base_length=new Array(LENGTH_CODES$1);zero$1(base_length);var base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}var static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function d_code(e){return e<256?_dist_code[e]:_dist_code[256+(e>>>7)]}function put_short(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function send_bits(e,t,n){e.bi_valid>Buf_size-n?(e.bi_buf|=t<<e.bi_valid&65535,put_short(e,e.bi_buf),e.bi_buf=t>>Buf_size-e.bi_valid,e.bi_valid+=n-Buf_size):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function send_code(e,t,n){send_bits(e,n[t*2],n[t*2+1])}function bi_reverse(e,t){var n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1}function bi_flush(e){e.bi_valid===16?(put_short(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function gen_bitlen(e,t){var n=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,b=t.stat_desc.extra_base,E=t.stat_desc.max_length,l,c,I,x,m,g,S=0;for(x=0;x<=MAX_BITS$1;x++)e.bl_count[x]=0;for(n[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<HEAP_SIZE$1;l++)c=e.heap[l],x=n[n[c*2+1]*2+1]+1,x>E&&(x=E,S++),n[c*2+1]=x,!(c>i)&&(e.bl_count[x]++,m=0,c>=b&&(m=a[c-b]),g=n[c*2],e.opt_len+=g*(x+m),s&&(e.static_len+=g*(r[c*2+1]+m)));if(S!==0){do{for(x=E-1;e.bl_count[x]===0;)x--;e.bl_count[x]--,e.bl_count[x+1]+=2,e.bl_count[E]--,S-=2}while(S>0);for(x=E;x!==0;x--)for(c=e.bl_count[x];c!==0;)I=e.heap[--l],!(I>i)&&(n[I*2+1]!==x&&(e.opt_len+=(x-n[I*2+1])*n[I*2],n[I*2+1]=x),c--)}}function gen_codes(e,t,n){var i=new Array(MAX_BITS$1+1),r=0,s,a;for(s=1;s<=MAX_BITS$1;s++)i[s]=r=r+n[s-1]<<1;for(a=0;a<=t;a++){var b=e[a*2+1];b!==0&&(e[a*2]=bi_reverse(i[b]++,b))}}function tr_static_init(){var e,t,n,i,r,s=new Array(MAX_BITS$1+1);for(n=0,i=0;i<LENGTH_CODES$1-1;i++)for(base_length[i]=n,e=0;e<1<<extra_lbits[i];e++)_length_code[n++]=i;for(_length_code[n-1]=i,r=0,i=0;i<16;i++)for(base_dist[i]=r,e=0;e<1<<extra_dbits[i];e++)_dist_code[r++]=i;for(r>>=7;i<D_CODES$1;i++)for(base_dist[i]=r<<7,e=0;e<1<<extra_dbits[i]-7;e++)_dist_code[256+r++]=i;for(t=0;t<=MAX_BITS$1;t++)s[t]=0;for(e=0;e<=143;)static_ltree[e*2+1]=8,e++,s[8]++;for(;e<=255;)static_ltree[e*2+1]=9,e++,s[9]++;for(;e<=279;)static_ltree[e*2+1]=7,e++,s[7]++;for(;e<=287;)static_ltree[e*2+1]=8,e++,s[8]++;for(gen_codes(static_ltree,L_CODES$1+1,s),e=0;e<D_CODES$1;e++)static_dtree[e*2+1]=5,static_dtree[e*2]=bi_reverse(e,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)}function init_block(e){var t;for(t=0;t<L_CODES$1;t++)e.dyn_ltree[t*2]=0;for(t=0;t<D_CODES$1;t++)e.dyn_dtree[t*2]=0;for(t=0;t<BL_CODES$1;t++)e.bl_tree[t*2]=0;e.dyn_ltree[END_BLOCK*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function bi_windup(e){e.bi_valid>8?put_short(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function copy_block(e,t,n,i){bi_windup(e),i&&(put_short(e,n),put_short(e,~n)),arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function smaller(e,t,n,i){var r=t*2,s=n*2;return e[r]<e[s]||e[r]===e[s]&&i[t]<=i[n]}function pqdownheap(e,t,n){for(var i=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&smaller(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!smaller(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i}function compress_block(e,t,n){var i,r,s=0,a,b;if(e.last_lit!==0)do i=e.pending_buf[e.d_buf+s*2]<<8|e.pending_buf[e.d_buf+s*2+1],r=e.pending_buf[e.l_buf+s],s++,i===0?send_code(e,r,t):(a=_length_code[r],send_code(e,a+LITERALS$1+1,t),b=extra_lbits[a],b!==0&&(r-=base_length[a],send_bits(e,r,b)),i--,a=d_code(i),send_code(e,a,n),b=extra_dbits[a],b!==0&&(i-=base_dist[a],send_bits(e,i,b)));while(s<e.last_lit);send_code(e,END_BLOCK,t)}function build_tree(e,t){var n=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,s=t.stat_desc.elems,a,b,E=-1,l;for(e.heap_len=0,e.heap_max=HEAP_SIZE$1,a=0;a<s;a++)n[a*2]!==0?(e.heap[++e.heap_len]=E=a,e.depth[a]=0):n[a*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=E<2?++E:0,n[l*2]=1,e.depth[l]=0,e.opt_len--,r&&(e.static_len-=i[l*2+1]);for(t.max_code=E,a=e.heap_len>>1;a>=1;a--)pqdownheap(e,n,a);l=s;do a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],pqdownheap(e,n,1),b=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=b,n[l*2]=n[a*2]+n[b*2],e.depth[l]=(e.depth[a]>=e.depth[b]?e.depth[a]:e.depth[b])+1,n[a*2+1]=n[b*2+1]=l,e.heap[1]=l++,pqdownheap(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],gen_bitlen(e,t),gen_codes(n,E,e.bl_count)}function scan_tree(e,t,n){var i,r=-1,s,a=t[0*2+1],b=0,E=7,l=4;for(a===0&&(E=138,l=3),t[(n+1)*2+1]=65535,i=0;i<=n;i++)s=a,a=t[(i+1)*2+1],!(++b<E&&s===a)&&(b<l?e.bl_tree[s*2]+=b:s!==0?(s!==r&&e.bl_tree[s*2]++,e.bl_tree[REP_3_6*2]++):b<=10?e.bl_tree[REPZ_3_10*2]++:e.bl_tree[REPZ_11_138*2]++,b=0,r=s,a===0?(E=138,l=3):s===a?(E=6,l=3):(E=7,l=4))}function send_tree(e,t,n){var i,r=-1,s,a=t[0*2+1],b=0,E=7,l=4;for(a===0&&(E=138,l=3),i=0;i<=n;i++)if(s=a,a=t[(i+1)*2+1],!(++b<E&&s===a)){if(b<l)do send_code(e,s,e.bl_tree);while(--b!==0);else s!==0?(s!==r&&(send_code(e,s,e.bl_tree),b--),send_code(e,REP_3_6,e.bl_tree),send_bits(e,b-3,2)):b<=10?(send_code(e,REPZ_3_10,e.bl_tree),send_bits(e,b-3,3)):(send_code(e,REPZ_11_138,e.bl_tree),send_bits(e,b-11,7));b=0,r=s,a===0?(E=138,l=3):s===a?(E=6,l=3):(E=7,l=4)}}function build_bl_tree(e){var t;for(scan_tree(e,e.dyn_ltree,e.l_desc.max_code),scan_tree(e,e.dyn_dtree,e.d_desc.max_code),build_tree(e,e.bl_desc),t=BL_CODES$1-1;t>=3&&e.bl_tree[bl_order[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}function send_all_trees(e,t,n,i){var r;for(send_bits(e,t-257,5),send_bits(e,n-1,5),send_bits(e,i-4,4),r=0;r<i;r++)send_bits(e,e.bl_tree[bl_order[r]*2+1],3);send_tree(e,e.dyn_ltree,t-1),send_tree(e,e.dyn_dtree,n-1)}function detect_data_type(e){var t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return Z_BINARY$1;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Z_TEXT$1;for(n=32;n<LITERALS$1;n++)if(e.dyn_ltree[n*2]!==0)return Z_TEXT$1;return Z_BINARY$1}var static_init_done=!1;function _tr_init(e){static_init_done||(tr_static_init(),static_init_done=!0),e.l_desc=new TreeDesc(e.dyn_ltree,static_l_desc),e.d_desc=new TreeDesc(e.dyn_dtree,static_d_desc),e.bl_desc=new TreeDesc(e.bl_tree,static_bl_desc),e.bi_buf=0,e.bi_valid=0,init_block(e)}function _tr_stored_block(e,t,n,i){send_bits(e,(STORED_BLOCK<<1)+(i?1:0),3),copy_block(e,t,n,!0)}function _tr_align(e){send_bits(e,STATIC_TREES<<1,3),send_code(e,END_BLOCK,static_ltree),bi_flush(e)}function _tr_flush_block(e,t,n,i){var r,s,a=0;e.level>0?(e.strm.data_type===Z_UNKNOWN$2&&(e.strm.data_type=detect_data_type(e)),build_tree(e,e.l_desc),build_tree(e,e.d_desc),a=build_bl_tree(e),r=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=r&&(r=s)):r=s=n+5,n+4<=r&&t!==-1?_tr_stored_block(e,t,n,i):e.strategy===Z_FIXED$2||s===r?(send_bits(e,(STATIC_TREES<<1)+(i?1:0),3),compress_block(e,static_ltree,static_dtree)):(send_bits(e,(DYN_TREES<<1)+(i?1:0),3),send_all_trees(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),compress_block(e,e.dyn_ltree,e.dyn_dtree)),init_block(e),i&&bi_windup(e)}function _tr_tally(e,t,n){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(_length_code[n]+LITERALS$1+1)*2]++,e.dyn_dtree[d_code(t)*2]++),e.last_lit===e.lit_bufsize-1}function adler32(e,t,n,i){for(var r=e&65535|0,s=e>>>16&65535|0,a=0;n!==0;){a=n>2e3?2e3:n,n-=a;do r=r+t[i++]|0,s=s+r|0;while(--a);r%=65521,s%=65521}return r|s<<16|0}function makeTable(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t}var crcTable=makeTable();function crc32(e,t,n,i){var r=crcTable,s=i+n;e^=-1;for(var a=i;a<s;a++)e=e>>>8^r[(e^t[a])&255];return e^-1}var Z_NO_FLUSH$1=0,Z_PARTIAL_FLUSH$1=1,Z_FULL_FLUSH$1=3,Z_FINISH$2=4,Z_BLOCK$2=5,Z_OK$2=0,Z_STREAM_END$2=1,Z_STREAM_ERROR$2=-2,Z_DATA_ERROR$2=-3,Z_BUF_ERROR$2=-5,Z_DEFAULT_COMPRESSION$1=-1,Z_FILTERED$1=1,Z_HUFFMAN_ONLY$1=2,Z_RLE$1=3,Z_FIXED$1=4,Z_UNKNOWN$1=2,Z_DEFLATED$2=8,MAX_MEM_LEVEL=9,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3;function err(e,t){return e.msg=msg[t],t}function rank(e){return(e<<1)-(e>4?9:0)}function zero(e){for(var t=e.length;--t>=0;)e[t]=0}function flush_pending(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))}function flush_block_only(e,t){_tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,flush_pending(e.strm)}function put_byte(e,t){e.pending_buf[e.pending++]=t}function putShortMSB(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function read_buf(e,t,n,i){var r=e.avail_in;return r>i&&(r=i),r===0?0:(e.avail_in-=r,arraySet(t,e.input,e.next_in,r,n),e.state.wrap===1?e.adler=adler32(e.adler,t,r,n):e.state.wrap===2&&(e.adler=crc32(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)}function longest_match(e,t){var n=e.max_chain_length,i=e.strstart,r,s,a=e.prev_length,b=e.nice_match,E=e.strstart>e.w_size-MIN_LOOKAHEAD?e.strstart-(e.w_size-MIN_LOOKAHEAD):0,l=e.window,c=e.w_mask,I=e.prev,x=e.strstart+MAX_MATCH,m=l[i+a-1],g=l[i+a];e.prev_length>=e.good_match&&(n>>=2),b>e.lookahead&&(b=e.lookahead);do if(r=t,!(l[r+a]!==g||l[r+a-1]!==m||l[r]!==l[i]||l[++r]!==l[i+1])){i+=2,r++;do;while(l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&i<x);if(s=MAX_MATCH-(x-i),i=x-MAX_MATCH,s>a){if(e.match_start=t,a=s,s>=b)break;m=l[i+a-1],g=l[i+a]}}while((t=I[t&c])>E&&--n!==0);return a<=e.lookahead?a:e.lookahead}function fill_window(e){var t=e.w_size,n,i,r,s,a;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-MIN_LOOKAHEAD)){arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,i=e.hash_size,n=i;do r=e.head[--n],e.head[n]=r>=t?r-t:0;while(--i);i=t,n=i;do r=e.prev[--n],e.prev[n]=r>=t?r-t:0;while(--i);s+=t}if(e.strm.avail_in===0)break;if(i=read_buf(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=i,e.lookahead+e.insert>=MIN_MATCH)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+MIN_MATCH-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<MIN_MATCH)););}while(e.lookahead<MIN_LOOKAHEAD&&e.strm.avail_in!==0)}function deflate_stored(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(fill_window(e),e.lookahead===0&&t===Z_NO_FLUSH$1)return BS_NEED_MORE;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((e.strstart===0||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,flush_block_only(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-MIN_LOOKAHEAD&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):(e.strstart>e.block_start&&(flush_block_only(e,!1),e.strm.avail_out===0),BS_NEED_MORE)}function deflate_fast(e,t){for(var n,i;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH$1)return BS_NEED_MORE;if(e.lookahead===0)break}if(n=0,e.lookahead>=MIN_MATCH&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,n)),e.match_length>=MIN_MATCH)if(i=_tr_tally(e,e.strstart-e.match_start,e.match_length-MIN_MATCH),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=MIN_MATCH){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=e.strstart<MIN_MATCH-1?e.strstart:MIN_MATCH-1,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_slow(e,t){for(var n,i,r;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH$1)return BS_NEED_MORE;if(e.lookahead===0)break}if(n=0,e.lookahead>=MIN_MATCH&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=MIN_MATCH-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,n),e.match_length<=5&&(e.strategy===Z_FILTERED$1||e.match_length===MIN_MATCH&&e.strstart-e.match_start>4096)&&(e.match_length=MIN_MATCH-1)),e.prev_length>=MIN_MATCH&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-MIN_MATCH,i=_tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-MIN_MATCH),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=MIN_MATCH-1,e.strstart++,i&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}else if(e.match_available){if(i=_tr_tally(e,0,e.window[e.strstart-1]),i&&flush_block_only(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return BS_NEED_MORE}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=_tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<MIN_MATCH-1?e.strstart:MIN_MATCH-1,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_rle(e,t){for(var n,i,r,s,a=e.window;;){if(e.lookahead<=MAX_MATCH){if(fill_window(e),e.lookahead<=MAX_MATCH&&t===Z_NO_FLUSH$1)return BS_NEED_MORE;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=MIN_MATCH&&e.strstart>0&&(r=e.strstart-1,i=a[r],i===a[++r]&&i===a[++r]&&i===a[++r])){s=e.strstart+MAX_MATCH;do;while(i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&r<s);e.match_length=MAX_MATCH-(s-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=MIN_MATCH?(n=_tr_tally(e,1,e.match_length-MIN_MATCH),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_huff(e,t){for(var n;;){if(e.lookahead===0&&(fill_window(e),e.lookahead===0)){if(t===Z_NO_FLUSH$1)return BS_NEED_MORE;break}if(e.match_length=0,n=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function Config(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}var configuration_table;configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)];function lm_init(e){e.window_size=2*e.w_size,zero(e.head),e.max_lazy_match=configuration_table[e.level].max_lazy,e.good_match=configuration_table[e.level].good_length,e.nice_match=configuration_table[e.level].nice_length,e.max_chain_length=configuration_table[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=MIN_MATCH-1,e.match_available=0,e.ins_h=0}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Buf16(HEAP_SIZE*2),this.dyn_dtree=new Buf16((2*D_CODES+1)*2),this.bl_tree=new Buf16((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Buf16(MAX_BITS+1),this.heap=new Buf16(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Buf16(2*L_CODES+1),zero(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(e){var t;return!e||!e.state?err(e,Z_STREAM_ERROR$2):(e.total_in=e.total_out=0,e.data_type=Z_UNKNOWN$1,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?INIT_STATE:BUSY_STATE,e.adler=t.wrap===2?0:1,t.last_flush=Z_NO_FLUSH$1,_tr_init(t),Z_OK$2)}function deflateReset(e){var t=deflateResetKeep(e);return t===Z_OK$2&&lm_init(e.state),t}function deflateInit2(e,t,n,i,r,s){if(!e)return Z_STREAM_ERROR$2;var a=1;if(t===Z_DEFAULT_COMPRESSION$1&&(t=6),i<0?(a=0,i=-i):i>15&&(a=2,i-=16),r<1||r>MAX_MEM_LEVEL||n!==Z_DEFLATED$2||i<8||i>15||t<0||t>9||s<0||s>Z_FIXED$1)return err(e,Z_STREAM_ERROR$2);i===8&&(i=9);var b=new DeflateState;return e.state=b,b.strm=e,b.wrap=a,b.gzhead=null,b.w_bits=i,b.w_size=1<<b.w_bits,b.w_mask=b.w_size-1,b.hash_bits=r+7,b.hash_size=1<<b.hash_bits,b.hash_mask=b.hash_size-1,b.hash_shift=~~((b.hash_bits+MIN_MATCH-1)/MIN_MATCH),b.window=new Buf8(b.w_size*2),b.head=new Buf16(b.hash_size),b.prev=new Buf16(b.w_size),b.lit_bufsize=1<<r+6,b.pending_buf_size=b.lit_bufsize*4,b.pending_buf=new Buf8(b.pending_buf_size),b.d_buf=1*b.lit_bufsize,b.l_buf=(1+2)*b.lit_bufsize,b.level=t,b.strategy=s,b.method=n,deflateReset(e)}function deflate$1(e,t){var n,i,r,s;if(!e||!e.state||t>Z_BLOCK$2||t<0)return e?err(e,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;if(i=e.state,!e.output||!e.input&&e.avail_in!==0||i.status===FINISH_STATE&&t!==Z_FINISH$2)return err(e,e.avail_out===0?Z_BUF_ERROR$2:Z_STREAM_ERROR$2);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===INIT_STATE)if(i.wrap===2)e.adler=0,put_byte(i,31),put_byte(i,139),put_byte(i,8),i.gzhead?(put_byte(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),put_byte(i,i.gzhead.time&255),put_byte(i,i.gzhead.time>>8&255),put_byte(i,i.gzhead.time>>16&255),put_byte(i,i.gzhead.time>>24&255),put_byte(i,i.level===9?2:i.strategy>=Z_HUFFMAN_ONLY$1||i.level<2?4:0),put_byte(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(put_byte(i,i.gzhead.extra.length&255),put_byte(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=crc32(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=EXTRA_STATE):(put_byte(i,0),put_byte(i,0),put_byte(i,0),put_byte(i,0),put_byte(i,0),put_byte(i,i.level===9?2:i.strategy>=Z_HUFFMAN_ONLY$1||i.level<2?4:0),put_byte(i,OS_CODE),i.status=BUSY_STATE);else{var a=Z_DEFLATED$2+(i.w_bits-8<<4)<<8,b=-1;i.strategy>=Z_HUFFMAN_ONLY$1||i.level<2?b=0:i.level<6?b=1:i.level===6?b=2:b=3,a|=b<<6,i.strstart!==0&&(a|=PRESET_DICT),a+=31-a%31,i.status=BUSY_STATE,putShortMSB(i,a),i.strstart!==0&&(putShortMSB(i,e.adler>>>16),putShortMSB(i,e.adler&65535)),e.adler=1}if(i.status===EXTRA_STATE)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-r,r)),flush_pending(e),r=i.pending,i.pending===i.pending_buf_size));)put_byte(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=NAME_STATE)}else i.status=NAME_STATE;if(i.status===NAME_STATE)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-r,r)),flush_pending(e),r=i.pending,i.pending===i.pending_buf_size)){s=1;break}i.gzindex<i.gzhead.name.length?s=i.gzhead.name.charCodeAt(i.gzindex++)&255:s=0,put_byte(i,s)}while(s!==0);i.gzhead.hcrc&&i.pending>r&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-r,r)),s===0&&(i.gzindex=0,i.status=COMMENT_STATE)}else i.status=COMMENT_STATE;if(i.status===COMMENT_STATE)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-r,r)),flush_pending(e),r=i.pending,i.pending===i.pending_buf_size)){s=1;break}i.gzindex<i.gzhead.comment.length?s=i.gzhead.comment.charCodeAt(i.gzindex++)&255:s=0,put_byte(i,s)}while(s!==0);i.gzhead.hcrc&&i.pending>r&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-r,r)),s===0&&(i.status=HCRC_STATE)}else i.status=HCRC_STATE;if(i.status===HCRC_STATE&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&flush_pending(e),i.pending+2<=i.pending_buf_size&&(put_byte(i,e.adler&255),put_byte(i,e.adler>>8&255),e.adler=0,i.status=BUSY_STATE)):i.status=BUSY_STATE),i.pending!==0){if(flush_pending(e),e.avail_out===0)return i.last_flush=-1,Z_OK$2}else if(e.avail_in===0&&rank(t)<=rank(n)&&t!==Z_FINISH$2)return err(e,Z_BUF_ERROR$2);if(i.status===FINISH_STATE&&e.avail_in!==0)return err(e,Z_BUF_ERROR$2);if(e.avail_in!==0||i.lookahead!==0||t!==Z_NO_FLUSH$1&&i.status!==FINISH_STATE){var E=i.strategy===Z_HUFFMAN_ONLY$1?deflate_huff(i,t):i.strategy===Z_RLE$1?deflate_rle(i,t):configuration_table[i.level].func(i,t);if((E===BS_FINISH_STARTED||E===BS_FINISH_DONE)&&(i.status=FINISH_STATE),E===BS_NEED_MORE||E===BS_FINISH_STARTED)return e.avail_out===0&&(i.last_flush=-1),Z_OK$2;if(E===BS_BLOCK_DONE&&(t===Z_PARTIAL_FLUSH$1?_tr_align(i):t!==Z_BLOCK$2&&(_tr_stored_block(i,0,0,!1),t===Z_FULL_FLUSH$1&&(zero(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),flush_pending(e),e.avail_out===0))return i.last_flush=-1,Z_OK$2}return t!==Z_FINISH$2?Z_OK$2:i.wrap<=0?Z_STREAM_END$2:(i.wrap===2?(put_byte(i,e.adler&255),put_byte(i,e.adler>>8&255),put_byte(i,e.adler>>16&255),put_byte(i,e.adler>>24&255),put_byte(i,e.total_in&255),put_byte(i,e.total_in>>8&255),put_byte(i,e.total_in>>16&255),put_byte(i,e.total_in>>24&255)):(putShortMSB(i,e.adler>>>16),putShortMSB(i,e.adler&65535)),flush_pending(e),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?Z_OK$2:Z_STREAM_END$2)}function deflateEnd(e){var t;return!e||!e.state?Z_STREAM_ERROR$2:(t=e.state.status,t!==INIT_STATE&&t!==EXTRA_STATE&&t!==NAME_STATE&&t!==COMMENT_STATE&&t!==HCRC_STATE&&t!==BUSY_STATE&&t!==FINISH_STATE?err(e,Z_STREAM_ERROR$2):(e.state=null,t===BUSY_STATE?err(e,Z_DATA_ERROR$2):Z_OK$2))}var BAD$1=30,TYPE$1=12;function inflate_fast(e,t){var n,i,r,s,a,b,E,l,c,I,x,m,g,S,d,T,P,F,y,o,p,f,u,w,O;n=e.state,i=e.next_in,w=e.input,r=i+(e.avail_in-5),s=e.next_out,O=e.output,a=s-(t-e.avail_out),b=s+(e.avail_out-257),E=n.dmax,l=n.wsize,c=n.whave,I=n.wnext,x=n.window,m=n.hold,g=n.bits,S=n.lencode,d=n.distcode,T=(1<<n.lenbits)-1,P=(1<<n.distbits)-1;e:do{g<15&&(m+=w[i++]<<g,g+=8,m+=w[i++]<<g,g+=8),F=S[m&T];t:for(;;){if(y=F>>>24,m>>>=y,g-=y,y=F>>>16&255,y===0)O[s++]=F&65535;else if(y&16){o=F&65535,y&=15,y&&(g<y&&(m+=w[i++]<<g,g+=8),o+=m&(1<<y)-1,m>>>=y,g-=y),g<15&&(m+=w[i++]<<g,g+=8,m+=w[i++]<<g,g+=8),F=d[m&P];n:for(;;){if(y=F>>>24,m>>>=y,g-=y,y=F>>>16&255,y&16){if(p=F&65535,y&=15,g<y&&(m+=w[i++]<<g,g+=8,g<y&&(m+=w[i++]<<g,g+=8)),p+=m&(1<<y)-1,p>E){e.msg="invalid distance too far back",n.mode=BAD$1;break e}if(m>>>=y,g-=y,y=s-a,p>y){if(y=p-y,y>c&&n.sane){e.msg="invalid distance too far back",n.mode=BAD$1;break e}if(f=0,u=x,I===0){if(f+=l-y,y<o){o-=y;do O[s++]=x[f++];while(--y);f=s-p,u=O}}else if(I<y){if(f+=l+I-y,y-=I,y<o){o-=y;do O[s++]=x[f++];while(--y);if(f=0,I<o){y=I,o-=y;do O[s++]=x[f++];while(--y);f=s-p,u=O}}}else if(f+=I-y,y<o){o-=y;do O[s++]=x[f++];while(--y);f=s-p,u=O}for(;o>2;)O[s++]=u[f++],O[s++]=u[f++],O[s++]=u[f++],o-=3;o&&(O[s++]=u[f++],o>1&&(O[s++]=u[f++]))}else{f=s-p;do O[s++]=O[f++],O[s++]=O[f++],O[s++]=O[f++],o-=3;while(o>2);o&&(O[s++]=O[f++],o>1&&(O[s++]=O[f++]))}}else if(y&64){e.msg="invalid distance code",n.mode=BAD$1;break e}else{F=d[(F&65535)+(m&(1<<y)-1)];continue n}break}}else if(y&64)if(y&32){n.mode=TYPE$1;break e}else{e.msg="invalid literal/length code",n.mode=BAD$1;break e}else{F=S[(F&65535)+(m&(1<<y)-1)];continue t}break}}while(i<r&&s<b);o=g>>3,i-=o,g-=o<<3,m&=(1<<g)-1,e.next_in=i,e.next_out=s,e.avail_in=i<r?5+(r-i):5-(i-r),e.avail_out=s<b?257+(b-s):257-(s-b),n.hold=m,n.bits=g}var MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function inflate_table(e,t,n,i,r,s,a,b){var E=b.bits,l=0,c=0,I=0,x=0,m=0,g=0,S=0,d=0,T=0,P=0,F,y,o,p,f,u=null,w=0,O,_=new Buf16(MAXBITS+1),$=new Buf16(MAXBITS+1),X=null,K=0,Q,te,ue;for(l=0;l<=MAXBITS;l++)_[l]=0;for(c=0;c<i;c++)_[t[n+c]]++;for(m=E,x=MAXBITS;x>=1&&_[x]===0;x--);if(m>x&&(m=x),x===0)return r[s++]=1<<24|64<<16|0,r[s++]=1<<24|64<<16|0,b.bits=1,0;for(I=1;I<x&&_[I]===0;I++);for(m<I&&(m=I),d=1,l=1;l<=MAXBITS;l++)if(d<<=1,d-=_[l],d<0)return-1;if(d>0&&(e===CODES$1||x!==1))return-1;for($[1]=0,l=1;l<MAXBITS;l++)$[l+1]=$[l]+_[l];for(c=0;c<i;c++)t[n+c]!==0&&(a[$[t[n+c]]++]=c);if(e===CODES$1?(u=X=a,O=19):e===LENS$1?(u=lbase,w-=257,X=lext,K-=257,O=256):(u=dbase,X=dext,O=-1),P=0,c=0,l=I,f=s,g=m,S=0,o=-1,T=1<<m,p=T-1,e===LENS$1&&T>ENOUGH_LENS$1||e===DISTS$1&&T>ENOUGH_DISTS$1)return 1;for(;;){Q=l-S,a[c]<O?(te=0,ue=a[c]):a[c]>O?(te=X[K+a[c]],ue=u[w+a[c]]):(te=32+64,ue=0),F=1<<l-S,y=1<<g,I=y;do y-=F,r[f+(P>>S)+y]=Q<<24|te<<16|ue|0;while(y!==0);for(F=1<<l-1;P&F;)F>>=1;if(F!==0?(P&=F-1,P+=F):P=0,c++,--_[l]===0){if(l===x)break;l=t[n+a[c]]}if(l>m&&(P&p)!==o){for(S===0&&(S=m),f+=I,g=l-S,d=1<<g;g+S<x&&(d-=_[g+S],!(d<=0));)g++,d<<=1;if(T+=1<<g,e===LENS$1&&T>ENOUGH_LENS$1||e===DISTS$1&&T>ENOUGH_DISTS$1)return 1;o=P&p,r[o]=m<<24|g<<16|f-s|0}}return P!==0&&(r[f+P]=l-S<<24|64<<16|0),b.bits=m,0}var CODES=0,LENS=1,DISTS=2,Z_FINISH$1=4,Z_BLOCK$1=5,Z_TREES$1=6,Z_OK$1=0,Z_STREAM_END$1=1,Z_NEED_DICT$1=2,Z_STREAM_ERROR$1=-2,Z_DATA_ERROR$1=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR$1=-5,Z_DEFLATED$1=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592;function zswap32(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Buf16(320),this.work=new Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(e){var t;return!e||!e.state?Z_STREAM_ERROR$1:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=HEAD,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Buf32(ENOUGH_LENS),t.distcode=t.distdyn=new Buf32(ENOUGH_DISTS),t.sane=1,t.back=-1,Z_OK$1)}function inflateReset(e){var t;return!e||!e.state?Z_STREAM_ERROR$1:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e))}function inflateReset2(e,t){var n,i;return!e||!e.state||(i=e.state,t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?Z_STREAM_ERROR$1:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,inflateReset(e))}function inflateInit2(e,t){var n,i;return e?(i=new InflateState,e.state=i,i.window=null,n=inflateReset2(e,t),n!==Z_OK$1&&(e.state=null),n):Z_STREAM_ERROR$1}var virgin=!0,lenfix,distfix;function fixedtables(e){if(virgin){var t;for(lenfix=new Buf32(512),distfix=new Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(inflate_table(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;inflate_table(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5}function updatewindow(e,t,n,i){var r,s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Buf8(s.wsize)),i>=s.wsize?(arraySet(s.window,t,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),arraySet(s.window,t,n-i,r,s.wnext),i-=r,i?(arraySet(s.window,t,n-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0}function inflate$1(e,t){var n,i,r,s,a,b,E,l,c,I,x,m,g,S,d=0,T,P,F,y,o,p,f,u,w=new Buf8(4),O,_,$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Z_STREAM_ERROR$1;n=e.state,n.mode===TYPE&&(n.mode=TYPEDO),a=e.next_out,r=e.output,E=e.avail_out,s=e.next_in,i=e.input,b=e.avail_in,l=n.hold,c=n.bits,I=b,x=E,u=Z_OK$1;e:for(;;)switch(n.mode){case HEAD:if(n.wrap===0){n.mode=TYPEDO;break}for(;c<16;){if(b===0)break e;b--,l+=i[s++]<<c,c+=8}if(n.wrap&2&&l===35615){n.check=0,w[0]=l&255,w[1]=l>>>8&255,n.check=crc32(n.check,w,2,0),l=0,c=0,n.mode=FLAGS;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=BAD;break}if((l&15)!==Z_DEFLATED$1){e.msg="unknown compression method",n.mode=BAD;break}if(l>>>=4,c-=4,f=(l&15)+8,n.wbits===0)n.wbits=f;else if(f>n.wbits){e.msg="invalid window size",n.mode=BAD;break}n.dmax=1<<f,e.adler=n.check=1,n.mode=l&512?DICTID:TYPE,l=0,c=0;break;case FLAGS:for(;c<16;){if(b===0)break e;b--,l+=i[s++]<<c,c+=8}if(n.flags=l,(n.flags&255)!==Z_DEFLATED$1){e.msg="unknown compression method",n.mode=BAD;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=BAD;break}n.head&&(n.head.text=l>>8&1),n.flags&512&&(w[0]=l&255,w[1]=l>>>8&255,n.check=crc32(n.check,w,2,0)),l=0,c=0,n.mode=TIME;case TIME:for(;c<32;){if(b===0)break e;b--,l+=i[s++]<<c,c+=8}n.head&&(n.head.time=l),n.flags&512&&(w[0]=l&255,w[1]=l>>>8&255,w[2]=l>>>16&255,w[3]=l>>>24&255,n.check=crc32(n.check,w,4,0)),l=0,c=0,n.mode=OS;case OS:for(;c<16;){if(b===0)break e;b--,l+=i[s++]<<c,c+=8}n.head&&(n.head.xflags=l&255,n.head.os=l>>8),n.flags&512&&(w[0]=l&255,w[1]=l>>>8&255,n.check=crc32(n.check,w,2,0)),l=0,c=0,n.mode=EXLEN;case EXLEN:if(n.flags&1024){for(;c<16;){if(b===0)break e;b--,l+=i[s++]<<c,c+=8}n.length=l,n.head&&(n.head.extra_len=l),n.flags&512&&(w[0]=l&255,w[1]=l>>>8&255,n.check=crc32(n.check,w,2,0)),l=0,c=0}else n.head&&(n.head.extra=null);n.mode=EXTRA;case EXTRA:if(n.flags&1024&&(m=n.length,m>b&&(m=b),m&&(n.head&&(f=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),arraySet(n.head.extra,i,s,m,f)),n.flags&512&&(n.check=crc32(n.check,i,m,s)),b-=m,s+=m,n.length-=m),n.length))break e;n.length=0,n.mode=NAME;case NAME:if(n.flags&2048){if(b===0)break e;m=0;do f=i[s+m++],n.head&&f&&n.length<65536&&(n.head.name+=String.fromCharCode(f));while(f&&m<b);if(n.flags&512&&(n.check=crc32(n.check,i,m,s)),b-=m,s+=m,f)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=COMMENT;case COMMENT:if(n.flags&4096){if(b===0)break e;m=0;do f=i[s+m++],n.head&&f&&n.length<65536&&(n.head.comment+=String.fromCharCode(f));while(f&&m<b);if(n.flags&512&&(n.check=crc32(n.check,i,m,s)),b-=m,s+=m,f)break e}else n.head&&(n.head.comment=null);n.mode=HCRC;case HCRC:if(n.flags&512){for(;c<16;){if(b===0)break e;b--,l+=i[s++]<<c,c+=8}if(l!==(n.check&65535)){e.msg="header crc mismatch",n.mode=BAD;break}l=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=TYPE;break;case DICTID:for(;c<32;){if(b===0)break e;b--,l+=i[s++]<<c,c+=8}e.adler=n.check=zswap32(l),l=0,c=0,n.mode=DICT;case DICT:if(n.havedict===0)return e.next_out=a,e.avail_out=E,e.next_in=s,e.avail_in=b,n.hold=l,n.bits=c,Z_NEED_DICT$1;e.adler=n.check=1,n.mode=TYPE;case TYPE:if(t===Z_BLOCK$1||t===Z_TREES$1)break e;case TYPEDO:if(n.last){l>>>=c&7,c-=c&7,n.mode=CHECK;break}for(;c<3;){if(b===0)break e;b--,l+=i[s++]<<c,c+=8}switch(n.last=l&1,l>>>=1,c-=1,l&3){case 0:n.mode=STORED;break;case 1:if(fixedtables(n),n.mode=LEN_,t===Z_TREES$1){l>>>=2,c-=2;break e}break;case 2:n.mode=TABLE;break;case 3:e.msg="invalid block type",n.mode=BAD}l>>>=2,c-=2;break;case STORED:for(l>>>=c&7,c-=c&7;c<32;){if(b===0)break e;b--,l+=i[s++]<<c,c+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=BAD;break}if(n.length=l&65535,l=0,c=0,n.mode=COPY_,t===Z_TREES$1)break e;case COPY_:n.mode=COPY;case COPY:if(m=n.length,m){if(m>b&&(m=b),m>E&&(m=E),m===0)break e;arraySet(r,i,s,m,a),b-=m,s+=m,E-=m,a+=m,n.length-=m;break}n.mode=TYPE;break;case TABLE:for(;c<14;){if(b===0)break e;b--,l+=i[s++]<<c,c+=8}if(n.nlen=(l&31)+257,l>>>=5,c-=5,n.ndist=(l&31)+1,l>>>=5,c-=5,n.ncode=(l&15)+4,l>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=BAD;break}n.have=0,n.mode=LENLENS;case LENLENS:for(;n.have<n.ncode;){for(;c<3;){if(b===0)break e;b--,l+=i[s++]<<c,c+=8}n.lens[$[n.have++]]=l&7,l>>>=3,c-=3}for(;n.have<19;)n.lens[$[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,O={bits:n.lenbits},u=inflate_table(CODES,n.lens,0,19,n.lencode,0,n.work,O),n.lenbits=O.bits,u){e.msg="invalid code lengths set",n.mode=BAD;break}n.have=0,n.mode=CODELENS;case CODELENS:for(;n.have<n.nlen+n.ndist;){for(;d=n.lencode[l&(1<<n.lenbits)-1],T=d>>>24,P=d>>>16&255,F=d&65535,!(T<=c);){if(b===0)break e;b--,l+=i[s++]<<c,c+=8}if(F<16)l>>>=T,c-=T,n.lens[n.have++]=F;else{if(F===16){for(_=T+2;c<_;){if(b===0)break e;b--,l+=i[s++]<<c,c+=8}if(l>>>=T,c-=T,n.have===0){e.msg="invalid bit length repeat",n.mode=BAD;break}f=n.lens[n.have-1],m=3+(l&3),l>>>=2,c-=2}else if(F===17){for(_=T+3;c<_;){if(b===0)break e;b--,l+=i[s++]<<c,c+=8}l>>>=T,c-=T,f=0,m=3+(l&7),l>>>=3,c-=3}else{for(_=T+7;c<_;){if(b===0)break e;b--,l+=i[s++]<<c,c+=8}l>>>=T,c-=T,f=0,m=11+(l&127),l>>>=7,c-=7}if(n.have+m>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=BAD;break}for(;m--;)n.lens[n.have++]=f}}if(n.mode===BAD)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=BAD;break}if(n.lenbits=9,O={bits:n.lenbits},u=inflate_table(LENS,n.lens,0,n.nlen,n.lencode,0,n.work,O),n.lenbits=O.bits,u){e.msg="invalid literal/lengths set",n.mode=BAD;break}if(n.distbits=6,n.distcode=n.distdyn,O={bits:n.distbits},u=inflate_table(DISTS,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,O),n.distbits=O.bits,u){e.msg="invalid distances set",n.mode=BAD;break}if(n.mode=LEN_,t===Z_TREES$1)break e;case LEN_:n.mode=LEN;case LEN:if(b>=6&&E>=258){e.next_out=a,e.avail_out=E,e.next_in=s,e.avail_in=b,n.hold=l,n.bits=c,inflate_fast(e,x),a=e.next_out,r=e.output,E=e.avail_out,s=e.next_in,i=e.input,b=e.avail_in,l=n.hold,c=n.bits,n.mode===TYPE&&(n.back=-1);break}for(n.back=0;d=n.lencode[l&(1<<n.lenbits)-1],T=d>>>24,P=d>>>16&255,F=d&65535,!(T<=c);){if(b===0)break e;b--,l+=i[s++]<<c,c+=8}if(P&&!(P&240)){for(y=T,o=P,p=F;d=n.lencode[p+((l&(1<<y+o)-1)>>y)],T=d>>>24,P=d>>>16&255,F=d&65535,!(y+T<=c);){if(b===0)break e;b--,l+=i[s++]<<c,c+=8}l>>>=y,c-=y,n.back+=y}if(l>>>=T,c-=T,n.back+=T,n.length=F,P===0){n.mode=LIT;break}if(P&32){n.back=-1,n.mode=TYPE;break}if(P&64){e.msg="invalid literal/length code",n.mode=BAD;break}n.extra=P&15,n.mode=LENEXT;case LENEXT:if(n.extra){for(_=n.extra;c<_;){if(b===0)break e;b--,l+=i[s++]<<c,c+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=DIST;case DIST:for(;d=n.distcode[l&(1<<n.distbits)-1],T=d>>>24,P=d>>>16&255,F=d&65535,!(T<=c);){if(b===0)break e;b--,l+=i[s++]<<c,c+=8}if(!(P&240)){for(y=T,o=P,p=F;d=n.distcode[p+((l&(1<<y+o)-1)>>y)],T=d>>>24,P=d>>>16&255,F=d&65535,!(y+T<=c);){if(b===0)break e;b--,l+=i[s++]<<c,c+=8}l>>>=y,c-=y,n.back+=y}if(l>>>=T,c-=T,n.back+=T,P&64){e.msg="invalid distance code",n.mode=BAD;break}n.offset=F,n.extra=P&15,n.mode=DISTEXT;case DISTEXT:if(n.extra){for(_=n.extra;c<_;){if(b===0)break e;b--,l+=i[s++]<<c,c+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=BAD;break}n.mode=MATCH;case MATCH:if(E===0)break e;if(m=x-E,n.offset>m){if(m=n.offset-m,m>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=BAD;break}m>n.wnext?(m-=n.wnext,g=n.wsize-m):g=n.wnext-m,m>n.length&&(m=n.length),S=n.window}else S=r,g=a-n.offset,m=n.length;m>E&&(m=E),E-=m,n.length-=m;do r[a++]=S[g++];while(--m);n.length===0&&(n.mode=LEN);break;case LIT:if(E===0)break e;r[a++]=n.length,E--,n.mode=LEN;break;case CHECK:if(n.wrap){for(;c<32;){if(b===0)break e;b--,l|=i[s++]<<c,c+=8}if(x-=E,e.total_out+=x,n.total+=x,x&&(e.adler=n.check=n.flags?crc32(n.check,r,x,a-x):adler32(n.check,r,x,a-x)),x=E,(n.flags?l:zswap32(l))!==n.check){e.msg="incorrect data check",n.mode=BAD;break}l=0,c=0}n.mode=LENGTH;case LENGTH:if(n.wrap&&n.flags){for(;c<32;){if(b===0)break e;b--,l+=i[s++]<<c,c+=8}if(l!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=BAD;break}l=0,c=0}n.mode=DONE;case DONE:u=Z_STREAM_END$1;break e;case BAD:u=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR$1}return e.next_out=a,e.avail_out=E,e.next_in=s,e.avail_in=b,n.hold=l,n.bits=c,(n.wsize||x!==e.avail_out&&n.mode<BAD&&(n.mode<CHECK||t!==Z_FINISH$1))&&updatewindow(e,e.output,e.next_out,x-e.avail_out),I-=e.avail_in,x-=e.avail_out,e.total_in+=I,e.total_out+=x,n.total+=x,n.wrap&&x&&(e.adler=n.check=n.flags?crc32(n.check,r,x,e.next_out-x):adler32(n.check,r,x,e.next_out-x)),e.data_type=n.bits+(n.last?64:0)+(n.mode===TYPE?128:0)+(n.mode===LEN_||n.mode===COPY_?256:0),(I===0&&x===0||t===Z_FINISH$1)&&u===Z_OK$1&&(u=Z_BUF_ERROR$1),u}function inflateEnd(e){if(!e||!e.state)return Z_STREAM_ERROR$1;var t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK$1}var NONE=0,DEFLATE=1,INFLATE=2,GZIP=3,GUNZIP=4,DEFLATERAW=5,INFLATERAW=6,UNZIP=7,Z_NO_FLUSH=0,Z_PARTIAL_FLUSH=1,Z_SYNC_FLUSH=2,Z_FULL_FLUSH=3,Z_FINISH=4,Z_BLOCK=5,Z_TREES=6,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_ERRNO=-1,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_BUF_ERROR=-5,Z_NO_COMPRESSION=0,Z_BEST_SPEED=1,Z_BEST_COMPRESSION=9,Z_DEFAULT_COMPRESSION=-1,Z_FILTERED=1,Z_HUFFMAN_ONLY=2,Z_RLE=3,Z_FIXED=4,Z_DEFAULT_STRATEGY=0,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN=2,Z_DEFLATED=8;function Zlib$1(e){if(e<DEFLATE||e>UNZIP)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}Zlib$1.prototype.init=function(e,t,n,i,r){this.windowBits=e,this.level=t,this.memLevel=n,this.strategy=i,(this.mode===GZIP||this.mode===GUNZIP)&&(this.windowBits+=16),this.mode===UNZIP&&(this.windowBits+=32),(this.mode===DEFLATERAW||this.mode===INFLATERAW)&&(this.windowBits=-this.windowBits),this.strm=new ZStream;var s;switch(this.mode){case DEFLATE:case GZIP:case DEFLATERAW:s=deflateInit2(this.strm,this.level,Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case INFLATE:case GUNZIP:case INFLATERAW:case UNZIP:s=inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}if(s!==Z_OK){this._error(s);return}this.write_in_progress=!1,this.init_done=!0};Zlib$1.prototype.params=function(){throw new Error("deflateParams Not supported")};Zlib$1.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")};Zlib$1.prototype.write=function(e,t,n,i,r,s,a){this._writeCheck(),this.write_in_progress=!0;var b=this;return browser$1.nextTick(function(){b.write_in_progress=!1;var E=b._write(e,t,n,i,r,s,a);b.callback(E[0],E[1]),b.pending_close&&b.close()}),this};function bufferSet(e,t){for(var n=0;n<e.length;n++)this[t+n]=e[n]}Zlib$1.prototype.writeSync=function(e,t,n,i,r,s,a){return this._writeCheck(),this._write(e,t,n,i,r,s,a)};Zlib$1.prototype._write=function(e,t,n,i,r,s,a){if(this.write_in_progress=!0,e!==Z_NO_FLUSH&&e!==Z_PARTIAL_FLUSH&&e!==Z_SYNC_FLUSH&&e!==Z_FULL_FLUSH&&e!==Z_FINISH&&e!==Z_BLOCK)throw new Error("Invalid flush value");t==null&&(t=new Buffer(0),i=0,n=0),r._set?r.set=r._set:r.set=bufferSet;var b=this.strm;b.avail_in=i,b.input=t,b.next_in=n,b.avail_out=a,b.output=r,b.next_out=s;var E;switch(this.mode){case DEFLATE:case GZIP:case DEFLATERAW:E=deflate$1(b,e);break;case UNZIP:case INFLATE:case GUNZIP:case INFLATERAW:E=inflate$1(b,e);break;default:throw new Error("Unknown mode "+this.mode)}return E!==Z_STREAM_END&&E!==Z_OK&&this._error(E),this.write_in_progress=!1,[b.avail_in,b.avail_out]};Zlib$1.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,this.mode===DEFLATE||this.mode===GZIP||this.mode===DEFLATERAW?deflateEnd(this.strm):inflateEnd(this.strm),this.mode=NONE};var status;Zlib$1.prototype.reset=function(){switch(this.mode){case DEFLATE:case DEFLATERAW:status=deflateReset(this.strm);break;case INFLATE:case INFLATERAW:status=inflateReset(this.strm);break}status!==Z_OK&&this._error(status)};Zlib$1.prototype._error=function(e){this.onerror(msg[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()};var _binding=Object.freeze({__proto__:null,DEFLATE,DEFLATERAW,GUNZIP,GZIP,INFLATE,INFLATERAW,NONE,UNZIP,Z_BEST_COMPRESSION,Z_BEST_SPEED,Z_BINARY,Z_BLOCK,Z_BUF_ERROR,Z_DATA_ERROR,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED,Z_ERRNO,Z_FILTERED,Z_FINISH,Z_FIXED,Z_FULL_FLUSH,Z_HUFFMAN_ONLY,Z_NEED_DICT,Z_NO_COMPRESSION,Z_NO_FLUSH,Z_OK,Z_PARTIAL_FLUSH,Z_RLE,Z_STREAM_END,Z_STREAM_ERROR,Z_SYNC_FLUSH,Z_TEXT,Z_TREES,Z_UNKNOWN,Zlib:Zlib$1});function assert(e,t){if(!e)throw new Error(t)}var binding={};Object.keys(_binding).forEach(function(e){binding[e]=_binding[e]});binding.Z_MIN_WINDOWBITS=8;binding.Z_MAX_WINDOWBITS=15;binding.Z_DEFAULT_WINDOWBITS=15;binding.Z_MIN_CHUNK=64;binding.Z_MAX_CHUNK=1/0;binding.Z_DEFAULT_CHUNK=16*1024;binding.Z_MIN_MEMLEVEL=1;binding.Z_MAX_MEMLEVEL=9;binding.Z_DEFAULT_MEMLEVEL=8;binding.Z_MIN_LEVEL=-1;binding.Z_MAX_LEVEL=9;binding.Z_DEFAULT_LEVEL=binding.Z_DEFAULT_COMPRESSION;var codes={Z_OK:binding.Z_OK,Z_STREAM_END:binding.Z_STREAM_END,Z_NEED_DICT:binding.Z_NEED_DICT,Z_ERRNO:binding.Z_ERRNO,Z_STREAM_ERROR:binding.Z_STREAM_ERROR,Z_DATA_ERROR:binding.Z_DATA_ERROR,Z_MEM_ERROR:binding.Z_MEM_ERROR,Z_BUF_ERROR:binding.Z_BUF_ERROR,Z_VERSION_ERROR:binding.Z_VERSION_ERROR};Object.keys(codes).forEach(function(e){codes[codes[e]]=e});function createDeflate(e){return new Deflate(e)}function createInflate(e){return new Inflate(e)}function createDeflateRaw(e){return new DeflateRaw(e)}function createInflateRaw(e){return new InflateRaw(e)}function createGzip(e){return new Gzip(e)}function createGunzip(e){return new Gunzip(e)}function createUnzip(e){return new Unzip(e)}function deflate(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new Deflate(t),e,n)}function deflateSync(e,t){return zlibBufferSync(new Deflate(t),e)}function gzip(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new Gzip(t),e,n)}function gzipSync(e,t){return zlibBufferSync(new Gzip(t),e)}function deflateRaw(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new DeflateRaw(t),e,n)}function deflateRawSync(e,t){return zlibBufferSync(new DeflateRaw(t),e)}function unzip(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new Unzip(t),e,n)}function unzipSync(e,t){return zlibBufferSync(new Unzip(t),e)}function inflate(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new Inflate(t),e,n)}function inflateSync(e,t){return zlibBufferSync(new Inflate(t),e)}function gunzip(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new Gunzip(t),e,n)}function gunzipSync(e,t){return zlibBufferSync(new Gunzip(t),e)}function inflateRaw(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new InflateRaw(t),e,n)}function inflateRawSync(e,t){return zlibBufferSync(new InflateRaw(t),e)}function zlibBuffer(e,t,n){var i=[],r=0;e.on("error",a),e.on("end",b),e.end(t),s();function s(){for(var E;(E=e.read())!==null;)i.push(E),r+=E.length;e.once("readable",s)}function a(E){e.removeListener("end",b),e.removeListener("readable",s),n(E)}function b(){var E=Buffer.concat(i,r);i=[],n(null,E),e.close()}}function zlibBufferSync(e,t){if(typeof t=="string"&&(t=new Buffer(t)),!Buffer.isBuffer(t))throw new TypeError("Not a string or buffer");var n=binding.Z_FINISH;return e._processChunk(t,n)}function Deflate(e){if(!(this instanceof Deflate))return new Deflate(e);Zlib.call(this,e,binding.DEFLATE)}function Inflate(e){if(!(this instanceof Inflate))return new Inflate(e);Zlib.call(this,e,binding.INFLATE)}function Gzip(e){if(!(this instanceof Gzip))return new Gzip(e);Zlib.call(this,e,binding.GZIP)}function Gunzip(e){if(!(this instanceof Gunzip))return new Gunzip(e);Zlib.call(this,e,binding.GUNZIP)}function DeflateRaw(e){if(!(this instanceof DeflateRaw))return new DeflateRaw(e);Zlib.call(this,e,binding.DEFLATERAW)}function InflateRaw(e){if(!(this instanceof InflateRaw))return new InflateRaw(e);Zlib.call(this,e,binding.INFLATERAW)}function Unzip(e){if(!(this instanceof Unzip))return new Unzip(e);Zlib.call(this,e,binding.UNZIP)}function Zlib(e,t){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||binding.Z_DEFAULT_CHUNK,Transform.call(this,e),e.flush&&e.flush!==binding.Z_NO_FLUSH&&e.flush!==binding.Z_PARTIAL_FLUSH&&e.flush!==binding.Z_SYNC_FLUSH&&e.flush!==binding.Z_FULL_FLUSH&&e.flush!==binding.Z_FINISH&&e.flush!==binding.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||binding.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<binding.Z_MIN_CHUNK||e.chunkSize>binding.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<binding.Z_MIN_WINDOWBITS||e.windowBits>binding.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<binding.Z_MIN_LEVEL||e.level>binding.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<binding.Z_MIN_MEMLEVEL||e.memLevel>binding.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=binding.Z_FILTERED&&e.strategy!=binding.Z_HUFFMAN_ONLY&&e.strategy!=binding.Z_RLE&&e.strategy!=binding.Z_FIXED&&e.strategy!=binding.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!Buffer.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new binding.Zlib(t);var n=this;this._hadError=!1,this._binding.onerror=function(s,a){n._binding=null,n._hadError=!0;var b=new Error(s);b.errno=a,b.code=binding.codes[a],n.emit("error",b)};var i=binding.Z_DEFAULT_COMPRESSION;typeof e.level=="number"&&(i=e.level);var r=binding.Z_DEFAULT_STRATEGY;typeof e.strategy=="number"&&(r=e.strategy),this._binding.init(e.windowBits||binding.Z_DEFAULT_WINDOWBITS,i,e.memLevel||binding.Z_DEFAULT_MEMLEVEL,r,e.dictionary),this._buffer=new Buffer(this._chunkSize),this._offset=0,this._closed=!1,this._level=i,this._strategy=r,this.once("end",this.close)}inherits$1(Zlib,Transform);Zlib.prototype.params=function(e,t,n){if(e<binding.Z_MIN_LEVEL||e>binding.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(t!=binding.Z_FILTERED&&t!=binding.Z_HUFFMAN_ONLY&&t!=binding.Z_RLE&&t!=binding.Z_FIXED&&t!=binding.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+t);if(this._level!==e||this._strategy!==t){var i=this;this.flush(binding.Z_SYNC_FLUSH,function(){i._binding.params(e,t),i._hadError||(i._level=e,i._strategy=t,n&&n())})}else browser$1.nextTick(n)};Zlib.prototype.reset=function(){return this._binding.reset()};Zlib.prototype._flush=function(e){this._transform(new Buffer(0),"",e)};Zlib.prototype.flush=function(e,t){var n=this._writableState;if((typeof e=="function"||e===void 0&&!t)&&(t=e,e=binding.Z_FULL_FLUSH),n.ended)t&&browser$1.nextTick(t);else if(n.ending)t&&this.once("end",t);else if(n.needDrain){var i=this;this.once("drain",function(){i.flush(t)})}else this._flushFlag=e,this.write(new Buffer(0),"",t)};Zlib.prototype.close=function(e){if(e&&browser$1.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var t=this;browser$1.nextTick(function(){t.emit("close")})}};Zlib.prototype._transform=function(e,t,n){var i,r=this._writableState,s=r.ending||r.ended,a=s&&(!e||r.length===e.length);if(!e===null&&!Buffer.isBuffer(e))return n(new Error("invalid input"));a?i=binding.Z_FINISH:(i=this._flushFlag,e.length>=r.length&&(this._flushFlag=this._opts.flush||binding.Z_NO_FLUSH)),this._processChunk(e,i,n)};Zlib.prototype._processChunk=function(e,t,n){var i=e&&e.length,r=this._chunkSize-this._offset,s=0,a=this,b=typeof n=="function";if(!b){var E=[],l=0,c;this.on("error",function(S){c=S});do var I=this._binding.writeSync(t,e,s,i,this._buffer,this._offset,r);while(!this._hadError&&g(I[0],I[1]));if(this._hadError)throw c;var x=Buffer.concat(E,l);return this.close(),x}var m=this._binding.write(t,e,s,i,this._buffer,this._offset,r);m.buffer=e,m.callback=g;function g(S,d){if(!a._hadError){var T=r-d;if(assert(T>=0,"have should not go down"),T>0){var P=a._buffer.slice(a._offset,a._offset+T);a._offset+=T,b?a.push(P):(E.push(P),l+=P.length)}if((d===0||a._offset>=a._chunkSize)&&(r=a._chunkSize,a._offset=0,a._buffer=new Buffer(a._chunkSize)),d===0){if(s+=i-S,i=S,!b)return!0;var F=a._binding.write(t,e,s,i,a._buffer,a._offset,a._chunkSize);F.callback=g,F.buffer=e;return}if(!b)return!1;n()}}};inherits$1(Deflate,Zlib);inherits$1(Inflate,Zlib);inherits$1(Gzip,Zlib);inherits$1(Gunzip,Zlib);inherits$1(DeflateRaw,Zlib);inherits$1(InflateRaw,Zlib);inherits$1(Unzip,Zlib);var _polyfillNode_zlib={codes,createDeflate,createInflate,createDeflateRaw,createInflateRaw,createGzip,createGunzip,createUnzip,deflate,deflateSync,gzip,gzipSync,deflateRaw,deflateRawSync,unzip,unzipSync,inflate,inflateSync,gunzip,gunzipSync,inflateRaw,inflateRawSync,Deflate,Inflate,Gzip,Gunzip,DeflateRaw,InflateRaw,Unzip,Zlib},_polyfillNode_zlib$1=Object.freeze({__proto__:null,Deflate,DeflateRaw,Gunzip,Gzip,Inflate,InflateRaw,Unzip,Zlib,codes,createDeflate,createDeflateRaw,createGunzip,createGzip,createInflate,createInflateRaw,createUnzip,default:_polyfillNode_zlib,deflate,deflateRaw,deflateRawSync,deflateSync,gunzip,gunzipSync,gzip,gzipSync,inflate,inflateRaw,inflateRawSync,inflateSync,unzip,unzipSync}),require$$5=getAugmentedNamespace(_polyfillNode_zlib$1);(function(module,exports){(function(t,n){module.exports=n()})(globalThis,()=>(()=>{var __webpack_modules__=[,(e,t)=>{var Pe;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMode=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=Ee,t.bytesToString=z,t.createValidAbsoluteUrl=ve,t.getModificationDate=Ae,t.getVerbosityLevel=ue,t.info=ce,t.isArrayBuffer=pe,t.isArrayEqual=we,t.normalizeUnicode=ye,t.objectFromMap=D,t.objectSize=M,t.setVerbosityLevel=te,t.shadow=G,t.string32=A,t.stringToBytes=h,t.stringToPDFString=ne,t.stringToUTF8String=ae,t.unreachable=me,t.utf8StringToString=fe,t.warn=de;const n=[1,0,0,1,0,0];t.IDENTITY_MATRIX=n;const i=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=i;const r=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=r;const s=1.35;t.LINE_FACTOR=s;const a=.35;t.LINE_DESCENT_FACTOR=a;const b=a/s;t.BASELINE_FACTOR=b;const E={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=E;const l={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=l;const c="pdfjs_internal_editor_";t.AnnotationEditorPrefix=c;const I={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};t.AnnotationEditorType=I;const x={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};t.AnnotationEditorParamsType=x;const m={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=m;const g={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=g;const S={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=S;const d={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=d;const T={MARKED:"Marked",REVIEW:"Review"};t.AnnotationStateModelType=T;const P={MARKED:"Marked",UNMARKED:"Unmarked"};t.AnnotationMarkedState=P;const F={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};t.AnnotationReviewState=F;const y={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=y;const o={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=o;const p={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=p;const f={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=f;const u={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=u;const w={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=w;const O={O:"PageOpen",C:"PageClose"};t.PageActionEventType=O;const _={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=_;const $={NONE:0,BINARY:1};t.CMapCompressionType=$;const X={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=X;const K={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=K;let Q=_.WARNINGS;function te(he){Number.isInteger(he)&&(Q=he)}function ue(){return Q}function ce(he){Q>=_.INFOS&&console.log(`Info: ${he}`)}function de(he){Q>=_.WARNINGS&&console.log(`Warning: ${he}`)}function me(he){throw new Error(he)}function Ee(he,B){he||me(B)}function Se(he){switch(he==null?void 0:he.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ve(he,B=null,U=null){if(!he)return null;try{if(U&&typeof he=="string"){if(U.addDefaultProtocol&&he.startsWith("www.")){const _e=he.match(/\./g);(_e==null?void 0:_e.length)>=2&&(he=`http://${he}`)}if(U.tryConvertEncoding)try{he=ae(he)}catch{}}const le=B?new URL(he,B):new URL(he);if(Se(le))return le}catch{}return null}function G(he,B,U,le=!1){return Object.defineProperty(he,B,{value:U,enumerable:!le,configurable:!0,writable:!1}),U}const C=function(){function B(U,le){this.constructor===B&&me("Cannot initialize BaseException."),this.message=U,this.name=le}return B.prototype=new Error,B.constructor=B,B}();t.BaseException=C;class R extends C{constructor(B,U){super(B,"PasswordException"),this.code=U}}t.PasswordException=R;class L extends C{constructor(B,U){super(B,"UnknownErrorException"),this.details=U}}t.UnknownErrorException=L;class q extends C{constructor(B){super(B,"InvalidPDFException")}}t.InvalidPDFException=q;class W extends C{constructor(B){super(B,"MissingPDFException")}}t.MissingPDFException=W;class Y extends C{constructor(B,U){super(B,"UnexpectedResponseException"),this.status=U}}t.UnexpectedResponseException=Y;class j extends C{constructor(B){super(B,"FormatError")}}t.FormatError=j;class H extends C{constructor(B){super(B,"AbortException")}}t.AbortException=H;function z(he){(typeof he!="object"||(he==null?void 0:he.length)===void 0)&&me("Invalid argument for bytesToString");const B=he.length,U=8192;if(B<U)return String.fromCharCode.apply(null,he);const le=[];for(let _e=0;_e<B;_e+=U){const Ce=Math.min(_e+U,B),Re=he.subarray(_e,Ce);le.push(String.fromCharCode.apply(null,Re))}return le.join("")}function h(he){typeof he!="string"&&me("Invalid argument for stringToBytes");const B=he.length,U=new Uint8Array(B);for(let le=0;le<B;++le)U[le]=he.charCodeAt(le)&255;return U}function A(he){return String.fromCharCode(he>>24&255,he>>16&255,he>>8&255,he&255)}function M(he){return Object.keys(he).length}function D(he){const B=Object.create(null);for(const[U,le]of he)B[U]=le;return B}function N(){const he=new Uint8Array(4);return he[0]=1,new Uint32Array(he.buffer,0,1)[0]===1}function Z(){try{return new Function(""),!0}catch{return!1}}class re{static get isLittleEndian(){return G(this,"isLittleEndian",N())}static get isEvalSupported(){return G(this,"isEvalSupported",Z())}static get isOffscreenCanvasSupported(){return G(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?G(this,"platform",{isWin:!1,isMac:!1}):G(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}t.FeatureTest=re;const J=[...Array(256).keys()].map(he=>he.toString(16).padStart(2,"0"));class se{static makeHexColor(B,U,le){return`#${J[B]}${J[U]}${J[le]}`}static scaleMinMax(B,U){let le;B[0]?(B[0]<0&&(le=U[0],U[0]=U[1],U[1]=le),U[0]*=B[0],U[1]*=B[0],B[3]<0&&(le=U[2],U[2]=U[3],U[3]=le),U[2]*=B[3],U[3]*=B[3]):(le=U[0],U[0]=U[2],U[2]=le,le=U[1],U[1]=U[3],U[3]=le,B[1]<0&&(le=U[2],U[2]=U[3],U[3]=le),U[2]*=B[1],U[3]*=B[1],B[2]<0&&(le=U[0],U[0]=U[1],U[1]=le),U[0]*=B[2],U[1]*=B[2]),U[0]+=B[4],U[1]+=B[4],U[2]+=B[5],U[3]+=B[5]}static transform(B,U){return[B[0]*U[0]+B[2]*U[1],B[1]*U[0]+B[3]*U[1],B[0]*U[2]+B[2]*U[3],B[1]*U[2]+B[3]*U[3],B[0]*U[4]+B[2]*U[5]+B[4],B[1]*U[4]+B[3]*U[5]+B[5]]}static applyTransform(B,U){const le=B[0]*U[0]+B[1]*U[2]+U[4],_e=B[0]*U[1]+B[1]*U[3]+U[5];return[le,_e]}static applyInverseTransform(B,U){const le=U[0]*U[3]-U[1]*U[2],_e=(B[0]*U[3]-B[1]*U[2]+U[2]*U[5]-U[4]*U[3])/le,Ce=(-B[0]*U[1]+B[1]*U[0]+U[4]*U[1]-U[5]*U[0])/le;return[_e,Ce]}static getAxialAlignedBoundingBox(B,U){const le=se.applyTransform(B,U),_e=se.applyTransform(B.slice(2,4),U),Ce=se.applyTransform([B[0],B[3]],U),Re=se.applyTransform([B[2],B[1]],U);return[Math.min(le[0],_e[0],Ce[0],Re[0]),Math.min(le[1],_e[1],Ce[1],Re[1]),Math.max(le[0],_e[0],Ce[0],Re[0]),Math.max(le[1],_e[1],Ce[1],Re[1])]}static inverseTransform(B){const U=B[0]*B[3]-B[1]*B[2];return[B[3]/U,-B[1]/U,-B[2]/U,B[0]/U,(B[2]*B[5]-B[4]*B[3])/U,(B[4]*B[1]-B[5]*B[0])/U]}static singularValueDecompose2dScale(B){const U=[B[0],B[2],B[1],B[3]],le=B[0]*U[0]+B[1]*U[2],_e=B[0]*U[1]+B[1]*U[3],Ce=B[2]*U[0]+B[3]*U[2],Re=B[2]*U[1]+B[3]*U[3],Me=(le+Re)/2,ke=Math.sqrt((le+Re)**2-4*(le*Re-Ce*_e))/2,Ie=Me+ke||1,xe=Me-ke||1;return[Math.sqrt(Ie),Math.sqrt(xe)]}static normalizeRect(B){const U=B.slice(0);return B[0]>B[2]&&(U[0]=B[2],U[2]=B[0]),B[1]>B[3]&&(U[1]=B[3],U[3]=B[1]),U}static intersect(B,U){const le=Math.max(Math.min(B[0],B[2]),Math.min(U[0],U[2])),_e=Math.min(Math.max(B[0],B[2]),Math.max(U[0],U[2]));if(le>_e)return null;const Ce=Math.max(Math.min(B[1],B[3]),Math.min(U[1],U[3])),Re=Math.min(Math.max(B[1],B[3]),Math.max(U[1],U[3]));return Ce>Re?null:[le,Ce,_e,Re]}static bezierBoundingBox(B,U,le,_e,Ce,Re,Me,ke){const Ie=[],xe=[[],[]];let Ne,Oe,Le,Fe,He,$e,ze,We;for(let Xe=0;Xe<2;++Xe){if(Xe===0?(Oe=6*B-12*le+6*Ce,Ne=-3*B+9*le-9*Ce+3*Me,Le=3*le-3*B):(Oe=6*U-12*_e+6*Re,Ne=-3*U+9*_e-9*Re+3*ke,Le=3*_e-3*U),Math.abs(Ne)<1e-12){if(Math.abs(Oe)<1e-12)continue;Fe=-Le/Oe,0<Fe&&Fe<1&&Ie.push(Fe);continue}ze=Oe*Oe-4*Le*Ne,We=Math.sqrt(ze),!(ze<0)&&(He=(-Oe+We)/(2*Ne),0<He&&He<1&&Ie.push(He),$e=(-Oe-We)/(2*Ne),0<$e&&$e<1&&Ie.push($e))}let Be=Ie.length,Ue;const qe=Be;for(;Be--;)Fe=Ie[Be],Ue=1-Fe,xe[0][Be]=Ue*Ue*Ue*B+3*Ue*Ue*Fe*le+3*Ue*Fe*Fe*Ce+Fe*Fe*Fe*Me,xe[1][Be]=Ue*Ue*Ue*U+3*Ue*Ue*Fe*_e+3*Ue*Fe*Fe*Re+Fe*Fe*Fe*ke;return xe[0][qe]=B,xe[1][qe]=U,xe[0][qe+1]=Me,xe[1][qe+1]=ke,xe[0].length=xe[1].length=qe+2,[Math.min(...xe[0]),Math.min(...xe[1]),Math.max(...xe[0]),Math.max(...xe[1])]}}t.Util=se;const oe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ne(he){if(he[0]>="ï"){let U;if(he[0]==="þ"&&he[1]==="ÿ"?U="utf-16be":he[0]==="ÿ"&&he[1]==="þ"?U="utf-16le":he[0]==="ï"&&he[1]==="»"&&he[2]==="¿"&&(U="utf-8"),U)try{const le=new TextDecoder(U,{fatal:!0}),_e=h(he);return le.decode(_e)}catch(le){de(`stringToPDFString: "${le}".`)}}const B=[];for(let U=0,le=he.length;U<le;U++){const _e=oe[he.charCodeAt(U)];B.push(_e?String.fromCharCode(_e):he.charAt(U))}return B.join("")}function ae(he){return decodeURIComponent(escape(he))}function fe(he){return unescape(encodeURIComponent(he))}function pe(he){return typeof he=="object"&&(he==null?void 0:he.byteLength)!==void 0}function we(he,B){if(he.length!==B.length)return!1;for(let U=0,le=he.length;U<le;U++)if(he[U]!==B[U])return!1;return!0}function Ae(he=new Date){return[he.getUTCFullYear().toString(),(he.getUTCMonth()+1).toString().padStart(2,"0"),he.getUTCDate().toString().padStart(2,"0"),he.getUTCHours().toString().padStart(2,"0"),he.getUTCMinutes().toString().padStart(2,"0"),he.getUTCSeconds().toString().padStart(2,"0")].join("")}class Te{constructor(){ee(this,Pe,!1);this.promise=new Promise((B,U)=>{this.resolve=le=>{ge(this,Pe,!0),B(le)},this.reject=le=>{ge(this,Pe,!0),U(le)}})}get settled(){return k(this,Pe)}}Pe=new WeakMap,t.PromiseCapability=Te;let V=null,be=null;function ye(he){return V||(V=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,be=new Map([["ﬅ","ſt"]])),he.replaceAll(V,(B,U,le)=>U?U.normalize("NFKC"):be.get(le))}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var e,n,i,r,Ke,a,at,E,l,c,I,x,m,g,S,ft,T,P,pt,y,o;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:f,NodeCMapReaderFactory:u,NodeFilterFactory:w,NodeStandardFontDataFactory:O}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=f,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=u,exports.DefaultFilterFactory=DefaultFilterFactory=w,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=O}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:f}=__w_pdfjs_require__(21);createPDFNetworkStream=u=>new f(u)}else{const{PDFNetworkStream:f}=__w_pdfjs_require__(24),{PDFFetchStream:u}=__w_pdfjs_require__(25);createPDFNetworkStream=w=>(0,_display_utils.isValidFetchUrl)(w.url)?new u(w):new f(w)}function getDocument(f){if(typeof f=="string"||f instanceof URL?f={url:f}:(0,_util.isArrayBuffer)(f)&&(f={data:f}),typeof f!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!f.url&&!f.data&&!f.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const u=new PDFDocumentLoadingTask,{docId:w}=u,O=f.url?getUrlProp(f.url):null,_=f.data?getDataProp(f.data):null,$=f.httpHeaders||null,X=f.withCredentials===!0,K=f.password??null,Q=f.range instanceof PDFDataRangeTransport?f.range:null,te=Number.isInteger(f.rangeChunkSize)&&f.rangeChunkSize>0?f.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let ue=f.worker instanceof PDFWorker?f.worker:null;const ce=f.verbosity,de=typeof f.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(f.docBaseUrl)?f.docBaseUrl:null,me=typeof f.cMapUrl=="string"?f.cMapUrl:null,Ee=f.cMapPacked!==!1,Se=f.CMapReaderFactory||DefaultCMapReaderFactory,ve=typeof f.standardFontDataUrl=="string"?f.standardFontDataUrl:null,G=f.StandardFontDataFactory||DefaultStandardFontDataFactory,C=f.stopAtErrors!==!0,R=Number.isInteger(f.maxImageSize)&&f.maxImageSize>-1?f.maxImageSize:-1,L=f.isEvalSupported!==!1,q=typeof f.isOffscreenCanvasSupported=="boolean"?f.isOffscreenCanvasSupported:!_is_node.isNodeJS,W=Number.isInteger(f.canvasMaxAreaInBytes)?f.canvasMaxAreaInBytes:-1,Y=typeof f.disableFontFace=="boolean"?f.disableFontFace:_is_node.isNodeJS,j=f.fontExtraProperties===!0,H=f.enableXfa===!0,z=f.ownerDocument||globalThis.document,h=f.disableRange===!0,A=f.disableStream===!0,M=f.disableAutoFetch===!0,D=f.pdfBug===!0,N=Q?Q.length:f.length??NaN,Z=typeof f.useSystemFonts=="boolean"?f.useSystemFonts:!_is_node.isNodeJS&&!Y,re=typeof f.useWorkerFetch=="boolean"?f.useWorkerFetch:Se===_display_utils.DOMCMapReaderFactory&&G===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(me,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(ve,document.baseURI),J=f.canvasFactory||new DefaultCanvasFactory({ownerDocument:z}),se=f.filterFactory||new DefaultFilterFactory({docId:w,ownerDocument:z}),oe=null;(0,_util.setVerbosityLevel)(ce);const ne={canvasFactory:J,filterFactory:se};if(re||(ne.cMapReaderFactory=new Se({baseUrl:me,isCompressed:Ee}),ne.standardFontDataFactory=new G({baseUrl:ve})),!ue){const pe={verbosity:ce,port:_worker_options.GlobalWorkerOptions.workerPort};ue=pe.port?PDFWorker.fromPort(pe):new PDFWorker(pe),u._worker=ue}const ae={docId:w,apiVersion:"3.6.172",data:_,password:K,disableAutoFetch:M,rangeChunkSize:te,length:N,docBaseUrl:de,enableXfa:H,evaluatorOptions:{maxImageSize:R,disableFontFace:Y,ignoreErrors:C,isEvalSupported:L,isOffscreenCanvasSupported:q,canvasMaxAreaInBytes:W,fontExtraProperties:j,useSystemFonts:Z,cMapUrl:re?me:null,standardFontDataUrl:re?ve:null}},fe={ignoreErrors:C,isEvalSupported:L,disableFontFace:Y,fontExtraProperties:j,enableXfa:H,ownerDocument:z,disableAutoFetch:M,pdfBug:D,styleElement:oe};return ue.promise.then(function(){if(u.destroyed)throw new Error("Loading aborted");const pe=_fetchDocument(ue,ae),we=new Promise(function(Ae){let Te;Q?Te=new _transport_stream.PDFDataTransportStream({length:N,initialData:Q.initialData,progressiveDone:Q.progressiveDone,contentDispositionFilename:Q.contentDispositionFilename,disableRange:h,disableStream:A},Q):_||(Te=createPDFNetworkStream({url:O,length:N,httpHeaders:$,withCredentials:X,rangeChunkSize:te,disableRange:h,disableStream:A})),Ae(Te)});return Promise.all([pe,we]).then(function([Ae,Te]){if(u.destroyed)throw new Error("Loading aborted");const V=new _message_handler.MessageHandler(w,Ae,ue.port),be=new WorkerTransport(V,u,Te,fe,ne);u._transport=be,V.send("Ready",null)})}).catch(u._capability.reject),u}async function _fetchDocument(f,u){if(f.destroyed)throw new Error("Worker was destroyed");const w=await f.messageHandler.sendWithPromise("GetDocRequest",u,u.data?[u.data.buffer]:null);if(f.destroyed)throw new Error("Worker was destroyed");return w}function getUrlProp(f){if(f instanceof URL)return f.href;try{return new URL(f,window.location).href}catch{if(_is_node.isNodeJS&&typeof f=="string")return f}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(f){if(_is_node.isNodeJS&&typeof Buffer<"u"&&f instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(f);if(f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength)return f;if(typeof f=="string")return(0,_util.stringToBytes)(f);if(typeof f=="object"&&!isNaN(f==null?void 0:f.length)||(0,_util.isArrayBuffer)(f))return new Uint8Array(f);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class t{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${st(t,e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var u;this.destroyed=!0,await((u=this._transport)==null?void 0:u.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};e=new WeakMap,ee(t,e,0);let PDFDocumentLoadingTask=t;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(u,w,O=!1,_=null){this.length=u,this.initialData=w,this.progressiveDone=O,this.contentDispositionFilename=_,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(u){this._rangeListeners.push(u)}addProgressListener(u){this._progressListeners.push(u)}addProgressiveReadListener(u){this._progressiveReadListeners.push(u)}addProgressiveDoneListener(u){this._progressiveDoneListeners.push(u)}onDataRange(u,w){for(const O of this._rangeListeners)O(u,w)}onDataProgress(u,w){this._readyCapability.promise.then(()=>{for(const O of this._progressListeners)O(u,w)})}onDataProgressiveRead(u){this._readyCapability.promise.then(()=>{for(const w of this._progressiveReadListeners)w(u)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const u of this._progressiveDoneListeners)u()})}transportReady(){this._readyCapability.resolve()}requestDataRange(u,w){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(u,w){this._pdfInfo=u,this._transport=w}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(u){return this._transport.getPage(u)}getPageIndex(u){return this._transport.getPageIndex(u)}getDestinations(){return this._transport.getDestinations()}getDestination(u){return this._transport.getDestination(u)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(u=!1){return this._transport.startCleanup(u||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(u,w,O,_=!1){ee(this,r);ee(this,a);ee(this,n,null);ee(this,i,!1);this._pageIndex=u,this._pageInfo=w,this._transport=O,this._stats=_?new _display_utils.StatTimer:null,this._pdfBug=_,this.commonObjs=O.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:u,rotation:w=this.rotate,offsetX:O=0,offsetY:_=0,dontFlip:$=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:u,rotation:w,offsetX:O,offsetY:_,dontFlip:$})}getAnnotations({intent:u="display"}={}){const w=this._transport.getRenderingIntent(u);return this._transport.getAnnotations(this._pageIndex,w.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var u;return((u=this._transport._htmlForXfa)==null?void 0:u.children[this._pageIndex])||null}render({canvasContext:u,viewport:w,intent:O="display",annotationMode:_=_util.AnnotationMode.ENABLE,transform:$=null,background:X=null,optionalContentConfigPromise:K=null,annotationCanvasMap:Q=null,pageColors:te=null,printAnnotationStorage:ue=null}){var G,C,R;if((G=arguments[0])!=null&&G.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");(C=this._stats)==null||C.time("Overall");const ce=this._transport.getRenderingIntent(O,_,ue);ge(this,i,!1),ie(this,a,at).call(this),K||(K=this._transport.getOptionalContentConfig());let de=this._intentStates.get(ce.cacheKey);de||(de=Object.create(null),this._intentStates.set(ce.cacheKey,de)),de.streamReaderCancelTimeout&&(clearTimeout(de.streamReaderCancelTimeout),de.streamReaderCancelTimeout=null);const me=!!(ce.renderingIntent&_util.RenderingIntentFlag.PRINT);de.displayReadyCapability||(de.displayReadyCapability=new _util.PromiseCapability,de.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(R=this._stats)==null||R.time("Page Request"),this._pumpOperatorList(ce));const Ee=L=>{var q,W;de.renderTasks.delete(Se),(this._maybeCleanupAfterRender||me)&&ge(this,i,!0),ie(this,r,Ke).call(this,!me),L?(Se.capability.reject(L),this._abortOperatorList({intentState:de,reason:L instanceof Error?L:new Error(L)})):Se.capability.resolve(),(q=this._stats)==null||q.timeEnd("Rendering"),(W=this._stats)==null||W.timeEnd("Overall")},Se=new InternalRenderTask({callback:Ee,params:{canvasContext:u,viewport:w,transform:$,background:X},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Q,operatorList:de.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!me,pdfBug:this._pdfBug,pageColors:te});(de.renderTasks||(de.renderTasks=new Set)).add(Se);const ve=Se.task;return Promise.all([de.displayReadyCapability.promise,K]).then(([L,q])=>{var W;if(k(this,i)){Ee();return}(W=this._stats)==null||W.time("Rendering"),Se.initializeGraphics({transparency:L,optionalContentConfig:q}),Se.operatorListChanged()}).catch(Ee),ve}getOperatorList({intent:u="display",annotationMode:w=_util.AnnotationMode.ENABLE,printAnnotationStorage:O=null}={}){var Q;function _(){X.operatorList.lastChunk&&(X.opListReadCapability.resolve(X.operatorList),X.renderTasks.delete(K))}const $=this._transport.getRenderingIntent(u,w,O,!0);let X=this._intentStates.get($.cacheKey);X||(X=Object.create(null),this._intentStates.set($.cacheKey,X));let K;return X.opListReadCapability||(K=Object.create(null),K.operatorListChanged=_,X.opListReadCapability=new _util.PromiseCapability,(X.renderTasks||(X.renderTasks=new Set)).add(K),X.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Q=this._stats)==null||Q.time("Page Request"),this._pumpOperatorList($)),X.opListReadCapability.promise}streamTextContent({includeMarkedContent:u=!1,disableNormalization:w=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:u===!0,disableNormalization:w===!0},{highWaterMark:100,size(_){return _.items.length}})}getTextContent(u={}){if(this._transport._htmlForXfa)return this.getXfa().then(O=>_xfa_text.XfaText.textContent(O));const w=this.streamTextContent(u);return new Promise(function(O,_){function $(){X.read().then(function({value:Q,done:te}){if(te){O(K);return}Object.assign(K.styles,Q.styles),K.items.push(...Q.items),$()},_)}const X=w.getReader(),K={items:[],styles:Object.create(null)};$()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const u=[];for(const w of this._intentStates.values())if(this._abortOperatorList({intentState:w,reason:new Error("Page was destroyed."),force:!0}),!w.opListReadCapability)for(const O of w.renderTasks)u.push(O.completed),O.cancel();return this.objs.clear(),ge(this,i,!1),ie(this,a,at).call(this),Promise.all(u)}cleanup(u=!1){ge(this,i,!0);const w=ie(this,r,Ke).call(this,!1);return u&&w&&this._stats&&(this._stats=new _display_utils.StatTimer),w}_startRenderPage(u,w){var _,$;const O=this._intentStates.get(w);O&&((_=this._stats)==null||_.timeEnd("Page Request"),($=O.displayReadyCapability)==null||$.resolve(u))}_renderPageChunk(u,w){for(let O=0,_=u.length;O<_;O++)w.operatorList.fnArray.push(u.fnArray[O]),w.operatorList.argsArray.push(u.argsArray[O]);w.operatorList.lastChunk=u.lastChunk,w.operatorList.separateAnnots=u.separateAnnots;for(const O of w.renderTasks)O.operatorListChanged();u.lastChunk&&ie(this,r,Ke).call(this,!0)}_pumpOperatorList({renderingIntent:u,cacheKey:w,annotationStorageMap:O}){const $=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:u,cacheKey:w,annotationStorage:O}).getReader(),X=this._intentStates.get(w);X.streamReader=$;const K=()=>{$.read().then(({value:Q,done:te})=>{if(te){X.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Q,X),K())},Q=>{if(X.streamReader=null,!this._transport.destroyed){if(X.operatorList){X.operatorList.lastChunk=!0;for(const te of X.renderTasks)te.operatorListChanged();ie(this,r,Ke).call(this,!0)}if(X.displayReadyCapability)X.displayReadyCapability.reject(Q);else if(X.opListReadCapability)X.opListReadCapability.reject(Q);else throw Q}})};K()}_abortOperatorList({intentState:u,reason:w,force:O=!1}){if(u.streamReader){if(u.streamReaderCancelTimeout&&(clearTimeout(u.streamReaderCancelTimeout),u.streamReaderCancelTimeout=null),!O){if(u.renderTasks.size>0)return;if(w instanceof _display_utils.RenderingCancelledException){let _=RENDERING_CANCELLED_TIMEOUT;w.extraDelay>0&&w.extraDelay<1e3&&(_+=w.extraDelay),u.streamReaderCancelTimeout=setTimeout(()=>{u.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:u,reason:w,force:!0})},_);return}}if(u.streamReader.cancel(new _util.AbortException(w.message)).catch(()=>{}),u.streamReader=null,!this._transport.destroyed){for(const[_,$]of this._intentStates)if($===u){this._intentStates.delete(_);break}this.cleanup()}}}get stats(){return this._stats}}n=new WeakMap,i=new WeakMap,r=new WeakSet,Ke=function(u=!1){if(ie(this,a,at).call(this),!k(this,i))return!1;if(u)return ge(this,n,setTimeout(()=>{ge(this,n,null),ie(this,r,Ke).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:w,operatorList:O}of this._intentStates.values())if(w.size>0||!O.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ge(this,i,!1),!0},a=new WeakSet,at=function(){k(this,n)&&(clearTimeout(k(this,n)),ge(this,n,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){ee(this,E,new Set);ee(this,l,Promise.resolve())}postMessage(u,w){const O={data:structuredClone(u,w?{transfer:w}:null)};k(this,l).then(()=>{for(const _ of k(this,E))_.call(this,O)})}addEventListener(u,w){k(this,E).add(w)}removeEventListener(u,w){k(this,E).delete(w)}terminate(){k(this,E).clear()}}E=new WeakMap,l=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire$1=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const f=(c=document==null?void 0:document.currentScript)==null?void 0:c.src;f&&(PDFWorkerUtil.fallbackWorkerSrc=f.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(f,u){let w;try{if(w=new URL(f),!w.origin||w.origin==="null")return!1}catch{return!1}const O=new URL(u,w);return w.origin===O.origin},PDFWorkerUtil.createCDNWrapper=function(f){const u=`importScripts("${f}");`;return URL.createObjectURL(new Blob([u]))}}const _PDFWorker=class _PDFWorker{constructor({name:f=null,port:u=null,verbosity:w=(0,_util.getVerbosityLevel)()}={}){if(u&&k(_PDFWorker,I).has(u))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=f,this.destroyed=!1,this.verbosity=w,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,u){k(_PDFWorker,I).set(u,this),this._initializeFromPort(u);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(f){this._port=f,this._messageHandler=new _message_handler.MessageHandler("main","worker",f),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:f}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,f)||(f=PDFWorkerUtil.createCDNWrapper(new URL(f,window.location).href));const u=new Worker(f),w=new _message_handler.MessageHandler("main","worker",u),O=()=>{u.removeEventListener("error",_),w.destroy(),u.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},_=()=>{this._webWorker||O()};u.addEventListener("error",_),w.on("test",X=>{if(u.removeEventListener("error",_),this.destroyed){O();return}X?(this._messageHandler=w,this._port=u,this._webWorker=u,this._readyCapability.resolve(),w.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),w.destroy(),u.terminate())}),w.on("ready",X=>{if(u.removeEventListener("error",_),this.destroyed){O();return}try{$()}catch{this._setupFakeWorker()}});const $=()=>{const X=new Uint8Array;w.send("test",X,[X.buffer])};$();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(f=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const u=new LoopbackPort;this._port=u;const w=`fake${PDFWorkerUtil.fakeWorkerId++}`,O=new _message_handler.MessageHandler(w+"_worker",w,u);f.setup(O,u);const _=new _message_handler.MessageHandler(w,w+"_worker",u);this._messageHandler=_,this._readyCapability.resolve(),_.send("configure",{verbosity:this.verbosity})}).catch(f=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${f.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),k(_PDFWorker,I).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(f){if(!(f!=null&&f.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return k(this,I).has(f.port)?k(this,I).get(f.port):new _PDFWorker(f)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var f;try{return((f=globalThis.pdfjsWorker)==null?void 0:f.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire$1=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};I=new WeakMap,ee(_PDFWorker,I,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(u,w,O,_,$){ee(this,S);ee(this,x,new Map);ee(this,m,new Map);ee(this,g,new Map);this.messageHandler=u,this.loadingTask=w,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:_.ownerDocument,styleElement:_.styleElement}),this._params=_,this.canvasFactory=$.canvasFactory,this.filterFactory=$.filterFactory,this.cMapReaderFactory=$.cMapReaderFactory,this.standardFontDataFactory=$.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=O,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(u,w=_util.AnnotationMode.ENABLE,O=null,_=!1){let $=_util.RenderingIntentFlag.DISPLAY,X=null;switch(u){case"any":$=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":$=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${u}`)}switch(w){case _util.AnnotationMode.DISABLE:$+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:$+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:$+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,X=($&_util.RenderingIntentFlag.PRINT&&O instanceof _annotation_storage.PrintAnnotationStorage?O:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${w}`)}return _&&($+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:$,cacheKey:`${$}_${_annotation_storage.AnnotationStorage.getHash(X)}`,annotationStorageMap:X}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const u=[];for(const O of k(this,m).values())u.push(O._destroy());k(this,m).clear(),k(this,g).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const w=this.messageHandler.sendWithPromise("Terminate",null);return u.push(w),Promise.all(u).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),k(this,x).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:u,loadingTask:w}=this;u.on("GetReader",(O,_)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=$=>{this._lastProgress={loaded:$.loaded,total:$.total}},_.onPull=()=>{this._fullReader.read().then(function({value:$,done:X}){if(X){_.close();return}(0,_util.assert)($ instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),_.enqueue(new Uint8Array($),1,[$])}).catch($=>{_.error($)})},_.onCancel=$=>{this._fullReader.cancel($),_.ready.catch(X=>{if(!this.destroyed)throw X})}}),u.on("ReaderHeadersReady",O=>{const _=new _util.PromiseCapability,$=this._fullReader;return $.headersReady.then(()=>{var X;(!$.isStreamingSupported||!$.isRangeSupported)&&(this._lastProgress&&((X=w.onProgress)==null||X.call(w,this._lastProgress)),$.onProgress=K=>{var Q;(Q=w.onProgress)==null||Q.call(w,{loaded:K.loaded,total:K.total})}),_.resolve({isStreamingSupported:$.isStreamingSupported,isRangeSupported:$.isRangeSupported,contentLength:$.contentLength})},_.reject),_.promise}),u.on("GetRangeReader",(O,_)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const $=this._networkStream.getRangeReader(O.begin,O.end);if(!$){_.close();return}_.onPull=()=>{$.read().then(function({value:X,done:K}){if(K){_.close();return}(0,_util.assert)(X instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),_.enqueue(new Uint8Array(X),1,[X])}).catch(X=>{_.error(X)})},_.onCancel=X=>{$.cancel(X),_.ready.catch(K=>{if(!this.destroyed)throw K})}}),u.on("GetDoc",({pdfInfo:O})=>{this._numPages=O.numPages,this._htmlForXfa=O.htmlForXfa,delete O.htmlForXfa,w._capability.resolve(new PDFDocumentProxy(O,this))}),u.on("DocException",function(O){let _;switch(O.name){case"PasswordException":_=new _util.PasswordException(O.message,O.code);break;case"InvalidPDFException":_=new _util.InvalidPDFException(O.message);break;case"MissingPDFException":_=new _util.MissingPDFException(O.message);break;case"UnexpectedResponseException":_=new _util.UnexpectedResponseException(O.message,O.status);break;case"UnknownErrorException":_=new _util.UnknownErrorException(O.message,O.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}w._capability.reject(_)}),u.on("PasswordRequest",O=>{if(this._passwordCapability=new _util.PromiseCapability,w.onPassword){const _=$=>{$ instanceof Error?this._passwordCapability.reject($):this._passwordCapability.resolve({password:$})};try{w.onPassword(_,O.code)}catch($){this._passwordCapability.reject($)}}else this._passwordCapability.reject(new _util.PasswordException(O.message,O.code));return this._passwordCapability.promise}),u.on("DataLoaded",O=>{var _;(_=w.onProgress)==null||_.call(w,{loaded:O.length,total:O.length}),this.downloadInfoCapability.resolve(O)}),u.on("StartRenderPage",O=>{if(this.destroyed)return;k(this,m).get(O.pageIndex)._startRenderPage(O.transparency,O.cacheKey)}),u.on("commonobj",([O,_,$])=>{var X;if(!this.destroyed&&!this.commonObjs.has(O))switch(_){case"Font":const K=this._params;if("error"in $){const ue=$.error;(0,_util.warn)(`Error during font loading: ${ue}`),this.commonObjs.resolve(O,ue);break}const Q=K.pdfBug&&((X=globalThis.FontInspector)!=null&&X.enabled)?(ue,ce)=>globalThis.FontInspector.fontAdded(ue,ce):null,te=new _font_loader.FontFaceObject($,{isEvalSupported:K.isEvalSupported,disableFontFace:K.disableFontFace,ignoreErrors:K.ignoreErrors,inspectFont:Q});this.fontLoader.bind(te).catch(ue=>u.sendWithPromise("FontFallback",{id:O})).finally(()=>{!K.fontExtraProperties&&te.data&&(te.data=null),this.commonObjs.resolve(O,te)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(O,$);break;default:throw new Error(`Got unknown common object type ${_}`)}}),u.on("obj",([O,_,$,X])=>{var Q;if(this.destroyed)return;const K=k(this,m).get(_);if(!K.objs.has(O))switch($){case"Image":if(K.objs.resolve(O,X),X){let te;if(X.bitmap){const{width:ue,height:ce}=X;te=ue*ce*4}else te=((Q=X.data)==null?void 0:Q.length)||0;te>_util.MAX_IMAGE_SIZE_TO_CACHE&&(K._maybeCleanupAfterRender=!0)}break;case"Pattern":K.objs.resolve(O,X);break;default:throw new Error(`Got unknown object type ${$}`)}}),u.on("DocProgress",O=>{var _;this.destroyed||(_=w.onProgress)==null||_.call(w,{loaded:O.loaded,total:O.total})}),u.on("FetchBuiltInCMap",O=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(O):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),u.on("FetchStandardFontData",O=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(O):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var u;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((u=this._fullReader)==null?void 0:u.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(u){if(!Number.isInteger(u)||u<=0||u>this._numPages)return Promise.reject(new Error("Invalid page request."));const w=u-1,O=k(this,g).get(w);if(O)return O;const _=this.messageHandler.sendWithPromise("GetPage",{pageIndex:w}).then($=>{if(this.destroyed)throw new Error("Transport destroyed");const X=new PDFPageProxy(w,$,this,this._params.pdfBug);return k(this,m).set(w,X),X});return k(this,g).set(w,_),_}getPageIndex(u){return typeof u!="object"||u===null||!Number.isInteger(u.num)||u.num<0||!Number.isInteger(u.gen)||u.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:u.num,gen:u.gen})}getAnnotations(u,w){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:u,intent:w})}getFieldObjects(){return ie(this,S,ft).call(this,"GetFieldObjects")}hasJSActions(){return ie(this,S,ft).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(u){return typeof u!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:u})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(u){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:u})}getStructTree(u){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:u})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(u=>new _optional_content_config.OptionalContentConfig(u))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const u="GetMetadata",w=k(this,x).get(u);if(w)return w;const O=this.messageHandler.sendWithPromise(u,null).then(_=>{var $,X;return{info:_[0],metadata:_[1]?new _metadata.Metadata(_[1]):null,contentDispositionFilename:(($=this._fullReader)==null?void 0:$.filename)??null,contentLength:((X=this._fullReader)==null?void 0:X.contentLength)??null}});return k(this,x).set(u,O),O}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(u=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const w of k(this,m).values())if(!w.cleanup())throw new Error(`startCleanup: Page ${w.pageNumber} is currently rendering.`);this.commonObjs.clear(),u||this.fontLoader.clear(),k(this,x).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:u,enableXfa:w}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:u,enableXfa:w})}}x=new WeakMap,m=new WeakMap,g=new WeakMap,S=new WeakSet,ft=function(u,w=null){const O=k(this,x).get(u);if(O)return O;const _=this.messageHandler.sendWithPromise(u,w);return k(this,x).set(u,_),_};class PDFObjects{constructor(){ee(this,P);ee(this,T,Object.create(null))}get(u,w=null){if(w){const _=ie(this,P,pt).call(this,u);return _.capability.promise.then(()=>w(_.data)),null}const O=k(this,T)[u];if(!(O!=null&&O.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${u}.`);return O.data}has(u){const w=k(this,T)[u];return(w==null?void 0:w.capability.settled)||!1}resolve(u,w=null){const O=ie(this,P,pt).call(this,u);O.data=w,O.capability.resolve()}clear(){var u;for(const w in k(this,T)){const{data:O}=k(this,T)[w];(u=O==null?void 0:O.bitmap)==null||u.close()}ge(this,T,Object.create(null))}}T=new WeakMap,P=new WeakSet,pt=function(u){const w=k(this,T)[u];return w||(k(this,T)[u]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(u){ee(this,y,null);ge(this,y,u),this.onContinue=null}get promise(){return k(this,y).capability.promise}cancel(u=0){k(this,y).cancel(null,u)}get separateAnnots(){const{separateAnnots:u}=k(this,y).operatorList;if(!u)return!1;const{annotationCanvasMap:w}=k(this,y);return u.form||u.canvas&&(w==null?void 0:w.size)>0}}y=new WeakMap,exports.RenderTask=RenderTask;const p=class p{constructor({callback:u,params:w,objs:O,commonObjs:_,annotationCanvasMap:$,operatorList:X,pageIndex:K,canvasFactory:Q,filterFactory:te,useRequestAnimationFrame:ue=!1,pdfBug:ce=!1,pageColors:de=null}){this.callback=u,this.params=w,this.objs=O,this.commonObjs=_,this.annotationCanvasMap=$,this.operatorListIdx=null,this.operatorList=X,this._pageIndex=K,this.canvasFactory=Q,this.filterFactory=te,this._pdfBug=ce,this.pageColors=de,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=ue===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=w.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:u=!1,optionalContentConfig:w}){var K,Q;if(this.cancelled)return;if(this._canvas){if(k(p,o).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");k(p,o).add(this._canvas)}this._pdfBug&&((K=globalThis.StepperManager)!=null&&K.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:O,viewport:_,transform:$,background:X}=this.params;this.gfx=new _canvas.CanvasGraphics(O,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:w},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:$,viewport:_,transparency:u,background:X}),this.operatorListIdx=0,this.graphicsReady=!0,(Q=this.graphicsReadyCallback)==null||Q.call(this)}cancel(u=null,w=0){var O;this.running=!1,this.cancelled=!0,(O=this.gfx)==null||O.endDrawing(),this._canvas&&k(p,o).delete(this._canvas),this.callback(u||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",w))}operatorListChanged(){var u;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(u=this.stepper)==null||u.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&k(p,o).delete(this._canvas),this.callback())))}};o=new WeakMap,ee(p,o,new WeakSet);let InternalRenderTask=p;const version="3.6.172";exports.version=version;const build="4d3dfe254";exports.build=build},(e,t,n)=>{var E,l,c,Dt,x;Object.defineProperty(t,"__esModule",{value:!0}),t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var i=n(1),r=n(4),s=n(8);class a{constructor(){ee(this,c);ee(this,E,!1);ee(this,l,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(g,S){const d=k(this,l).get(g);return d===void 0?S:Object.assign(S,d)}getRawValue(g){return k(this,l).get(g)}remove(g){if(k(this,l).delete(g),k(this,l).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const S of k(this,l).values())if(S instanceof r.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(g,S){const d=k(this,l).get(g);let T=!1;if(d!==void 0)for(const[P,F]of Object.entries(S))d[P]!==F&&(T=!0,d[P]=F);else T=!0,k(this,l).set(g,S);T&&ie(this,c,Dt).call(this),S instanceof r.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(S.constructor._type)}has(g){return k(this,l).has(g)}getAll(){return k(this,l).size>0?(0,i.objectFromMap)(k(this,l)):null}setAll(g){for(const[S,d]of Object.entries(g))this.setValue(S,d)}get size(){return k(this,l).size}resetModified(){k(this,E)&&(ge(this,E,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new b(this)}get serializable(){if(k(this,l).size===0)return null;const g=new Map;for(const[S,d]of k(this,l)){const T=d instanceof r.AnnotationEditor?d.serialize():d;T&&g.set(S,T)}return g}static getHash(g){if(!g)return"";const S=new s.MurmurHash3_64;for(const[d,T]of g)S.update(`${d}:${JSON.stringify(T)}`);return S.hexdigest()}}E=new WeakMap,l=new WeakMap,c=new WeakSet,Dt=function(){k(this,E)||(ge(this,E,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=a;class b extends a{constructor(S){super();ee(this,x,null);ge(this,x,structuredClone(S.serializable))}get print(){(0,i.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return k(this,x)}}x=new WeakMap,t.PrintAnnotationStorage=b},(e,t,n)=>{var a,b,E,l,c,I;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var i=n(5),r=n(1);const x=class x{constructor(g){ee(this,a,this.focusin.bind(this));ee(this,b,this.focusout.bind(this));ee(this,E,!1);ee(this,l,!1);ee(this,c,!1);De(this,"_uiManager",null);ee(this,I,x._zIndex++);this.constructor===x&&(0,r.unreachable)("Cannot initialize AnnotationEditor."),this.parent=g.parent,this.id=g.id,this.width=this.height=null,this.pageIndex=g.parent.pageIndex,this.name=g.name,this.div=null,this._uiManager=g.uiManager;const{rotation:S,rawDims:{pageWidth:d,pageHeight:T,pageX:P,pageY:F}}=this.parent.viewport;this.rotation=S,this.pageRotation=(360+S-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[d,T],this.pageTranslation=[P,F];const[y,o]=this.parentDimensions;this.x=g.x/y,this.y=g.y/o,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,r.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(g){this._uiManager.addCommands(g)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=k(this,I)}setParent(g){g!==null&&(this.pageIndex=g.pageIndex,this.pageDimensions=g.pageDimensions),this.parent=g}focusin(g){k(this,E)?ge(this,E,!1):this.parent.setSelected(this)}focusout(g){var d;if(!this.isAttachedToDOM)return;const S=g.relatedTarget;S!=null&&S.closest(`#${this.id}`)||(g.preventDefault(),(d=this.parent)!=null&&d.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(g){const S=this.parent.div.getBoundingClientRect();this.startX=g.clientX-S.x,this.startY=g.clientY-S.y,g.dataTransfer.setData("text/plain",this.id),g.dataTransfer.effectAllowed="move"}setAt(g,S,d,T){const[P,F]=this.parentDimensions;[d,T]=this.screenToPageTranslation(d,T),this.x=(g+d)/P,this.y=(S+T)/F,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(g,S){const[d,T]=this.parentDimensions;[g,S]=this.screenToPageTranslation(g,S),this.x+=g/d,this.y+=S/T,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(g,S){switch(this.parentRotation){case 90:return[S,-g];case 180:return[-g,-S];case 270:return[-S,g];default:return[g,S]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{realScale:g}=this._uiManager.viewParameters,[S,d]=this.pageDimensions;return[S*g,d*g]}setDims(g,S){const[d,T]=this.parentDimensions;this.div.style.width=`${100*g/d}%`,this.div.style.height=`${100*S/T}%`}fixDims(){const{style:g}=this.div,{height:S,width:d}=g,T=d.endsWith("%"),P=S.endsWith("%");if(T&&P)return;const[F,y]=this.parentDimensions;T||(g.width=`${100*parseFloat(d)/F}%`),P||(g.height=`${100*parseFloat(S)/y}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",k(this,a)),this.div.addEventListener("focusout",k(this,b));const[g,S]=this.getInitialTranslation();return this.translate(g,S),(0,i.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(g){const{isMac:S}=r.FeatureTest.platform;if(g.button!==0||g.ctrlKey&&S){g.preventDefault();return}g.ctrlKey&&!S||g.shiftKey||g.metaKey&&S?this.parent.toggleSelected(this):this.parent.setSelected(this),ge(this,E,!0)}getRect(g,S){const d=this.parentScale,[T,P]=this.pageDimensions,[F,y]=this.pageTranslation,o=g/d,p=S/d,f=this.x*T,u=this.y*P,w=this.width*T,O=this.height*P;switch(this.rotation){case 0:return[f+o+F,P-u-p-O+y,f+o+w+F,P-u-p+y];case 90:return[f+p+F,P-u+o+y,f+p+O+F,P-u+o+w+y];case 180:return[f-o-w+F,P-u+p+y,f-o+F,P-u+p+O+y];case 270:return[f-p-O+F,P-u-o-w+y,f-p+F,P-u-o+y];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(g,S){const[d,T,P,F]=g,y=P-d,o=F-T;switch(this.rotation){case 0:return[d,S-F,y,o];case 90:return[d,S-T,o,y];case 180:return[P,S-T,y,o];case 270:return[P,S-F,o,y];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ge(this,c,!0)}disableEditMode(){ge(this,c,!1)}isInEditMode(){return k(this,c)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var g;(g=this.div)==null||g.addEventListener("focusin",k(this,a))}serialize(){(0,r.unreachable)("An editor must be serializable")}static deserialize(g,S,d){const T=new this.prototype.constructor({parent:S,id:S.getNextId(),uiManager:d});T.rotation=g.rotation;const[P,F]=T.pageDimensions,[y,o,p,f]=T.getRectInCurrentCoords(g.rect,F);return T.x=y/P,T.y=o/F,T.width=p/P,T.height=f/F,T}remove(){this.div.removeEventListener("focusin",k(this,a)),this.div.removeEventListener("focusout",k(this,b)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var g;(g=this.div)==null||g.classList.add("selectedEditor")}unselect(){var g;(g=this.div)==null||g.classList.remove("selectedEditor")}updateParams(g,S){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return k(this,l)}set isEditing(g){ge(this,l,g),g?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};a=new WeakMap,b=new WeakMap,E=new WeakMap,l=new WeakMap,c=new WeakMap,I=new WeakMap,De(x,"_colorManager",new i.ColorManager),De(x,"_zIndex",1);let s=x;t.AnnotationEditor=s},(e,t,n)=>{var x,m,g,S,d,T,Lt,y,o,p,f,u,w,O,_,$,X,K,Q,te,ue,ce,de,me,Ee,Se,ve,G,C,R,L,Nt,W,gt,j,Bt,z,Ut,A,je,D,tt,Z,Ht,J,$t,oe,_t,ae,nt,pe,mt;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=s,t.opacityToHex=a;var i=n(1),r=n(6);function s(Te,V,be){for(const ye of be)V.addEventListener(ye,Te[ye].bind(Te))}function a(Te){return Math.round(Math.min(255,Math.max(1,255*Te))).toString(16).padStart(2,"0")}class b{constructor(){ee(this,x,0)}getId(){return`${i.AnnotationEditorPrefix}${st(this,x)._++}`}}x=new WeakMap;class E{constructor(V=128){ee(this,m,[]);ee(this,g,!1);ee(this,S,void 0);ee(this,d,-1);ge(this,S,V)}add({cmd:V,undo:be,mustExec:ye,type:Pe=NaN,overwriteIfSameType:he=!1,keepUndo:B=!1}){if(ye&&V(),k(this,g))return;const U={cmd:V,undo:be,type:Pe};if(k(this,d)===-1){k(this,m).length>0&&(k(this,m).length=0),ge(this,d,0),k(this,m).push(U);return}if(he&&k(this,m)[k(this,d)].type===Pe){B&&(U.undo=k(this,m)[k(this,d)].undo),k(this,m)[k(this,d)]=U;return}const le=k(this,d)+1;le===k(this,S)?k(this,m).splice(0,1):(ge(this,d,le),le<k(this,m).length&&k(this,m).splice(le)),k(this,m).push(U)}undo(){k(this,d)!==-1&&(ge(this,g,!0),k(this,m)[k(this,d)].undo(),ge(this,g,!1),ge(this,d,k(this,d)-1))}redo(){k(this,d)<k(this,m).length-1&&(ge(this,d,k(this,d)+1),ge(this,g,!0),k(this,m)[k(this,d)].cmd(),ge(this,g,!1))}hasSomethingToUndo(){return k(this,d)!==-1}hasSomethingToRedo(){return k(this,d)<k(this,m).length-1}destroy(){ge(this,m,null)}}m=new WeakMap,g=new WeakMap,S=new WeakMap,d=new WeakMap,t.CommandManager=E;class l{constructor(V){ee(this,T);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:be}=i.FeatureTest.platform;for(const[ye,Pe]of V)for(const he of ye){const B=he.startsWith("mac+");be&&B?(this.callbacks.set(he.slice(4),Pe),this.allKeys.add(he.split("+").at(-1))):!be&&!B&&(this.callbacks.set(he,Pe),this.allKeys.add(he.split("+").at(-1)))}}exec(V,be){if(!this.allKeys.has(be.key))return;const ye=this.callbacks.get(ie(this,T,Lt).call(this,be));ye&&(ye.bind(V)(),be.stopPropagation(),be.preventDefault())}}T=new WeakSet,Lt=function(V){V.altKey&&this.buffer.push("alt"),V.ctrlKey&&this.buffer.push("ctrl"),V.metaKey&&this.buffer.push("meta"),V.shiftKey&&this.buffer.push("shift"),this.buffer.push(V.key);const be=this.buffer.join("+");return this.buffer.length=0,be},t.KeyboardManager=l;const F=class F{get _colors(){const V=new Map([["CanvasText",null],["Canvas",null]]);return(0,r.getColorValues)(V),(0,i.shadow)(this,"_colors",V)}convert(V){const be=(0,r.getRGB)(V);if(!window.matchMedia("(forced-colors: active)").matches)return be;for(const[ye,Pe]of this._colors)if(Pe.every((he,B)=>he===be[B]))return F._colorsMapping.get(ye);return be}getHexCode(V){const be=this._colors.get(V);return be?i.Util.makeHexColor(...be):V}};De(F,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let c=F;t.ColorManager=c;const Ae=class Ae{constructor(V,be,ye){ee(this,L);ee(this,W);ee(this,j);ee(this,z);ee(this,A);ee(this,D);ee(this,Z);ee(this,J);ee(this,oe);ee(this,ae);ee(this,pe);ee(this,y,null);ee(this,o,new Map);ee(this,p,new Map);ee(this,f,null);ee(this,u,new E);ee(this,w,0);ee(this,O,null);ee(this,_,new Set);ee(this,$,null);ee(this,X,new b);ee(this,K,!1);ee(this,Q,i.AnnotationEditorType.NONE);ee(this,te,new Set);ee(this,ue,this.copy.bind(this));ee(this,ce,this.cut.bind(this));ee(this,de,this.paste.bind(this));ee(this,me,this.keydown.bind(this));ee(this,Ee,this.onEditingAction.bind(this));ee(this,Se,this.onPageChanging.bind(this));ee(this,ve,this.onScaleChanging.bind(this));ee(this,G,this.onRotationChanging.bind(this));ee(this,C,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});ee(this,R,null);ge(this,R,V),ge(this,$,be),k(this,$)._on("editingaction",k(this,Ee)),k(this,$)._on("pagechanging",k(this,Se)),k(this,$)._on("scalechanging",k(this,ve)),k(this,$)._on("rotationchanging",k(this,G)),ge(this,f,ye),this.viewParameters={realScale:r.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){ie(this,W,gt).call(this),k(this,$)._off("editingaction",k(this,Ee)),k(this,$)._off("pagechanging",k(this,Se)),k(this,$)._off("scalechanging",k(this,ve)),k(this,$)._off("rotationchanging",k(this,G));for(const V of k(this,p).values())V.destroy();k(this,p).clear(),k(this,o).clear(),k(this,_).clear(),ge(this,y,null),k(this,te).clear(),k(this,u).destroy()}onPageChanging({pageNumber:V}){ge(this,w,V-1)}focusMainContainer(){k(this,R).focus()}addShouldRescale(V){k(this,_).add(V)}removeShouldRescale(V){k(this,_).delete(V)}onScaleChanging({scale:V}){this.commitOrRemove(),this.viewParameters.realScale=V*r.PixelsPerInch.PDF_TO_CSS_UNITS;for(const be of k(this,_))be.onScaleChanging()}onRotationChanging({pagesRotation:V}){this.commitOrRemove(),this.viewParameters.rotation=V}addToAnnotationStorage(V){!V.isEmpty()&&k(this,f)&&!k(this,f).has(V.id)&&k(this,f).setValue(V.id,V)}copy(V){if(V.preventDefault(),k(this,y)&&k(this,y).commitOrRemove(),!this.hasSelection)return;const be=[];for(const ye of k(this,te))ye.isEmpty()||be.push(ye.serialize());be.length!==0&&V.clipboardData.setData("application/pdfjs",JSON.stringify(be))}cut(V){this.copy(V),this.delete()}paste(V){V.preventDefault();let be=V.clipboardData.getData("application/pdfjs");if(!be)return;try{be=JSON.parse(be)}catch(Pe){(0,i.warn)(`paste: "${Pe.message}".`);return}if(!Array.isArray(be))return;this.unselectAll();const ye=k(this,p).get(k(this,w));try{const Pe=[];for(const U of be){const le=ye.deserialize(U);if(!le)return;Pe.push(le)}const he=()=>{for(const U of Pe)ie(this,oe,_t).call(this,U);ie(this,pe,mt).call(this,Pe)},B=()=>{for(const U of Pe)U.remove()};this.addCommands({cmd:he,undo:B,mustExec:!0})}catch(Pe){(0,i.warn)(`paste: "${Pe.message}".`)}}keydown(V){var be;(be=this.getActive())!=null&&be.shouldGetKeyboardEvents()||Ae._keyboardManager.exec(this,V)}onEditingAction(V){["undo","redo","delete","selectAll"].includes(V.name)&&this[V.name]()}setEditingState(V){V?(ie(this,L,Nt).call(this),ie(this,j,Bt).call(this),ie(this,A,je).call(this,{isEditing:k(this,Q)!==i.AnnotationEditorType.NONE,isEmpty:ie(this,ae,nt).call(this),hasSomethingToUndo:k(this,u).hasSomethingToUndo(),hasSomethingToRedo:k(this,u).hasSomethingToRedo(),hasSelectedEditor:!1})):(ie(this,W,gt).call(this),ie(this,z,Ut).call(this),ie(this,A,je).call(this,{isEditing:!1}))}registerEditorTypes(V){if(!k(this,O)){ge(this,O,V);for(const be of k(this,O))ie(this,D,tt).call(this,be.defaultPropertiesToUpdate)}}getId(){return k(this,X).getId()}get currentLayer(){return k(this,p).get(k(this,w))}get currentPageIndex(){return k(this,w)}addLayer(V){k(this,p).set(V.pageIndex,V),k(this,K)?V.enable():V.disable()}removeLayer(V){k(this,p).delete(V.pageIndex)}updateMode(V){if(ge(this,Q,V),V===i.AnnotationEditorType.NONE)this.setEditingState(!1),ie(this,J,$t).call(this);else{this.setEditingState(!0),ie(this,Z,Ht).call(this);for(const be of k(this,p).values())be.updateMode(V)}}updateToolbar(V){V!==k(this,Q)&&k(this,$).dispatch("switchannotationeditormode",{source:this,mode:V})}updateParams(V,be){if(k(this,O)){for(const ye of k(this,te))ye.updateParams(V,be);for(const ye of k(this,O))ye.updateDefaultParams(V,be)}}getEditors(V){const be=[];for(const ye of k(this,o).values())ye.pageIndex===V&&be.push(ye);return be}getEditor(V){return k(this,o).get(V)}addEditor(V){k(this,o).set(V.id,V)}removeEditor(V){var be;k(this,o).delete(V.id),this.unselect(V),(be=k(this,f))==null||be.remove(V.id)}setActiveEditor(V){k(this,y)!==V&&(ge(this,y,V),V&&ie(this,D,tt).call(this,V.propertiesToUpdate))}toggleSelected(V){if(k(this,te).has(V)){k(this,te).delete(V),V.unselect(),ie(this,A,je).call(this,{hasSelectedEditor:this.hasSelection});return}k(this,te).add(V),V.select(),ie(this,D,tt).call(this,V.propertiesToUpdate),ie(this,A,je).call(this,{hasSelectedEditor:!0})}setSelected(V){for(const be of k(this,te))be!==V&&be.unselect();k(this,te).clear(),k(this,te).add(V),V.select(),ie(this,D,tt).call(this,V.propertiesToUpdate),ie(this,A,je).call(this,{hasSelectedEditor:!0})}isSelected(V){return k(this,te).has(V)}unselect(V){V.unselect(),k(this,te).delete(V),ie(this,A,je).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return k(this,te).size!==0}undo(){k(this,u).undo(),ie(this,A,je).call(this,{hasSomethingToUndo:k(this,u).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ie(this,ae,nt).call(this)})}redo(){k(this,u).redo(),ie(this,A,je).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:k(this,u).hasSomethingToRedo(),isEmpty:ie(this,ae,nt).call(this)})}addCommands(V){k(this,u).add(V),ie(this,A,je).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ie(this,ae,nt).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const V=[...k(this,te)],be=()=>{for(const Pe of V)Pe.remove()},ye=()=>{for(const Pe of V)ie(this,oe,_t).call(this,Pe)};this.addCommands({cmd:be,undo:ye,mustExec:!0})}commitOrRemove(){var V;(V=k(this,y))==null||V.commitOrRemove()}selectAll(){for(const V of k(this,te))V.commit();ie(this,pe,mt).call(this,k(this,o).values())}unselectAll(){if(k(this,y)){k(this,y).commitOrRemove();return}if(k(this,te).size!==0){for(const V of k(this,te))V.unselect();k(this,te).clear(),ie(this,A,je).call(this,{hasSelectedEditor:!1})}}isActive(V){return k(this,y)===V}getActive(){return k(this,y)}getMode(){return k(this,Q)}};y=new WeakMap,o=new WeakMap,p=new WeakMap,f=new WeakMap,u=new WeakMap,w=new WeakMap,O=new WeakMap,_=new WeakMap,$=new WeakMap,X=new WeakMap,K=new WeakMap,Q=new WeakMap,te=new WeakMap,ue=new WeakMap,ce=new WeakMap,de=new WeakMap,me=new WeakMap,Ee=new WeakMap,Se=new WeakMap,ve=new WeakMap,G=new WeakMap,C=new WeakMap,R=new WeakMap,L=new WeakSet,Nt=function(){k(this,R).addEventListener("keydown",k(this,me))},W=new WeakSet,gt=function(){k(this,R).removeEventListener("keydown",k(this,me))},j=new WeakSet,Bt=function(){document.addEventListener("copy",k(this,ue)),document.addEventListener("cut",k(this,ce)),document.addEventListener("paste",k(this,de))},z=new WeakSet,Ut=function(){document.removeEventListener("copy",k(this,ue)),document.removeEventListener("cut",k(this,ce)),document.removeEventListener("paste",k(this,de))},A=new WeakSet,je=function(V){Object.entries(V).some(([ye,Pe])=>k(this,C)[ye]!==Pe)&&k(this,$).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(k(this,C),V)})},D=new WeakSet,tt=function(V){k(this,$).dispatch("annotationeditorparamschanged",{source:this,details:V})},Z=new WeakSet,Ht=function(){if(!k(this,K)){ge(this,K,!0);for(const V of k(this,p).values())V.enable()}},J=new WeakSet,$t=function(){if(this.unselectAll(),k(this,K)){ge(this,K,!1);for(const V of k(this,p).values())V.disable()}},oe=new WeakSet,_t=function(V){const be=k(this,p).get(V.pageIndex);be?be.addOrRebuild(V):this.addEditor(V)},ae=new WeakSet,nt=function(){if(k(this,o).size===0)return!0;if(k(this,o).size===1)for(const V of k(this,o).values())return V.isEmpty();return!1},pe=new WeakSet,mt=function(V){k(this,te).clear();for(const be of V)be.isEmpty()||(k(this,te).add(be),be.select());ie(this,A,je).call(this,{hasSelectedEditor:!0})},De(Ae,"_keyboardManager",new l([[["ctrl+a","mac+meta+a"],Ae.prototype.selectAll],[["ctrl+z","mac+meta+z"],Ae.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],Ae.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],Ae.prototype.delete],[["Escape","mac+Escape"],Ae.prototype.unselectAll]]));let I=Ae;t.AnnotationEditorUIManager=I},(e,t,n)=>{var ue,ce,de,me,Ee,Se,ve,G,C,Je,L,Ye,W,Ze;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=t.AnnotationPrefix=void 0,t.deprecated=f,t.getColorValues=$,t.getCurrentTransform=X,t.getCurrentTransformInverse=K,t.getFilenameFromUrl=P,t.getPdfFilenameFromUrl=F,t.getRGB=_,t.getXfaPageViewport=O,t.isDataScheme=d,t.isPdfFile=T,t.isValidFetchUrl=o,t.loadScript=p,t.setLayerDimensions=Q;var i=n(7),r=n(1);const s="http://www.w3.org/2000/svg",a="pdfjs_internal_id_";t.AnnotationPrefix=a;const te=class te{};De(te,"CSS",96),De(te,"PDF",72),De(te,"PDF_TO_CSS_UNITS",te.CSS/te.PDF);let b=te;t.PixelsPerInch=b;class E extends i.BaseFilterFactory{constructor({docId:z,ownerDocument:h=globalThis.document}={}){super();ee(this,C);ee(this,L);ee(this,W);ee(this,ue,void 0);ee(this,ce,void 0);ee(this,de,void 0);ee(this,me,void 0);ee(this,Ee,void 0);ee(this,Se,void 0);ee(this,ve,void 0);ee(this,G,0);ge(this,de,z),ge(this,me,h)}addFilter(z){if(!z)return"none";let h=k(this,C,Je).get(z);if(h)return h;let A,M,D,N;if(z.length===1){const oe=z[0],ne=new Array(256);for(let ae=0;ae<256;ae++)ne[ae]=oe[ae]/255;N=A=M=D=ne.join(",")}else{const[oe,ne,ae]=z,fe=new Array(256),pe=new Array(256),we=new Array(256);for(let Ae=0;Ae<256;Ae++)fe[Ae]=oe[Ae]/255,pe[Ae]=ne[Ae]/255,we[Ae]=ae[Ae]/255;A=fe.join(","),M=pe.join(","),D=we.join(","),N=`${A}${M}${D}`}if(h=k(this,C,Je).get(N),h)return k(this,C,Je).set(z,h),h;const Z=`g_${k(this,de)}_transfer_map_${st(this,G)._++}`,re=`url(#${Z})`;k(this,C,Je).set(z,re),k(this,C,Je).set(N,re);const J=k(this,me).createElementNS(s,"filter",s);J.setAttribute("id",Z),J.setAttribute("color-interpolation-filters","sRGB");const se=k(this,me).createElementNS(s,"feComponentTransfer");return J.append(se),ie(this,W,Ze).call(this,se,"feFuncR",A),ie(this,W,Ze).call(this,se,"feFuncG",M),ie(this,W,Ze).call(this,se,"feFuncB",D),k(this,L,Ye).append(J),re}addHCMFilter(z,h){var ae;const A=`${z}-${h}`;if(k(this,Se)===A)return k(this,ve);if(ge(this,Se,A),ge(this,ve,"none"),(ae=k(this,Ee))==null||ae.remove(),!z||!h)return k(this,ve);k(this,L,Ye).style.color=z,z=getComputedStyle(k(this,L,Ye)).getPropertyValue("color");const M=_(z);z=r.Util.makeHexColor(...M),k(this,L,Ye).style.color=h,h=getComputedStyle(k(this,L,Ye)).getPropertyValue("color");const D=_(h);if(h=r.Util.makeHexColor(...D),k(this,L,Ye).style.color="",z==="#000000"&&h==="#ffffff"||z===h)return k(this,ve);const N=new Array(256);for(let fe=0;fe<=255;fe++){const pe=fe/255;N[fe]=pe<=.03928?pe/12.92:((pe+.055)/1.055)**2.4}const Z=N.join(","),re=`g_${k(this,de)}_hcm_filter`,J=ge(this,Ee,k(this,me).createElementNS(s,"filter",s));J.setAttribute("id",re),J.setAttribute("color-interpolation-filters","sRGB");let se=k(this,me).createElementNS(s,"feComponentTransfer");J.append(se),ie(this,W,Ze).call(this,se,"feFuncR",Z),ie(this,W,Ze).call(this,se,"feFuncG",Z),ie(this,W,Ze).call(this,se,"feFuncB",Z);const oe=k(this,me).createElementNS(s,"feColorMatrix");oe.setAttribute("type","matrix"),oe.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),J.append(oe),se=k(this,me).createElementNS(s,"feComponentTransfer"),J.append(se);const ne=(fe,pe)=>{const we=M[fe]/255,Ae=D[fe]/255,Te=new Array(pe+1);for(let V=0;V<=pe;V++)Te[V]=we+V/pe*(Ae-we);return Te.join(",")};return ie(this,W,Ze).call(this,se,"feFuncR",ne(0,5)),ie(this,W,Ze).call(this,se,"feFuncG",ne(1,5)),ie(this,W,Ze).call(this,se,"feFuncB",ne(2,5)),k(this,L,Ye).append(J),ge(this,ve,`url(#${re})`),k(this,ve)}destroy(z=!1){z&&k(this,ve)||(k(this,ce)&&(k(this,ce).parentNode.parentNode.remove(),ge(this,ce,null)),k(this,ue)&&(k(this,ue).clear(),ge(this,ue,null)),ge(this,G,0))}}ue=new WeakMap,ce=new WeakMap,de=new WeakMap,me=new WeakMap,Ee=new WeakMap,Se=new WeakMap,ve=new WeakMap,G=new WeakMap,C=new WeakSet,Je=function(){return k(this,ue)||ge(this,ue,new Map)},L=new WeakSet,Ye=function(){if(!k(this,ce)){const z=k(this,me).createElement("div"),{style:h}=z;h.visibility="hidden",h.contain="strict",h.width=h.height=0,h.position="absolute",h.top=h.left=0,h.zIndex=-1;const A=k(this,me).createElementNS(s,"svg");A.setAttribute("width",0),A.setAttribute("height",0),ge(this,ce,k(this,me).createElementNS(s,"defs")),z.append(A),A.append(k(this,ce)),k(this,me).body.append(z)}return k(this,ce)},W=new WeakSet,Ze=function(z,h,A){const M=k(this,me).createElementNS(s,h);M.setAttribute("type","discrete"),M.setAttribute("tableValues",A),z.append(M)},t.DOMFilterFactory=E;class l extends i.BaseCanvasFactory{constructor({ownerDocument:H=globalThis.document}={}){super(),this._document=H}_createCanvas(H,z){const h=this._document.createElement("canvas");return h.width=H,h.height=z,h}}t.DOMCanvasFactory=l;async function c(j,H=!1){if(o(j,document.baseURI)){const z=await fetch(j);if(!z.ok)throw new Error(z.statusText);return H?new Uint8Array(await z.arrayBuffer()):(0,r.stringToBytes)(await z.text())}return new Promise((z,h)=>{const A=new XMLHttpRequest;A.open("GET",j,!0),H&&(A.responseType="arraybuffer"),A.onreadystatechange=()=>{if(A.readyState===XMLHttpRequest.DONE){if(A.status===200||A.status===0){let M;if(H&&A.response?M=new Uint8Array(A.response):!H&&A.responseText&&(M=(0,r.stringToBytes)(A.responseText)),M){z(M);return}}h(new Error(A.statusText))}},A.send(null)})}class I extends i.BaseCMapReaderFactory{_fetchData(H,z){return c(H,this.isCompressed).then(h=>({cMapData:h,compressionType:z}))}}t.DOMCMapReaderFactory=I;class x extends i.BaseStandardFontDataFactory{_fetchData(H){return c(H,!0)}}t.DOMStandardFontDataFactory=x;class m extends i.BaseSVGFactory{_createSVG(H){return document.createElementNS(s,H)}}t.DOMSVGFactory=m;class g{constructor({viewBox:H,scale:z,rotation:h,offsetX:A=0,offsetY:M=0,dontFlip:D=!1}){this.viewBox=H,this.scale=z,this.rotation=h,this.offsetX=A,this.offsetY=M;const N=(H[2]+H[0])/2,Z=(H[3]+H[1])/2;let re,J,se,oe;switch(h%=360,h<0&&(h+=360),h){case 180:re=-1,J=0,se=0,oe=1;break;case 90:re=0,J=1,se=1,oe=0;break;case 270:re=0,J=-1,se=-1,oe=0;break;case 0:re=1,J=0,se=0,oe=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}D&&(se=-se,oe=-oe);let ne,ae,fe,pe;re===0?(ne=Math.abs(Z-H[1])*z+A,ae=Math.abs(N-H[0])*z+M,fe=(H[3]-H[1])*z,pe=(H[2]-H[0])*z):(ne=Math.abs(N-H[0])*z+A,ae=Math.abs(Z-H[1])*z+M,fe=(H[2]-H[0])*z,pe=(H[3]-H[1])*z),this.transform=[re*z,J*z,se*z,oe*z,ne-re*z*N-se*z*Z,ae-J*z*N-oe*z*Z],this.width=fe,this.height=pe}get rawDims(){const{viewBox:H}=this;return(0,r.shadow)(this,"rawDims",{pageWidth:H[2]-H[0],pageHeight:H[3]-H[1],pageX:H[0],pageY:H[1]})}clone({scale:H=this.scale,rotation:z=this.rotation,offsetX:h=this.offsetX,offsetY:A=this.offsetY,dontFlip:M=!1}={}){return new g({viewBox:this.viewBox.slice(),scale:H,rotation:z,offsetX:h,offsetY:A,dontFlip:M})}convertToViewportPoint(H,z){return r.Util.applyTransform([H,z],this.transform)}convertToViewportRectangle(H){const z=r.Util.applyTransform([H[0],H[1]],this.transform),h=r.Util.applyTransform([H[2],H[3]],this.transform);return[z[0],z[1],h[0],h[1]]}convertToPdfPoint(H,z){return r.Util.applyInverseTransform([H,z],this.transform)}}t.PageViewport=g;class S extends r.BaseException{constructor(H,z,h=0){super(H,"RenderingCancelledException"),this.type=z,this.extraDelay=h}}t.RenderingCancelledException=S;function d(j){const H=j.length;let z=0;for(;z<H&&j[z].trim()==="";)z++;return j.substring(z,z+5).toLowerCase()==="data:"}function T(j){return typeof j=="string"&&/\.pdf$/i.test(j)}function P(j,H=!1){return H||([j]=j.split(/[#?]/,1)),j.substring(j.lastIndexOf("/")+1)}function F(j,H="document.pdf"){if(typeof j!="string")return H;if(d(j))return(0,r.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),H;const z=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,A=z.exec(j);let M=h.exec(A[1])||h.exec(A[2])||h.exec(A[3]);if(M&&(M=M[0],M.includes("%")))try{M=h.exec(decodeURIComponent(M))[0]}catch{}return M||H}class y{constructor(){De(this,"started",Object.create(null));De(this,"times",[])}time(H){H in this.started&&(0,r.warn)(`Timer is already running for ${H}`),this.started[H]=Date.now()}timeEnd(H){H in this.started||(0,r.warn)(`Timer has not been started for ${H}`),this.times.push({name:H,start:this.started[H],end:Date.now()}),delete this.started[H]}toString(){const H=[];let z=0;for(const{name:h}of this.times)z=Math.max(h.length,z);for(const{name:h,start:A,end:M}of this.times)H.push(`${h.padEnd(z)} ${M-A}ms
`);return H.join("")}}t.StatTimer=y;function o(j,H){try{const{protocol:z}=H?new URL(j,H):new URL(j);return z==="http:"||z==="https:"}catch{return!1}}function p(j,H=!1){return new Promise((z,h)=>{const A=document.createElement("script");A.src=j,A.onload=function(M){H&&A.remove(),z(M)},A.onerror=function(){h(new Error(`Cannot load script at: ${A.src}`))},(document.head||document.documentElement).append(A)})}function f(j){console.log("Deprecated API usage: "+j)}let u;class w{static toDateObject(H){if(!H||typeof H!="string")return null;u||(u=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const z=u.exec(H);if(!z)return null;const h=parseInt(z[1],10);let A=parseInt(z[2],10);A=A>=1&&A<=12?A-1:0;let M=parseInt(z[3],10);M=M>=1&&M<=31?M:1;let D=parseInt(z[4],10);D=D>=0&&D<=23?D:0;let N=parseInt(z[5],10);N=N>=0&&N<=59?N:0;let Z=parseInt(z[6],10);Z=Z>=0&&Z<=59?Z:0;const re=z[7]||"Z";let J=parseInt(z[8],10);J=J>=0&&J<=23?J:0;let se=parseInt(z[9],10)||0;return se=se>=0&&se<=59?se:0,re==="-"?(D+=J,N+=se):re==="+"&&(D-=J,N-=se),new Date(Date.UTC(h,A,M,D,N,Z))}}t.PDFDateString=w;function O(j,{scale:H=1,rotation:z=0}){const{width:h,height:A}=j.attributes.style,M=[0,0,parseInt(h),parseInt(A)];return new g({viewBox:M,scale:H,rotation:z})}function _(j){if(j.startsWith("#")){const H=parseInt(j.slice(1),16);return[(H&16711680)>>16,(H&65280)>>8,H&255]}return j.startsWith("rgb(")?j.slice(4,-1).split(",").map(H=>parseInt(H)):j.startsWith("rgba(")?j.slice(5,-1).split(",").map(H=>parseInt(H)).slice(0,3):((0,r.warn)(`Not a valid color format: "${j}"`),[0,0,0])}function $(j){const H=document.createElement("span");H.style.visibility="hidden",document.body.append(H);for(const z of j.keys()){H.style.color=z;const h=window.getComputedStyle(H).color;j.set(z,_(h))}H.remove()}function X(j){const{a:H,b:z,c:h,d:A,e:M,f:D}=j.getTransform();return[H,z,h,A,M,D]}function K(j){const{a:H,b:z,c:h,d:A,e:M,f:D}=j.getTransform().invertSelf();return[H,z,h,A,M,D]}function Q(j,H,z=!1,h=!0){if(H instanceof g){const{pageWidth:A,pageHeight:M}=H.rawDims,{style:D}=j,N=`calc(var(--scale-factor) * ${A}px)`,Z=`calc(var(--scale-factor) * ${M}px)`;!z||H.rotation%180===0?(D.width=N,D.height=Z):(D.width=Z,D.height=N)}h&&j.setAttribute("data-main-rotation",H.rotation)}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var i=n(1);class r{constructor(){this.constructor===r&&(0,i.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(c){return"none"}addHCMFilter(c,I){return"none"}destroy(c=!1){}}t.BaseFilterFactory=r;class s{constructor(){this.constructor===s&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(c,I){if(c<=0||I<=0)throw new Error("Invalid canvas size");const x=this._createCanvas(c,I);return{canvas:x,context:x.getContext("2d")}}reset(c,I,x){if(!c.canvas)throw new Error("Canvas is not specified");if(I<=0||x<=0)throw new Error("Invalid canvas size");c.canvas.width=I,c.canvas.height=x}destroy(c){if(!c.canvas)throw new Error("Canvas is not specified");c.canvas.width=0,c.canvas.height=0,c.canvas=null,c.context=null}_createCanvas(c,I){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=s;class a{constructor({baseUrl:c=null,isCompressed:I=!0}){this.constructor===a&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=c,this.isCompressed=I}async fetch({name:c}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!c)throw new Error("CMap name must be specified.");const I=this.baseUrl+c+(this.isCompressed?".bcmap":""),x=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE;return this._fetchData(I,x).catch(m=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${I}`)})}_fetchData(c,I){(0,i.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=a;class b{constructor({baseUrl:c=null}){this.constructor===b&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=c}async fetch({filename:c}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!c)throw new Error("Font filename must be specified.");const I=`${this.baseUrl}${c}`;return this._fetchData(I).catch(x=>{throw new Error(`Unable to load font data at: ${I}`)})}_fetchData(c){(0,i.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=b;class E{constructor(){this.constructor===E&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(c,I,x=!1){if(c<=0||I<=0)throw new Error("Invalid SVG dimensions");const m=this._createSVG("svg:svg");return m.setAttribute("version","1.1"),x||(m.setAttribute("width",`${c}px`),m.setAttribute("height",`${I}px`)),m.setAttribute("preserveAspectRatio","none"),m.setAttribute("viewBox",`0 0 ${c} ${I}`),m}createElement(c){if(typeof c!="string")throw new Error("Invalid SVG element type");return this._createSVG(c)}_createSVG(c){(0,i.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=E},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var i=n(1);const r=3285377520,s=4294901760,a=65535;class b{constructor(l){this.h1=l?l&4294967295:r,this.h2=l?l&4294967295:r}update(l){let c,I;if(typeof l=="string"){c=new Uint8Array(l.length*2),I=0;for(let f=0,u=l.length;f<u;f++){const w=l.charCodeAt(f);w<=255?c[I++]=w:(c[I++]=w>>>8,c[I++]=w&255)}}else if((0,i.isArrayBuffer)(l))c=l.slice(),I=c.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const x=I>>2,m=I-x*4,g=new Uint32Array(c.buffer,0,x);let S=0,d=0,T=this.h1,P=this.h2;const F=3432918353,y=461845907,o=F&a,p=y&a;for(let f=0;f<x;f++)f&1?(S=g[f],S=S*F&s|S*o&a,S=S<<15|S>>>17,S=S*y&s|S*p&a,T^=S,T=T<<13|T>>>19,T=T*5+3864292196):(d=g[f],d=d*F&s|d*o&a,d=d<<15|d>>>17,d=d*y&s|d*p&a,P^=d,P=P<<13|P>>>19,P=P*5+3864292196);switch(S=0,m){case 3:S^=c[x*4+2]<<16;case 2:S^=c[x*4+1]<<8;case 1:S^=c[x*4],S=S*F&s|S*o&a,S=S<<15|S>>>17,S=S*y&s|S*p&a,x&1?T^=S:P^=S}this.h1=T,this.h2=P}hexdigest(){let l=this.h1,c=this.h2;return l^=c>>>1,l=l*3981806797&s|l*36045&a,c=c*4283543511&s|((c<<16|l>>>16)*2950163797&s)>>>16,l^=c>>>1,l=l*444984403&s|l*60499&a,c=c*3301882366&s|((c<<16|l>>>16)*3120437893&s)>>>16,l^=c>>>1,(l>>>0).toString(16).padStart(8,"0")+(c>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=b},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var i=n(1),r=n(10);class s{constructor({ownerDocument:E=globalThis.document,styleElement:l=null}){this._document=E,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(E){this.nativeFontFaces.push(E),this._document.fonts.add(E)}insertRule(E){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const l=this.styleElement.sheet;l.insertRule(E,l.cssRules.length)}clear(){for(const E of this.nativeFontFaces)this._document.fonts.delete(E);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(E){if(E.attached||E.missingFile)return;if(E.attached=!0,this.isFontLoadingAPISupported){const c=E.createNativeFontFace();if(c){this.addNativeFontFace(c);try{await c.loaded}catch(I){throw(0,i.warn)(`Failed to load font '${c.family}': '${I}'.`),E.disableFontFace=!0,I}}return}const l=E.createFontFaceRule();if(l){if(this.insertRule(l),this.isSyncFontLoadingSupported)return;await new Promise(c=>{const I=this._queueLoadingCallback(c);this._prepareFontLoadEvent(E,I)})}}get isFontLoadingAPISupported(){var l;const E=!!((l=this._document)!=null&&l.fonts);return(0,i.shadow)(this,"isFontLoadingAPISupported",E)}get isSyncFontLoadingSupported(){let E=!1;return(r.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(E=!0),(0,i.shadow)(this,"isSyncFontLoadingSupported",E)}_queueLoadingCallback(E){function l(){for((0,i.assert)(!I.done,"completeRequest() cannot be called twice."),I.done=!0;c.length>0&&c[0].done;){const x=c.shift();setTimeout(x.callback,0)}}const{loadingRequests:c}=this,I={done:!1,complete:l,callback:E};return c.push(I),I}get _loadTestFont(){const E=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,i.shadow)(this,"_loadTestFont",E)}_prepareFontLoadEvent(E,l){function c(_,$){return _.charCodeAt($)<<24|_.charCodeAt($+1)<<16|_.charCodeAt($+2)<<8|_.charCodeAt($+3)&255}function I(_,$,X,K){const Q=_.substring(0,$),te=_.substring($+X);return Q+K+te}let x,m;const g=this._document.createElement("canvas");g.width=1,g.height=1;const S=g.getContext("2d");let d=0;function T(_,$){if(++d>30){(0,i.warn)("Load test font never loaded."),$();return}if(S.font="30px "+_,S.fillText(".",0,20),S.getImageData(0,0,1,1).data[3]>0){$();return}setTimeout(T.bind(null,_,$))}const P=`lt${Date.now()}${this.loadTestFontId++}`;let F=this._loadTestFont;F=I(F,976,P.length,P);const o=16,p=1482184792;let f=c(F,o);for(x=0,m=P.length-3;x<m;x+=4)f=f-p+c(P,x)|0;x<P.length&&(f=f-p+c(P+"XXX",x)|0),F=I(F,o,4,(0,i.string32)(f));const u=`url(data:font/opentype;base64,${btoa(F)});`,w=`@font-face {font-family:"${P}";src:${u}}`;this.insertRule(w);const O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(const _ of[E.loadedName,P]){const $=this._document.createElement("span");$.textContent="Hi",$.style.fontFamily=_,O.append($)}this._document.body.append(O),T(P,()=>{O.remove(),l.complete()})}}t.FontLoader=s;class a{constructor(E,{isEvalSupported:l=!0,disableFontFace:c=!1,ignoreErrors:I=!1,inspectFont:x=null}){this.compiledGlyphs=Object.create(null);for(const m in E)this[m]=E[m];this.isEvalSupported=l!==!1,this.disableFontFace=c===!0,this.ignoreErrors=I===!0,this._inspectFont=x}createNativeFontFace(){var l;if(!this.data||this.disableFontFace)return null;let E;if(!this.cssFontInfo)E=new FontFace(this.loadedName,this.data,{});else{const c={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(c.style=`oblique ${this.cssFontInfo.italicAngle}deg`),E=new FontFace(this.cssFontInfo.fontFamily,this.data,c)}return(l=this._inspectFont)==null||l.call(this,this),E}createFontFaceRule(){var I;if(!this.data||this.disableFontFace)return null;const E=(0,i.bytesToString)(this.data),l=`url(data:${this.mimetype};base64,${btoa(E)});`;let c;if(!this.cssFontInfo)c=`@font-face {font-family:"${this.loadedName}";src:${l}}`;else{let x=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(x+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),c=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${x}src:${l}}`}return(I=this._inspectFont)==null||I.call(this,this,l),c}getPathGenerator(E,l){if(this.compiledGlyphs[l]!==void 0)return this.compiledGlyphs[l];let c;try{c=E.get(this.loadedName+"_path_"+l)}catch(I){if(!this.ignoreErrors)throw I;return(0,i.warn)(`getPathGenerator - ignoring character: "${I}".`),this.compiledGlyphs[l]=function(x,m){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){const I=[];for(const x of c){const m=x.args!==void 0?x.args.join(","):"";I.push("c.",x.cmd,"(",m,`);
`)}return this.compiledGlyphs[l]=new Function("c","size",I.join(""))}return this.compiledGlyphs[l]=function(I,x){for(const m of c)m.cmd==="scale"&&(m.args=[x,-x]),I[m.cmd].apply(I,m.args)}}}t.FontFaceObject=a},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;const n=typeof browser$1=="object"&&browser$1+""=="[object process]"&&!browser$1.versions.nw&&!(browser$1.versions.electron&&browser$1.type&&browser$1.type!=="browser");t.isNodeJS=n},(e,t,n)=>{var de,bt,Ee,vt;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var i=n(1),r=n(6),s=n(12),a=n(13),b=n(10);const E=16,l=100,c=4096,I=15,x=10,m=1e3,g=16;function S(G,C){if(G._removeMirroring)throw new Error("Context is already forwarding operations.");G.__originalSave=G.save,G.__originalRestore=G.restore,G.__originalRotate=G.rotate,G.__originalScale=G.scale,G.__originalTranslate=G.translate,G.__originalTransform=G.transform,G.__originalSetTransform=G.setTransform,G.__originalResetTransform=G.resetTransform,G.__originalClip=G.clip,G.__originalMoveTo=G.moveTo,G.__originalLineTo=G.lineTo,G.__originalBezierCurveTo=G.bezierCurveTo,G.__originalRect=G.rect,G.__originalClosePath=G.closePath,G.__originalBeginPath=G.beginPath,G._removeMirroring=()=>{G.save=G.__originalSave,G.restore=G.__originalRestore,G.rotate=G.__originalRotate,G.scale=G.__originalScale,G.translate=G.__originalTranslate,G.transform=G.__originalTransform,G.setTransform=G.__originalSetTransform,G.resetTransform=G.__originalResetTransform,G.clip=G.__originalClip,G.moveTo=G.__originalMoveTo,G.lineTo=G.__originalLineTo,G.bezierCurveTo=G.__originalBezierCurveTo,G.rect=G.__originalRect,G.closePath=G.__originalClosePath,G.beginPath=G.__originalBeginPath,delete G._removeMirroring},G.save=function(){C.save(),this.__originalSave()},G.restore=function(){C.restore(),this.__originalRestore()},G.translate=function(L,q){C.translate(L,q),this.__originalTranslate(L,q)},G.scale=function(L,q){C.scale(L,q),this.__originalScale(L,q)},G.transform=function(L,q,W,Y,j,H){C.transform(L,q,W,Y,j,H),this.__originalTransform(L,q,W,Y,j,H)},G.setTransform=function(L,q,W,Y,j,H){C.setTransform(L,q,W,Y,j,H),this.__originalSetTransform(L,q,W,Y,j,H)},G.resetTransform=function(){C.resetTransform(),this.__originalResetTransform()},G.rotate=function(L){C.rotate(L),this.__originalRotate(L)},G.clip=function(L){C.clip(L),this.__originalClip(L)},G.moveTo=function(R,L){C.moveTo(R,L),this.__originalMoveTo(R,L)},G.lineTo=function(R,L){C.lineTo(R,L),this.__originalLineTo(R,L)},G.bezierCurveTo=function(R,L,q,W,Y,j){C.bezierCurveTo(R,L,q,W,Y,j),this.__originalBezierCurveTo(R,L,q,W,Y,j)},G.rect=function(R,L,q,W){C.rect(R,L,q,W),this.__originalRect(R,L,q,W)},G.closePath=function(){C.closePath(),this.__originalClosePath()},G.beginPath=function(){C.beginPath(),this.__originalBeginPath()}}class d{constructor(C){this.canvasFactory=C,this.cache=Object.create(null)}getCanvas(C,R,L){let q;return this.cache[C]!==void 0?(q=this.cache[C],this.canvasFactory.reset(q,R,L)):(q=this.canvasFactory.create(R,L),this.cache[C]=q),q}delete(C){delete this.cache[C]}clear(){for(const C in this.cache){const R=this.cache[C];this.canvasFactory.destroy(R),delete this.cache[C]}}}function T(G,C,R,L,q,W,Y,j,H,z){const[h,A,M,D,N,Z]=(0,r.getCurrentTransform)(G);if(A===0&&M===0){const se=Y*h+N,oe=Math.round(se),ne=j*D+Z,ae=Math.round(ne),fe=(Y+H)*h+N,pe=Math.abs(Math.round(fe)-oe)||1,we=(j+z)*D+Z,Ae=Math.abs(Math.round(we)-ae)||1;return G.setTransform(Math.sign(h),0,0,Math.sign(D),oe,ae),G.drawImage(C,R,L,q,W,0,0,pe,Ae),G.setTransform(h,A,M,D,N,Z),[pe,Ae]}if(h===0&&D===0){const se=j*M+N,oe=Math.round(se),ne=Y*A+Z,ae=Math.round(ne),fe=(j+z)*M+N,pe=Math.abs(Math.round(fe)-oe)||1,we=(Y+H)*A+Z,Ae=Math.abs(Math.round(we)-ae)||1;return G.setTransform(0,Math.sign(A),Math.sign(M),0,oe,ae),G.drawImage(C,R,L,q,W,0,0,Ae,pe),G.setTransform(h,A,M,D,N,Z),[Ae,pe]}G.drawImage(C,R,L,q,W,Y,j,H,z);const re=Math.hypot(h,A),J=Math.hypot(M,D);return[re*H,J*z]}function P(G){const{width:C,height:R}=G;if(C>m||R>m)return null;const L=1e3,q=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),W=C+1;let Y=new Uint8Array(W*(R+1)),j,H,z;const h=C+7&-8;let A=new Uint8Array(h*R),M=0;for(const J of G.data){let se=128;for(;se>0;)A[M++]=J&se?0:255,se>>=1}let D=0;for(M=0,A[M]!==0&&(Y[0]=1,++D),H=1;H<C;H++)A[M]!==A[M+1]&&(Y[H]=A[M]?2:1,++D),M++;for(A[M]!==0&&(Y[H]=2,++D),j=1;j<R;j++){M=j*h,z=j*W,A[M-h]!==A[M]&&(Y[z]=A[M]?1:8,++D);let J=(A[M]?4:0)+(A[M-h]?8:0);for(H=1;H<C;H++)J=(J>>2)+(A[M+1]?4:0)+(A[M-h+1]?8:0),q[J]&&(Y[z+H]=q[J],++D),M++;if(A[M-h]!==A[M]&&(Y[z+H]=A[M]?2:4,++D),D>L)return null}for(M=h*(R-1),z=j*W,A[M]!==0&&(Y[z]=8,++D),H=1;H<C;H++)A[M]!==A[M+1]&&(Y[z+H]=A[M]?4:8,++D),M++;if(A[M]!==0&&(Y[z+H]=4,++D),D>L)return null;const N=new Int32Array([0,W,-1,0,-W,0,0,0,1]),Z=new Path2D;for(j=0;D&&j<=R;j++){let J=j*W;const se=J+C;for(;J<se&&!Y[J];)J++;if(J===se)continue;Z.moveTo(J%W,j);const oe=J;let ne=Y[J];do{const ae=N[ne];do J+=ae;while(!Y[J]);const fe=Y[J];fe!==5&&fe!==10?(ne=fe,Y[J]=0):(ne=fe&51*ne>>4,Y[J]&=ne>>2|ne<<2),Z.lineTo(J%W,J/W|0),Y[J]||--D}while(oe!==J);--j}return A=null,Y=null,function(J){J.save(),J.scale(1/C,-1/R),J.translate(0,-R),J.fill(Z),J.beginPath(),J.restore()}}class F{constructor(C,R){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,C,R])}clone(){const C=Object.create(this);return C.clipBox=this.clipBox.slice(),C}setCurrentPoint(C,R){this.x=C,this.y=R}updatePathMinMax(C,R,L){[R,L]=i.Util.applyTransform([R,L],C),this.minX=Math.min(this.minX,R),this.minY=Math.min(this.minY,L),this.maxX=Math.max(this.maxX,R),this.maxY=Math.max(this.maxY,L)}updateRectMinMax(C,R){const L=i.Util.applyTransform(R,C),q=i.Util.applyTransform(R.slice(2),C);this.minX=Math.min(this.minX,L[0],q[0]),this.minY=Math.min(this.minY,L[1],q[1]),this.maxX=Math.max(this.maxX,L[0],q[0]),this.maxY=Math.max(this.maxY,L[1],q[1])}updateScalingPathMinMax(C,R){i.Util.scaleMinMax(C,R),this.minX=Math.min(this.minX,R[0]),this.maxX=Math.max(this.maxX,R[1]),this.minY=Math.min(this.minY,R[2]),this.maxY=Math.max(this.maxY,R[3])}updateCurvePathMinMax(C,R,L,q,W,Y,j,H,z,h){const A=i.Util.bezierBoundingBox(R,L,q,W,Y,j,H,z);if(h){h[0]=Math.min(h[0],A[0],A[2]),h[1]=Math.max(h[1],A[0],A[2]),h[2]=Math.min(h[2],A[1],A[3]),h[3]=Math.max(h[3],A[1],A[3]);return}this.updateRectMinMax(C,A)}getPathBoundingBox(C=s.PathType.FILL,R=null){const L=[this.minX,this.minY,this.maxX,this.maxY];if(C===s.PathType.STROKE){R||(0,i.unreachable)("Stroke bounding box must include transform.");const q=i.Util.singularValueDecompose2dScale(R),W=q[0]*this.lineWidth/2,Y=q[1]*this.lineWidth/2;L[0]-=W,L[1]-=Y,L[2]+=W,L[3]+=Y}return L}updateClipFromPath(){const C=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(C||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(C){this.clipBox=C,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(C=s.PathType.FILL,R=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(C,R))}}function y(G,C){if(typeof ImageData<"u"&&C instanceof ImageData){G.putImageData(C,0,0);return}const R=C.height,L=C.width,q=R%g,W=(R-q)/g,Y=q===0?W:W+1,j=G.createImageData(L,g);let H=0,z;const h=C.data,A=j.data;let M,D,N,Z;if(C.kind===i.ImageKind.GRAYSCALE_1BPP){const re=h.byteLength,J=new Uint32Array(A.buffer,0,A.byteLength>>2),se=J.length,oe=L+7>>3,ne=4294967295,ae=i.FeatureTest.isLittleEndian?4278190080:255;for(M=0;M<Y;M++){for(N=M<W?g:q,z=0,D=0;D<N;D++){const fe=re-H;let pe=0;const we=fe>oe?L:fe*8-7,Ae=we&-8;let Te=0,V=0;for(;pe<Ae;pe+=8)V=h[H++],J[z++]=V&128?ne:ae,J[z++]=V&64?ne:ae,J[z++]=V&32?ne:ae,J[z++]=V&16?ne:ae,J[z++]=V&8?ne:ae,J[z++]=V&4?ne:ae,J[z++]=V&2?ne:ae,J[z++]=V&1?ne:ae;for(;pe<we;pe++)Te===0&&(V=h[H++],Te=128),J[z++]=V&Te?ne:ae,Te>>=1}for(;z<se;)J[z++]=0;G.putImageData(j,0,M*g)}}else if(C.kind===i.ImageKind.RGBA_32BPP){for(D=0,Z=L*g*4,M=0;M<W;M++)A.set(h.subarray(H,H+Z)),H+=Z,G.putImageData(j,0,D),D+=g;M<Y&&(Z=L*q*4,A.set(h.subarray(H,H+Z)),G.putImageData(j,0,D))}else if(C.kind===i.ImageKind.RGB_24BPP)for(N=g,Z=L*N,M=0;M<Y;M++){for(M>=W&&(N=q,Z=L*N),z=0,D=Z;D--;)A[z++]=h[H++],A[z++]=h[H++],A[z++]=h[H++],A[z++]=255;G.putImageData(j,0,M*g)}else throw new Error(`bad image kind: ${C.kind}`)}function o(G,C){if(C.bitmap){G.drawImage(C.bitmap,0,0);return}const R=C.height,L=C.width,q=R%g,W=(R-q)/g,Y=q===0?W:W+1,j=G.createImageData(L,g);let H=0;const z=C.data,h=j.data;for(let A=0;A<Y;A++){const M=A<W?g:q;({srcPos:H}=(0,a.convertBlackAndWhiteToRGBA)({src:z,srcPos:H,dest:h,width:L,height:M,nonBlackColor:0})),G.putImageData(j,0,A*g)}}function p(G,C){const R=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const L of R)G[L]!==void 0&&(C[L]=G[L]);G.setLineDash!==void 0&&(C.setLineDash(G.getLineDash()),C.lineDashOffset=G.lineDashOffset)}function f(G){G.strokeStyle=G.fillStyle="#000000",G.fillRule="nonzero",G.globalAlpha=1,G.lineWidth=1,G.lineCap="butt",G.lineJoin="miter",G.miterLimit=10,G.globalCompositeOperation="source-over",G.font="10px sans-serif",G.setLineDash!==void 0&&(G.setLineDash([]),G.lineDashOffset=0),b.isNodeJS||(G.filter="none")}function u(G,C,R,L){const q=G.length;for(let W=3;W<q;W+=4){const Y=G[W];if(Y===0)G[W-3]=C,G[W-2]=R,G[W-1]=L;else if(Y<255){const j=255-Y;G[W-3]=G[W-3]*Y+C*j>>8,G[W-2]=G[W-2]*Y+R*j>>8,G[W-1]=G[W-1]*Y+L*j>>8}}}function w(G,C,R){const L=G.length,q=1/255;for(let W=3;W<L;W+=4){const Y=R?R[G[W]]:G[W];C[W]=C[W]*Y*q|0}}function O(G,C,R){const L=G.length;for(let q=3;q<L;q+=4){const W=G[q-3]*77+G[q-2]*152+G[q-1]*28;C[q]=R?C[q]*R[W>>8]>>8:C[q]*W>>16}}function _(G,C,R,L,q,W,Y,j,H,z,h){const A=!!W,M=A?W[0]:0,D=A?W[1]:0,N=A?W[2]:0;let Z;q==="Luminosity"?Z=O:Z=w;const J=Math.min(L,Math.ceil(1048576/R));for(let se=0;se<L;se+=J){const oe=Math.min(J,L-se),ne=G.getImageData(j-z,se+(H-h),R,oe),ae=C.getImageData(j,se+H,R,oe);A&&u(ne.data,M,D,N),Z(ne.data,ae.data,Y),C.putImageData(ae,j,se+H)}}function $(G,C,R,L){const q=L[0],W=L[1],Y=L[2]-q,j=L[3]-W;Y===0||j===0||(_(C.context,R,Y,j,C.subtype,C.backdrop,C.transferMap,q,W,C.offsetX,C.offsetY),G.save(),G.globalAlpha=1,G.globalCompositeOperation="source-over",G.setTransform(1,0,0,1,0,0),G.drawImage(R.canvas,0,0),G.restore())}function X(G,C){const R=i.Util.singularValueDecompose2dScale(G);R[0]=Math.fround(R[0]),R[1]=Math.fround(R[1]);const L=Math.fround((globalThis.devicePixelRatio||1)*r.PixelsPerInch.PDF_TO_CSS_UNITS);return C!==void 0?C:R[0]<=L||R[1]<=L}const K=["butt","round","square"],Q=["miter","round","bevel"],te={},ue={},ve=class ve{constructor(C,R,L,q,W,{optionalContentConfig:Y,markedContentStack:j=null},H,z){ee(this,de);ee(this,Ee);this.ctx=C,this.current=new F(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=R,this.objs=L,this.canvasFactory=q,this.filterFactory=W,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=j||[],this.optionalContentConfig=Y,this.cachedCanvases=new d(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=H,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=z,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(C,R=null){return typeof C=="string"?C.startsWith("g_")?this.commonObjs.get(C):this.objs.get(C):R}beginDrawing({transform:C,viewport:R,transparency:L=!1,background:q=null}){const W=this.ctx.canvas.width,Y=this.ctx.canvas.height,j=this.ctx.fillStyle;if(this.ctx.fillStyle=q||"#ffffff",this.ctx.fillRect(0,0,W,Y),this.ctx.fillStyle=j,L){const H=this.cachedCanvases.getCanvas("transparent",W,Y);this.compositeCtx=this.ctx,this.transparentCanvas=H.canvas,this.ctx=H.context,this.ctx.save(),this.ctx.transform(...(0,r.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),f(this.ctx),C&&(this.ctx.transform(...C),this.outputScaleX=C[0],this.outputScaleY=C[0]),this.ctx.transform(...R.transform),this.viewportScale=R.scale,this.baseTransform=(0,r.getCurrentTransform)(this.ctx)}executeOperatorList(C,R,L,q){const W=C.argsArray,Y=C.fnArray;let j=R||0;const H=W.length;if(H===j)return j;const z=H-j>x&&typeof L=="function",h=z?Date.now()+I:0;let A=0;const M=this.commonObjs,D=this.objs;let N;for(;;){if(q!==void 0&&j===q.nextBreakPoint)return q.breakIt(j,L),j;if(N=Y[j],N!==i.OPS.dependency)this[N].apply(this,W[j]);else for(const Z of W[j]){const re=Z.startsWith("g_")?M:D;if(!re.has(Z))return re.get(Z,L),j}if(j++,j===H)return j;if(z&&++A>x){if(Date.now()>h)return L(),j;A=0}}}endDrawing(){ie(this,de,bt).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const C of this._cachedBitmapsMap.values()){for(const R of C.values())typeof HTMLCanvasElement<"u"&&R instanceof HTMLCanvasElement&&(R.width=R.height=0);C.clear()}this._cachedBitmapsMap.clear(),ie(this,Ee,vt).call(this)}_scaleImage(C,R){const L=C.width,q=C.height;let W=Math.max(Math.hypot(R[0],R[1]),1),Y=Math.max(Math.hypot(R[2],R[3]),1),j=L,H=q,z="prescale1",h,A;for(;W>2&&j>1||Y>2&&H>1;){let M=j,D=H;W>2&&j>1&&(M=j>=16384?Math.floor(j/2)-1||1:Math.ceil(j/2),W/=j/M),Y>2&&H>1&&(D=H>=16384?Math.floor(H/2)-1||1:Math.ceil(H)/2,Y/=H/D),h=this.cachedCanvases.getCanvas(z,M,D),A=h.context,A.clearRect(0,0,M,D),A.drawImage(C,0,0,j,H,0,0,M,D),C=h.canvas,j=M,H=D,z=z==="prescale1"?"prescale2":"prescale1"}return{img:C,paintWidth:j,paintHeight:H}}_createMaskCanvas(C){const R=this.ctx,{width:L,height:q}=C,W=this.current.fillColor,Y=this.current.patternFill,j=(0,r.getCurrentTransform)(R);let H,z,h,A;if((C.bitmap||C.data)&&C.count>1){const pe=C.bitmap||C.data.buffer;z=JSON.stringify(Y?j:[j.slice(0,4),W]),H=this._cachedBitmapsMap.get(pe),H||(H=new Map,this._cachedBitmapsMap.set(pe,H));const we=H.get(z);if(we&&!Y){const Ae=Math.round(Math.min(j[0],j[2])+j[4]),Te=Math.round(Math.min(j[1],j[3])+j[5]);return{canvas:we,offsetX:Ae,offsetY:Te}}h=we}h||(A=this.cachedCanvases.getCanvas("maskCanvas",L,q),o(A.context,C));let M=i.Util.transform(j,[1/L,0,0,-1/q,0,0]);M=i.Util.transform(M,[1,0,0,1,0,-q]);const D=i.Util.applyTransform([0,0],M),N=i.Util.applyTransform([L,q],M),Z=i.Util.normalizeRect([D[0],D[1],N[0],N[1]]),re=Math.round(Z[2]-Z[0])||1,J=Math.round(Z[3]-Z[1])||1,se=this.cachedCanvases.getCanvas("fillCanvas",re,J),oe=se.context,ne=Math.min(D[0],N[0]),ae=Math.min(D[1],N[1]);oe.translate(-ne,-ae),oe.transform(...M),h||(h=this._scaleImage(A.canvas,(0,r.getCurrentTransformInverse)(oe)),h=h.img,H&&Y&&H.set(z,h)),oe.imageSmoothingEnabled=X((0,r.getCurrentTransform)(oe),C.interpolate),T(oe,h,0,0,h.width,h.height,0,0,L,q),oe.globalCompositeOperation="source-in";const fe=i.Util.transform((0,r.getCurrentTransformInverse)(oe),[1,0,0,1,-ne,-ae]);return oe.fillStyle=Y?W.getPattern(R,this,fe,s.PathType.FILL):W,oe.fillRect(0,0,L,q),H&&!Y&&(this.cachedCanvases.delete("fillCanvas"),H.set(z,se.canvas)),{canvas:se.canvas,offsetX:Math.round(ne),offsetY:Math.round(ae)}}setLineWidth(C){C!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=C,this.ctx.lineWidth=C}setLineCap(C){this.ctx.lineCap=K[C]}setLineJoin(C){this.ctx.lineJoin=Q[C]}setMiterLimit(C){this.ctx.miterLimit=C}setDash(C,R){const L=this.ctx;L.setLineDash!==void 0&&(L.setLineDash(C),L.lineDashOffset=R)}setRenderingIntent(C){}setFlatness(C){}setGState(C){for(const[R,L]of C)switch(R){case"LW":this.setLineWidth(L);break;case"LC":this.setLineCap(L);break;case"LJ":this.setLineJoin(L);break;case"ML":this.setMiterLimit(L);break;case"D":this.setDash(L[0],L[1]);break;case"RI":this.setRenderingIntent(L);break;case"FL":this.setFlatness(L);break;case"Font":this.setFont(L[0],L[1]);break;case"CA":this.current.strokeAlpha=L;break;case"ca":this.current.fillAlpha=L,this.ctx.globalAlpha=L;break;case"BM":this.ctx.globalCompositeOperation=L;break;case"SMask":this.current.activeSMask=L?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(L);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const C=this.inSMaskMode;this.current.activeSMask&&!C?this.beginSMaskMode():!this.current.activeSMask&&C&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const C=this.ctx.canvas.width,R=this.ctx.canvas.height,L="smaskGroupAt"+this.groupLevel,q=this.cachedCanvases.getCanvas(L,C,R);this.suspendedCtx=this.ctx,this.ctx=q.context;const W=this.ctx;W.setTransform(...(0,r.getCurrentTransform)(this.suspendedCtx)),p(this.suspendedCtx,W),S(W,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),p(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(C){if(!this.current.activeSMask)return;C?(C[0]=Math.floor(C[0]),C[1]=Math.floor(C[1]),C[2]=Math.ceil(C[2]),C[3]=Math.ceil(C[3])):C=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const R=this.current.activeSMask,L=this.suspendedCtx;$(L,R,this.ctx,C),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(p(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const C=this.current;this.stateStack.push(C),this.current=C.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),p(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(C,R,L,q,W,Y){this.ctx.transform(C,R,L,q,W,Y),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(C,R,L){const q=this.ctx,W=this.current;let Y=W.x,j=W.y,H,z;const h=(0,r.getCurrentTransform)(q),A=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,M=A?L.slice(0):null;for(let D=0,N=0,Z=C.length;D<Z;D++)switch(C[D]|0){case i.OPS.rectangle:Y=R[N++],j=R[N++];const re=R[N++],J=R[N++],se=Y+re,oe=j+J;q.moveTo(Y,j),re===0||J===0?q.lineTo(se,oe):(q.lineTo(se,j),q.lineTo(se,oe),q.lineTo(Y,oe)),A||W.updateRectMinMax(h,[Y,j,se,oe]),q.closePath();break;case i.OPS.moveTo:Y=R[N++],j=R[N++],q.moveTo(Y,j),A||W.updatePathMinMax(h,Y,j);break;case i.OPS.lineTo:Y=R[N++],j=R[N++],q.lineTo(Y,j),A||W.updatePathMinMax(h,Y,j);break;case i.OPS.curveTo:H=Y,z=j,Y=R[N+4],j=R[N+5],q.bezierCurveTo(R[N],R[N+1],R[N+2],R[N+3],Y,j),W.updateCurvePathMinMax(h,H,z,R[N],R[N+1],R[N+2],R[N+3],Y,j,M),N+=6;break;case i.OPS.curveTo2:H=Y,z=j,q.bezierCurveTo(Y,j,R[N],R[N+1],R[N+2],R[N+3]),W.updateCurvePathMinMax(h,H,z,Y,j,R[N],R[N+1],R[N+2],R[N+3],M),Y=R[N+2],j=R[N+3],N+=4;break;case i.OPS.curveTo3:H=Y,z=j,Y=R[N+2],j=R[N+3],q.bezierCurveTo(R[N],R[N+1],Y,j,Y,j),W.updateCurvePathMinMax(h,H,z,R[N],R[N+1],Y,j,Y,j,M),N+=4;break;case i.OPS.closePath:q.closePath();break}A&&W.updateScalingPathMinMax(h,M),W.setCurrentPoint(Y,j)}closePath(){this.ctx.closePath()}stroke(C=!0){const R=this.ctx,L=this.current.strokeColor;R.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof L=="object"&&(L!=null&&L.getPattern)?(R.save(),R.strokeStyle=L.getPattern(R,this,(0,r.getCurrentTransformInverse)(R),s.PathType.STROKE),this.rescaleAndStroke(!1),R.restore()):this.rescaleAndStroke(!0)),C&&this.consumePath(this.current.getClippedPathBoundingBox()),R.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(C=!0){const R=this.ctx,L=this.current.fillColor,q=this.current.patternFill;let W=!1;q&&(R.save(),R.fillStyle=L.getPattern(R,this,(0,r.getCurrentTransformInverse)(R),s.PathType.FILL),W=!0);const Y=this.current.getClippedPathBoundingBox();this.contentVisible&&Y!==null&&(this.pendingEOFill?(R.fill("evenodd"),this.pendingEOFill=!1):R.fill()),W&&R.restore(),C&&this.consumePath(Y)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=te}eoClip(){this.pendingClip=ue}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const C=this.pendingTextPaths,R=this.ctx;if(C===void 0){R.beginPath();return}R.save(),R.beginPath();for(const L of C)R.setTransform(...L.transform),R.translate(L.x,L.y),L.addToPath(R,L.fontSize);R.restore(),R.clip(),R.beginPath(),delete this.pendingTextPaths}setCharSpacing(C){this.current.charSpacing=C}setWordSpacing(C){this.current.wordSpacing=C}setHScale(C){this.current.textHScale=C/100}setLeading(C){this.current.leading=-C}setFont(C,R){const L=this.commonObjs.get(C),q=this.current;if(!L)throw new Error(`Can't find font for ${C}`);if(q.fontMatrix=L.fontMatrix||i.FONT_IDENTITY_MATRIX,(q.fontMatrix[0]===0||q.fontMatrix[3]===0)&&(0,i.warn)("Invalid font matrix for font "+C),R<0?(R=-R,q.fontDirection=-1):q.fontDirection=1,this.current.font=L,this.current.fontSize=R,L.isType3Font)return;const W=L.loadedName||"sans-serif";let Y="normal";L.black?Y="900":L.bold&&(Y="bold");const j=L.italic?"italic":"normal",H=`"${W}", ${L.fallbackName}`;let z=R;R<E?z=E:R>l&&(z=l),this.current.fontSizeScale=R/z,this.ctx.font=`${j} ${Y} ${z}px ${H}`}setTextRenderingMode(C){this.current.textRenderingMode=C}setTextRise(C){this.current.textRise=C}moveText(C,R){this.current.x=this.current.lineX+=C,this.current.y=this.current.lineY+=R}setLeadingMoveText(C,R){this.setLeading(-R),this.moveText(C,R)}setTextMatrix(C,R,L,q,W,Y){this.current.textMatrix=[C,R,L,q,W,Y],this.current.textMatrixScale=Math.hypot(C,R),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(C,R,L,q){const W=this.ctx,Y=this.current,j=Y.font,H=Y.textRenderingMode,z=Y.fontSize/Y.fontSizeScale,h=H&i.TextRenderingMode.FILL_STROKE_MASK,A=!!(H&i.TextRenderingMode.ADD_TO_PATH_FLAG),M=Y.patternFill&&!j.missingFile;let D;(j.disableFontFace||A||M)&&(D=j.getPathGenerator(this.commonObjs,C)),j.disableFontFace||M?(W.save(),W.translate(R,L),W.beginPath(),D(W,z),q&&W.setTransform(...q),(h===i.TextRenderingMode.FILL||h===i.TextRenderingMode.FILL_STROKE)&&W.fill(),(h===i.TextRenderingMode.STROKE||h===i.TextRenderingMode.FILL_STROKE)&&W.stroke(),W.restore()):((h===i.TextRenderingMode.FILL||h===i.TextRenderingMode.FILL_STROKE)&&W.fillText(C,R,L),(h===i.TextRenderingMode.STROKE||h===i.TextRenderingMode.FILL_STROKE)&&W.strokeText(C,R,L)),A&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,r.getCurrentTransform)(W),x:R,y:L,fontSize:z,addToPath:D})}get isFontSubpixelAAEnabled(){const{context:C}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);C.scale(1.5,1),C.fillText("I",0,10);const R=C.getImageData(0,0,10,10).data;let L=!1;for(let q=3;q<R.length;q+=4)if(R[q]>0&&R[q]<255){L=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",L)}showText(C){const R=this.current,L=R.font;if(L.isType3Font)return this.showType3Text(C);const q=R.fontSize;if(q===0)return;const W=this.ctx,Y=R.fontSizeScale,j=R.charSpacing,H=R.wordSpacing,z=R.fontDirection,h=R.textHScale*z,A=C.length,M=L.vertical,D=M?1:-1,N=L.defaultVMetrics,Z=q*R.fontMatrix[0],re=R.textRenderingMode===i.TextRenderingMode.FILL&&!L.disableFontFace&&!R.patternFill;W.save(),W.transform(...R.textMatrix),W.translate(R.x,R.y+R.textRise),z>0?W.scale(h,-1):W.scale(h,1);let J;if(R.patternFill){W.save();const fe=R.fillColor.getPattern(W,this,(0,r.getCurrentTransformInverse)(W),s.PathType.FILL);J=(0,r.getCurrentTransform)(W),W.restore(),W.fillStyle=fe}let se=R.lineWidth;const oe=R.textMatrixScale;if(oe===0||se===0){const fe=R.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(fe===i.TextRenderingMode.STROKE||fe===i.TextRenderingMode.FILL_STROKE)&&(se=this.getSinglePixelWidth())}else se/=oe;if(Y!==1&&(W.scale(Y,Y),se/=Y),W.lineWidth=se,L.isInvalidPDFjsFont){const fe=[];let pe=0;for(const we of C)fe.push(we.unicode),pe+=we.width;W.fillText(fe.join(""),0,0),R.x+=pe*Z*h,W.restore(),this.compose();return}let ne=0,ae;for(ae=0;ae<A;++ae){const fe=C[ae];if(typeof fe=="number"){ne+=D*fe*q/1e3;continue}let pe=!1;const we=(fe.isSpace?H:0)+j,Ae=fe.fontChar,Te=fe.accent;let V,be,ye=fe.width;if(M){const he=fe.vmetric||N,B=-(fe.vmetric?he[1]:ye*.5)*Z,U=he[2]*Z;ye=he?-he[0]:ye,V=B/Y,be=(ne+U)/Y}else V=ne/Y,be=0;if(L.remeasure&&ye>0){const he=W.measureText(Ae).width*1e3/q*Y;if(ye<he&&this.isFontSubpixelAAEnabled){const B=ye/he;pe=!0,W.save(),W.scale(B,1),V/=B}else ye!==he&&(V+=(ye-he)/2e3*q/Y)}if(this.contentVisible&&(fe.isInFont||L.missingFile)){if(re&&!Te)W.fillText(Ae,V,be);else if(this.paintChar(Ae,V,be,J),Te){const he=V+q*Te.offset.x/Y,B=be-q*Te.offset.y/Y;this.paintChar(Te.fontChar,he,B,J)}}let Pe;M?Pe=ye*Z-we*z:Pe=ye*Z+we*z,ne+=Pe,pe&&W.restore()}M?R.y-=ne:R.x+=ne*h,W.restore(),this.compose()}showType3Text(C){const R=this.ctx,L=this.current,q=L.font,W=L.fontSize,Y=L.fontDirection,j=q.vertical?1:-1,H=L.charSpacing,z=L.wordSpacing,h=L.textHScale*Y,A=L.fontMatrix||i.FONT_IDENTITY_MATRIX,M=C.length,D=L.textRenderingMode===i.TextRenderingMode.INVISIBLE;let N,Z,re,J;if(!(D||W===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,R.save(),R.transform(...L.textMatrix),R.translate(L.x,L.y),R.scale(h,Y),N=0;N<M;++N){if(Z=C[N],typeof Z=="number"){J=j*Z*W/1e3,this.ctx.translate(J,0),L.x+=J*h;continue}const se=(Z.isSpace?z:0)+H,oe=q.charProcOperatorList[Z.operatorListId];if(!oe){(0,i.warn)(`Type3 character "${Z.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Z,this.save(),R.scale(W,W),R.transform(...A),this.executeOperatorList(oe),this.restore()),re=i.Util.applyTransform([Z.width,0],A)[0]*W+se,R.translate(re,0),L.x+=re*h}R.restore(),this.processingType3=null}}setCharWidth(C,R){}setCharWidthAndBounds(C,R,L,q,W,Y){this.ctx.rect(L,q,W-L,Y-q),this.ctx.clip(),this.endPath()}getColorN_Pattern(C){let R;if(C[0]==="TilingPattern"){const L=C[1],q=this.baseTransform||(0,r.getCurrentTransform)(this.ctx),W={createCanvasGraphics:Y=>new ve(Y,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};R=new s.TilingPattern(C,L,this.ctx,W,q)}else R=this._getPattern(C[1],C[2]);return R}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(C,R,L){const q=i.Util.makeHexColor(C,R,L);this.ctx.strokeStyle=q,this.current.strokeColor=q}setFillRGBColor(C,R,L){const q=i.Util.makeHexColor(C,R,L);this.ctx.fillStyle=q,this.current.fillColor=q,this.current.patternFill=!1}_getPattern(C,R=null){let L;return this.cachedPatterns.has(C)?L=this.cachedPatterns.get(C):(L=(0,s.getShadingPattern)(this.getObject(C)),this.cachedPatterns.set(C,L)),R&&(L.matrix=R),L}shadingFill(C){if(!this.contentVisible)return;const R=this.ctx;this.save();const L=this._getPattern(C);R.fillStyle=L.getPattern(R,this,(0,r.getCurrentTransformInverse)(R),s.PathType.SHADING);const q=(0,r.getCurrentTransformInverse)(R);if(q){const W=R.canvas,Y=W.width,j=W.height,H=i.Util.applyTransform([0,0],q),z=i.Util.applyTransform([0,j],q),h=i.Util.applyTransform([Y,0],q),A=i.Util.applyTransform([Y,j],q),M=Math.min(H[0],z[0],h[0],A[0]),D=Math.min(H[1],z[1],h[1],A[1]),N=Math.max(H[0],z[0],h[0],A[0]),Z=Math.max(H[1],z[1],h[1],A[1]);this.ctx.fillRect(M,D,N-M,Z-D)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(C,R){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(C)&&C.length===6&&this.transform(...C),this.baseTransform=(0,r.getCurrentTransform)(this.ctx),R)){const L=R[2]-R[0],q=R[3]-R[1];this.ctx.rect(R[0],R[1],L,q),this.current.updateRectMinMax((0,r.getCurrentTransform)(this.ctx),R),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(C){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const R=this.ctx;C.isolated||(0,i.info)("TODO: Support non-isolated groups."),C.knockout&&(0,i.warn)("Knockout groups not supported.");const L=(0,r.getCurrentTransform)(R);if(C.matrix&&R.transform(...C.matrix),!C.bbox)throw new Error("Bounding box is required.");let q=i.Util.getAxialAlignedBoundingBox(C.bbox,(0,r.getCurrentTransform)(R));const W=[0,0,R.canvas.width,R.canvas.height];q=i.Util.intersect(q,W)||[0,0,0,0];const Y=Math.floor(q[0]),j=Math.floor(q[1]);let H=Math.max(Math.ceil(q[2])-Y,1),z=Math.max(Math.ceil(q[3])-j,1),h=1,A=1;H>c&&(h=H/c,H=c),z>c&&(A=z/c,z=c),this.current.startNewPathAndClipBox([0,0,H,z]);let M="groupAt"+this.groupLevel;C.smask&&(M+="_smask_"+this.smaskCounter++%2);const D=this.cachedCanvases.getCanvas(M,H,z),N=D.context;N.scale(1/h,1/A),N.translate(-Y,-j),N.transform(...L),C.smask?this.smaskStack.push({canvas:D.canvas,context:N,offsetX:Y,offsetY:j,scaleX:h,scaleY:A,subtype:C.smask.subtype,backdrop:C.smask.backdrop,transferMap:C.smask.transferMap||null,startTransformInverse:null}):(R.setTransform(1,0,0,1,0,0),R.translate(Y,j),R.scale(h,A),R.save()),p(R,N),this.ctx=N,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(R),this.groupLevel++}endGroup(C){if(!this.contentVisible)return;this.groupLevel--;const R=this.ctx,L=this.groupStack.pop();if(this.ctx=L,this.ctx.imageSmoothingEnabled=!1,C.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const q=(0,r.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...q);const W=i.Util.getAxialAlignedBoundingBox([0,0,R.canvas.width,R.canvas.height],q);this.ctx.drawImage(R.canvas,0,0),this.ctx.restore(),this.compose(W)}}beginAnnotation(C,R,L,q,W){if(ie(this,de,bt).call(this),f(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(R)&&R.length===4){const Y=R[2]-R[0],j=R[3]-R[1];if(W&&this.annotationCanvasMap){L=L.slice(),L[4]-=R[0],L[5]-=R[1],R=R.slice(),R[0]=R[1]=0,R[2]=Y,R[3]=j;const[H,z]=i.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(this.ctx)),{viewportScale:h}=this,A=Math.ceil(Y*this.outputScaleX*h),M=Math.ceil(j*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(A,M);const{canvas:D,context:N}=this.annotationCanvas;this.annotationCanvasMap.set(C,D),this.annotationCanvas.savedCtx=this.ctx,this.ctx=N,this.ctx.save(),this.ctx.setTransform(H,0,0,-z,0,j*z),f(this.ctx)}else f(this.ctx),this.ctx.rect(R[0],R[1],Y,j),this.ctx.clip(),this.endPath()}this.current=new F(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...L),this.transform(...q)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),ie(this,Ee,vt).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(C){if(!this.contentVisible)return;const R=C.count;C=this.getObject(C.data,C),C.count=R;const L=this.ctx,q=this.processingType3;if(q&&(q.compiled===void 0&&(q.compiled=P(C)),q.compiled)){q.compiled(L);return}const W=this._createMaskCanvas(C),Y=W.canvas;L.save(),L.setTransform(1,0,0,1,0,0),L.drawImage(Y,W.offsetX,W.offsetY),L.restore(),this.compose()}paintImageMaskXObjectRepeat(C,R,L=0,q=0,W,Y){if(!this.contentVisible)return;C=this.getObject(C.data,C);const j=this.ctx;j.save();const H=(0,r.getCurrentTransform)(j);j.transform(R,L,q,W,0,0);const z=this._createMaskCanvas(C);j.setTransform(1,0,0,1,z.offsetX-H[4],z.offsetY-H[5]);for(let h=0,A=Y.length;h<A;h+=2){const M=i.Util.transform(H,[R,L,q,W,Y[h],Y[h+1]]),[D,N]=i.Util.applyTransform([0,0],M);j.drawImage(z.canvas,D,N)}j.restore(),this.compose()}paintImageMaskXObjectGroup(C){if(!this.contentVisible)return;const R=this.ctx,L=this.current.fillColor,q=this.current.patternFill;for(const W of C){const{data:Y,width:j,height:H,transform:z}=W,h=this.cachedCanvases.getCanvas("maskCanvas",j,H),A=h.context;A.save();const M=this.getObject(Y,W);o(A,M),A.globalCompositeOperation="source-in",A.fillStyle=q?L.getPattern(A,this,(0,r.getCurrentTransformInverse)(R),s.PathType.FILL):L,A.fillRect(0,0,j,H),A.restore(),R.save(),R.transform(...z),R.scale(1,-1),T(R,h.canvas,0,0,j,H,0,-1,1,1),R.restore()}this.compose()}paintImageXObject(C){if(!this.contentVisible)return;const R=this.getObject(C);if(!R){(0,i.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(R)}paintImageXObjectRepeat(C,R,L,q){if(!this.contentVisible)return;const W=this.getObject(C);if(!W){(0,i.warn)("Dependent image isn't ready yet");return}const Y=W.width,j=W.height,H=[];for(let z=0,h=q.length;z<h;z+=2)H.push({transform:[R,0,0,L,q[z],q[z+1]],x:0,y:0,w:Y,h:j});this.paintInlineImageXObjectGroup(W,H)}applyTransferMapsToCanvas(C){return this.current.transferMaps!=="none"&&(C.filter=this.current.transferMaps,C.drawImage(C.canvas,0,0),C.filter="none"),C.canvas}applyTransferMapsToBitmap(C){if(this.current.transferMaps==="none")return C.bitmap;const{bitmap:R,width:L,height:q}=C,W=this.cachedCanvases.getCanvas("inlineImage",L,q),Y=W.context;return Y.filter=this.current.transferMaps,Y.drawImage(R,0,0),Y.filter="none",W.canvas}paintInlineImageXObject(C){if(!this.contentVisible)return;const R=C.width,L=C.height,q=this.ctx;this.save(),b.isNodeJS||(q.filter="none"),q.scale(1/R,-1/L);let W;if(C.bitmap)W=this.applyTransferMapsToBitmap(C);else if(typeof HTMLElement=="function"&&C instanceof HTMLElement||!C.data)W=C;else{const H=this.cachedCanvases.getCanvas("inlineImage",R,L).context;y(H,C),W=this.applyTransferMapsToCanvas(H)}const Y=this._scaleImage(W,(0,r.getCurrentTransformInverse)(q));q.imageSmoothingEnabled=X((0,r.getCurrentTransform)(q),C.interpolate),T(q,Y.img,0,0,Y.paintWidth,Y.paintHeight,0,-L,R,L),this.compose(),this.restore()}paintInlineImageXObjectGroup(C,R){if(!this.contentVisible)return;const L=this.ctx;let q;if(C.bitmap)q=C.bitmap;else{const W=C.width,Y=C.height,H=this.cachedCanvases.getCanvas("inlineImage",W,Y).context;y(H,C),q=this.applyTransferMapsToCanvas(H)}for(const W of R)L.save(),L.transform(...W.transform),L.scale(1,-1),T(L,q,W.x,W.y,W.w,W.h,0,-1,1,1),L.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(C){}markPointProps(C,R){}beginMarkedContent(C){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(C,R){C==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(R)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(C){const R=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(C);const L=this.ctx;this.pendingClip&&(R||(this.pendingClip===ue?L.clip("evenodd"):L.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),L.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const C=(0,r.getCurrentTransform)(this.ctx);if(C[1]===0&&C[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(C[0]),Math.abs(C[3]));else{const R=Math.abs(C[0]*C[3]-C[2]*C[1]),L=Math.hypot(C[0],C[2]),q=Math.hypot(C[1],C[3]);this._cachedGetSinglePixelWidth=Math.max(L,q)/R}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:C}=this.current,R=(0,r.getCurrentTransform)(this.ctx);let L,q;if(R[1]===0&&R[2]===0){const W=Math.abs(R[0]),Y=Math.abs(R[3]);if(C===0)L=1/W,q=1/Y;else{const j=W*C,H=Y*C;L=j<1?1/j:1,q=H<1?1/H:1}}else{const W=Math.abs(R[0]*R[3]-R[2]*R[1]),Y=Math.hypot(R[0],R[1]),j=Math.hypot(R[2],R[3]);if(C===0)L=j/W,q=Y/W;else{const H=C*W;L=j>H?j/H:1,q=Y>H?Y/H:1}}this._cachedScaleForStroking=[L,q]}return this._cachedScaleForStroking}rescaleAndStroke(C){const{ctx:R}=this,{lineWidth:L}=this.current,[q,W]=this.getScaleForStroking();if(R.lineWidth=L||1,q===1&&W===1){R.stroke();return}let Y,j,H;C&&(Y=(0,r.getCurrentTransform)(R),j=R.getLineDash().slice(),H=R.lineDashOffset),R.scale(q,W);const z=Math.max(q,W);R.setLineDash(R.getLineDash().map(h=>h/z)),R.lineDashOffset/=z,R.stroke(),C&&(R.setTransform(...Y),R.setLineDash(j),R.lineDashOffset=H)}isContentVisible(){for(let C=this.markedContentStack.length-1;C>=0;C--)if(!this.markedContentStack[C].visible)return!1;return!0}};de=new WeakSet,bt=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Ee=new WeakSet,vt=function(){if(this.pageColors){const C=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(C!=="none"){const R=this.ctx.filter;this.ctx.filter=C,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=R}}};let ce=ve;t.CanvasGraphics=ce;for(const G in i.OPS)ce.prototype[G]!==void 0&&(ce.prototype[i.OPS[G]]=ce.prototype[G])},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=m;var i=n(1),r=n(6);const s={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=s;function a(T,P){if(!P)return;const F=P[2]-P[0],y=P[3]-P[1],o=new Path2D;o.rect(P[0],P[1],F,y),T.clip(o)}class b{constructor(){this.constructor===b&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class E extends b{constructor(P){super(),this._type=P[1],this._bbox=P[2],this._colorStops=P[3],this._p0=P[4],this._p1=P[5],this._r0=P[6],this._r1=P[7],this.matrix=null}_createGradient(P){let F;this._type==="axial"?F=P.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(F=P.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const y of this._colorStops)F.addColorStop(y[0],y[1]);return F}getPattern(P,F,y,o){let p;if(o===s.STROKE||o===s.FILL){const f=F.current.getClippedPathBoundingBox(o,(0,r.getCurrentTransform)(P))||[0,0,0,0],u=Math.ceil(f[2]-f[0])||1,w=Math.ceil(f[3]-f[1])||1,O=F.cachedCanvases.getCanvas("pattern",u,w,!0),_=O.context;_.clearRect(0,0,_.canvas.width,_.canvas.height),_.beginPath(),_.rect(0,0,_.canvas.width,_.canvas.height),_.translate(-f[0],-f[1]),y=i.Util.transform(y,[1,0,0,1,f[0],f[1]]),_.transform(...F.baseTransform),this.matrix&&_.transform(...this.matrix),a(_,this._bbox),_.fillStyle=this._createGradient(_),_.fill(),p=P.createPattern(O.canvas,"no-repeat");const $=new DOMMatrix(y);p.setTransform($)}else a(P,this._bbox),p=this._createGradient(P);return p}}function l(T,P,F,y,o,p,f,u){const w=P.coords,O=P.colors,_=T.data,$=T.width*4;let X;w[F+1]>w[y+1]&&(X=F,F=y,y=X,X=p,p=f,f=X),w[y+1]>w[o+1]&&(X=y,y=o,o=X,X=f,f=u,u=X),w[F+1]>w[y+1]&&(X=F,F=y,y=X,X=p,p=f,f=X);const K=(w[F]+P.offsetX)*P.scaleX,Q=(w[F+1]+P.offsetY)*P.scaleY,te=(w[y]+P.offsetX)*P.scaleX,ue=(w[y+1]+P.offsetY)*P.scaleY,ce=(w[o]+P.offsetX)*P.scaleX,de=(w[o+1]+P.offsetY)*P.scaleY;if(Q>=de)return;const me=O[p],Ee=O[p+1],Se=O[p+2],ve=O[f],G=O[f+1],C=O[f+2],R=O[u],L=O[u+1],q=O[u+2],W=Math.round(Q),Y=Math.round(de);let j,H,z,h,A,M,D,N;for(let Z=W;Z<=Y;Z++){if(Z<ue){let ne;Z<Q?ne=0:ne=(Q-Z)/(Q-ue),j=K-(K-te)*ne,H=me-(me-ve)*ne,z=Ee-(Ee-G)*ne,h=Se-(Se-C)*ne}else{let ne;Z>de?ne=1:ue===de?ne=0:ne=(ue-Z)/(ue-de),j=te-(te-ce)*ne,H=ve-(ve-R)*ne,z=G-(G-L)*ne,h=C-(C-q)*ne}let re;Z<Q?re=0:Z>de?re=1:re=(Q-Z)/(Q-de),A=K-(K-ce)*re,M=me-(me-R)*re,D=Ee-(Ee-L)*re,N=Se-(Se-q)*re;const J=Math.round(Math.min(j,A)),se=Math.round(Math.max(j,A));let oe=$*Z+J*4;for(let ne=J;ne<=se;ne++)re=(j-ne)/(j-A),re<0?re=0:re>1&&(re=1),_[oe++]=H-(H-M)*re|0,_[oe++]=z-(z-D)*re|0,_[oe++]=h-(h-N)*re|0,_[oe++]=255}}function c(T,P,F){const y=P.coords,o=P.colors;let p,f;switch(P.type){case"lattice":const u=P.verticesPerRow,w=Math.floor(y.length/u)-1,O=u-1;for(p=0;p<w;p++){let _=p*u;for(let $=0;$<O;$++,_++)l(T,F,y[_],y[_+1],y[_+u],o[_],o[_+1],o[_+u]),l(T,F,y[_+u+1],y[_+1],y[_+u],o[_+u+1],o[_+1],o[_+u])}break;case"triangles":for(p=0,f=y.length;p<f;p+=3)l(T,F,y[p],y[p+1],y[p+2],o[p],o[p+1],o[p+2]);break;default:throw new Error("illegal figure")}}class I extends b{constructor(P){super(),this._coords=P[2],this._colors=P[3],this._figures=P[4],this._bounds=P[5],this._bbox=P[7],this._background=P[8],this.matrix=null}_createMeshCanvas(P,F,y){const u=Math.floor(this._bounds[0]),w=Math.floor(this._bounds[1]),O=Math.ceil(this._bounds[2])-u,_=Math.ceil(this._bounds[3])-w,$=Math.min(Math.ceil(Math.abs(O*P[0]*1.1)),3e3),X=Math.min(Math.ceil(Math.abs(_*P[1]*1.1)),3e3),K=O/$,Q=_/X,te={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-w,scaleX:1/K,scaleY:1/Q},ue=$+2*2,ce=X+2*2,de=y.getCanvas("mesh",ue,ce,!1),me=de.context,Ee=me.createImageData($,X);if(F){const ve=Ee.data;for(let G=0,C=ve.length;G<C;G+=4)ve[G]=F[0],ve[G+1]=F[1],ve[G+2]=F[2],ve[G+3]=255}for(const ve of this._figures)c(Ee,ve,te);return me.putImageData(Ee,2,2),{canvas:de.canvas,offsetX:u-2*K,offsetY:w-2*Q,scaleX:K,scaleY:Q}}getPattern(P,F,y,o){a(P,this._bbox);let p;if(o===s.SHADING)p=i.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(P));else if(p=i.Util.singularValueDecompose2dScale(F.baseTransform),this.matrix){const u=i.Util.singularValueDecompose2dScale(this.matrix);p=[p[0]*u[0],p[1]*u[1]]}const f=this._createMeshCanvas(p,o===s.SHADING?null:this._background,F.cachedCanvases);return o!==s.SHADING&&(P.setTransform(...F.baseTransform),this.matrix&&P.transform(...this.matrix)),P.translate(f.offsetX,f.offsetY),P.scale(f.scaleX,f.scaleY),P.createPattern(f.canvas,"no-repeat")}}class x extends b{getPattern(){return"hotpink"}}function m(T){switch(T[0]){case"RadialAxial":return new E(T);case"Mesh":return new I(T);case"Dummy":return new x}throw new Error(`Unknown IR type: ${T[0]}`)}const g={COLORED:1,UNCOLORED:2},d=class d{constructor(P,F,y,o,p){this.operatorList=P[2],this.matrix=P[3]||[1,0,0,1,0,0],this.bbox=P[4],this.xstep=P[5],this.ystep=P[6],this.paintType=P[7],this.tilingType=P[8],this.color=F,this.ctx=y,this.canvasGraphicsFactory=o,this.baseTransform=p}createPatternCanvas(P){const F=this.operatorList,y=this.bbox,o=this.xstep,p=this.ystep,f=this.paintType,u=this.tilingType,w=this.color,O=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+u);const _=y[0],$=y[1],X=y[2],K=y[3],Q=i.Util.singularValueDecompose2dScale(this.matrix),te=i.Util.singularValueDecompose2dScale(this.baseTransform),ue=[Q[0]*te[0],Q[1]*te[1]],ce=this.getSizeAndScale(o,this.ctx.canvas.width,ue[0]),de=this.getSizeAndScale(p,this.ctx.canvas.height,ue[1]),me=P.cachedCanvases.getCanvas("pattern",ce.size,de.size,!0),Ee=me.context,Se=O.createCanvasGraphics(Ee);Se.groupLevel=P.groupLevel,this.setFillAndStrokeStyleToContext(Se,f,w);let ve=_,G=$,C=X,R=K;return _<0&&(ve=0,C+=Math.abs(_)),$<0&&(G=0,R+=Math.abs($)),Ee.translate(-(ce.scale*ve),-(de.scale*G)),Se.transform(ce.scale,0,0,de.scale,0,0),Ee.save(),this.clipBbox(Se,ve,G,C,R),Se.baseTransform=(0,r.getCurrentTransform)(Se.ctx),Se.executeOperatorList(F),Se.endDrawing(),{canvas:me.canvas,scaleX:ce.scale,scaleY:de.scale,offsetX:ve,offsetY:G}}getSizeAndScale(P,F,y){P=Math.abs(P);const o=Math.max(d.MAX_PATTERN_SIZE,F);let p=Math.ceil(P*y);return p>=o?p=o:y=p/P,{scale:y,size:p}}clipBbox(P,F,y,o,p){const f=o-F,u=p-y;P.ctx.rect(F,y,f,u),P.current.updateRectMinMax((0,r.getCurrentTransform)(P.ctx),[F,y,o,p]),P.clip(),P.endPath()}setFillAndStrokeStyleToContext(P,F,y){const o=P.ctx,p=P.current;switch(F){case g.COLORED:const f=this.ctx;o.fillStyle=f.fillStyle,o.strokeStyle=f.strokeStyle,p.fillColor=f.fillStyle,p.strokeColor=f.strokeStyle;break;case g.UNCOLORED:const u=i.Util.makeHexColor(y[0],y[1],y[2]);o.fillStyle=u,o.strokeStyle=u,p.fillColor=u,p.strokeColor=u;break;default:throw new i.FormatError(`Unsupported paint type: ${F}`)}}getPattern(P,F,y,o){let p=y;o!==s.SHADING&&(p=i.Util.transform(p,F.baseTransform),this.matrix&&(p=i.Util.transform(p,this.matrix)));const f=this.createPatternCanvas(F);let u=new DOMMatrix(p);u=u.translate(f.offsetX,f.offsetY),u=u.scale(1/f.scaleX,1/f.scaleY);const w=P.createPattern(f.canvas,"repeat");return w.setTransform(u),w}};De(d,"MAX_PATTERN_SIZE",3e3);let S=d;t.TilingPattern=S},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=s,t.convertToRGBA=r,t.grayToRGBA=b;var i=n(1);function r(E){switch(E.kind){case i.ImageKind.GRAYSCALE_1BPP:return s(E);case i.ImageKind.RGB_24BPP:return a(E)}return null}function s({src:E,srcPos:l=0,dest:c,width:I,height:x,nonBlackColor:m=4294967295,inverseDecode:g=!1}){const S=i.FeatureTest.isLittleEndian?4278190080:255,[d,T]=g?[m,S]:[S,m],P=I>>3,F=I&7,y=E.length;c=new Uint32Array(c.buffer);let o=0;for(let p=0;p<x;p++){for(const u=l+P;l<u;l++){const w=l<y?E[l]:255;c[o++]=w&128?T:d,c[o++]=w&64?T:d,c[o++]=w&32?T:d,c[o++]=w&16?T:d,c[o++]=w&8?T:d,c[o++]=w&4?T:d,c[o++]=w&2?T:d,c[o++]=w&1?T:d}if(F===0)continue;const f=l<y?E[l++]:255;for(let u=0;u<F;u++)c[o++]=f&1<<7-u?T:d}return{srcPos:l,destPos:o}}function a({src:E,srcPos:l=0,dest:c,destPos:I=0,width:x,height:m}){let g=0;const S=E.length>>2,d=new Uint32Array(E.buffer,l,S);if(i.FeatureTest.isLittleEndian){for(;g<S-2;g+=3,I+=4){const T=d[g],P=d[g+1],F=d[g+2];c[I]=T|4278190080,c[I+1]=T>>>24|P<<8|4278190080,c[I+2]=P>>>16|F<<16|4278190080,c[I+3]=F>>>8|4278190080}for(let T=g*4,P=E.length;T<P;T+=3)c[I++]=E[T]|E[T+1]<<8|E[T+2]<<16|4278190080}else{for(;g<S-2;g+=3,I+=4){const T=d[g],P=d[g+1],F=d[g+2];c[I]=T|255,c[I+1]=T<<24|P>>>8|255,c[I+2]=P<<16|F>>>16|255,c[I+3]=F<<8|255}for(let T=g*4,P=E.length;T<P;T+=3)c[I++]=E[T]<<24|E[T+1]<<16|E[T+2]<<8|255}return{srcPos:l,destPos:I}}function b(E,l){if(i.FeatureTest.isLittleEndian)for(let c=0,I=E.length;c<I;c++)l[c]=E[c]*65793|4278190080;else for(let c=0,I=E.length;c<I;c++)l[c]=E[c]*16843008|255}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const n=Object.create(null);t.GlobalWorkerOptions=n,n.workerPort=null,n.workerSrc=""},(e,t,n)=>{var E,zt,c,jt,x,ot;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var i=n(1);const r={UNKNOWN:0,DATA:1,ERROR:2},s={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function a(g){switch(g instanceof Error||typeof g=="object"&&g!==null||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),g.name){case"AbortException":return new i.AbortException(g.message);case"MissingPDFException":return new i.MissingPDFException(g.message);case"PasswordException":return new i.PasswordException(g.message,g.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(g.message,g.status);case"UnknownErrorException":return new i.UnknownErrorException(g.message,g.details);default:return new i.UnknownErrorException(g.message,g.toString())}}class b{constructor(S,d,T){ee(this,E);ee(this,c);ee(this,x);this.sourceName=S,this.targetName=d,this.comObj=T,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=P=>{const F=P.data;if(F.targetName!==this.sourceName)return;if(F.stream){ie(this,c,jt).call(this,F);return}if(F.callback){const o=F.callbackId,p=this.callbackCapabilities[o];if(!p)throw new Error(`Cannot resolve callback ${o}`);if(delete this.callbackCapabilities[o],F.callback===r.DATA)p.resolve(F.data);else if(F.callback===r.ERROR)p.reject(a(F.reason));else throw new Error("Unexpected callback case");return}const y=this.actionHandler[F.action];if(!y)throw new Error(`Unknown action from worker: ${F.action}`);if(F.callbackId){const o=this.sourceName,p=F.sourceName;new Promise(function(f){f(y(F.data))}).then(function(f){T.postMessage({sourceName:o,targetName:p,callback:r.DATA,callbackId:F.callbackId,data:f})},function(f){T.postMessage({sourceName:o,targetName:p,callback:r.ERROR,callbackId:F.callbackId,reason:a(f)})});return}if(F.streamId){ie(this,E,zt).call(this,F);return}y(F.data)},T.addEventListener("message",this._onComObjOnMessage)}on(S,d){const T=this.actionHandler;if(T[S])throw new Error(`There is already an actionName called "${S}"`);T[S]=d}send(S,d,T){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:S,data:d},T)}sendWithPromise(S,d,T){const P=this.callbackId++,F=new i.PromiseCapability;this.callbackCapabilities[P]=F;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:S,callbackId:P,data:d},T)}catch(y){F.reject(y)}return F.promise}sendWithStream(S,d,T,P){const F=this.streamId++,y=this.sourceName,o=this.targetName,p=this.comObj;return new ReadableStream({start:f=>{const u=new i.PromiseCapability;return this.streamControllers[F]={controller:f,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},p.postMessage({sourceName:y,targetName:o,action:S,streamId:F,data:d,desiredSize:f.desiredSize},P),u.promise},pull:f=>{const u=new i.PromiseCapability;return this.streamControllers[F].pullCall=u,p.postMessage({sourceName:y,targetName:o,stream:s.PULL,streamId:F,desiredSize:f.desiredSize}),u.promise},cancel:f=>{(0,i.assert)(f instanceof Error,"cancel must have a valid reason");const u=new i.PromiseCapability;return this.streamControllers[F].cancelCall=u,this.streamControllers[F].isClosed=!0,p.postMessage({sourceName:y,targetName:o,stream:s.CANCEL,streamId:F,reason:a(f)}),u.promise}},T)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}E=new WeakSet,zt=function(S){const d=S.streamId,T=this.sourceName,P=S.sourceName,F=this.comObj,y=this,o=this.actionHandler[S.action],p={enqueue(f,u=1,w){if(this.isCancelled)return;const O=this.desiredSize;this.desiredSize-=u,O>0&&this.desiredSize<=0&&(this.sinkCapability=new i.PromiseCapability,this.ready=this.sinkCapability.promise),F.postMessage({sourceName:T,targetName:P,stream:s.ENQUEUE,streamId:d,chunk:f},w)},close(){this.isCancelled||(this.isCancelled=!0,F.postMessage({sourceName:T,targetName:P,stream:s.CLOSE,streamId:d}),delete y.streamSinks[d])},error(f){(0,i.assert)(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,F.postMessage({sourceName:T,targetName:P,stream:s.ERROR,streamId:d,reason:a(f)}))},sinkCapability:new i.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:S.desiredSize,ready:null};p.sinkCapability.resolve(),p.ready=p.sinkCapability.promise,this.streamSinks[d]=p,new Promise(function(f){f(o(S.data,p))}).then(function(){F.postMessage({sourceName:T,targetName:P,stream:s.START_COMPLETE,streamId:d,success:!0})},function(f){F.postMessage({sourceName:T,targetName:P,stream:s.START_COMPLETE,streamId:d,reason:a(f)})})},c=new WeakSet,jt=function(S){const d=S.streamId,T=this.sourceName,P=S.sourceName,F=this.comObj,y=this.streamControllers[d],o=this.streamSinks[d];switch(S.stream){case s.START_COMPLETE:S.success?y.startCall.resolve():y.startCall.reject(a(S.reason));break;case s.PULL_COMPLETE:S.success?y.pullCall.resolve():y.pullCall.reject(a(S.reason));break;case s.PULL:if(!o){F.postMessage({sourceName:T,targetName:P,stream:s.PULL_COMPLETE,streamId:d,success:!0});break}o.desiredSize<=0&&S.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=S.desiredSize,new Promise(function(p){var f;p((f=o.onPull)==null?void 0:f.call(o))}).then(function(){F.postMessage({sourceName:T,targetName:P,stream:s.PULL_COMPLETE,streamId:d,success:!0})},function(p){F.postMessage({sourceName:T,targetName:P,stream:s.PULL_COMPLETE,streamId:d,reason:a(p)})});break;case s.ENQUEUE:if((0,i.assert)(y,"enqueue should have stream controller"),y.isClosed)break;y.controller.enqueue(S.chunk);break;case s.CLOSE:if((0,i.assert)(y,"close should have stream controller"),y.isClosed)break;y.isClosed=!0,y.controller.close(),ie(this,x,ot).call(this,y,d);break;case s.ERROR:(0,i.assert)(y,"error should have stream controller"),y.controller.error(a(S.reason)),ie(this,x,ot).call(this,y,d);break;case s.CANCEL_COMPLETE:S.success?y.cancelCall.resolve():y.cancelCall.reject(a(S.reason)),ie(this,x,ot).call(this,y,d);break;case s.CANCEL:if(!o)break;new Promise(function(p){var f;p((f=o.onCancel)==null?void 0:f.call(o,a(S.reason)))}).then(function(){F.postMessage({sourceName:T,targetName:P,stream:s.CANCEL_COMPLETE,streamId:d,success:!0})},function(p){F.postMessage({sourceName:T,targetName:P,stream:s.CANCEL_COMPLETE,streamId:d,reason:a(p)})}),o.sinkCapability.reject(a(S.reason)),o.isCancelled=!0,delete this.streamSinks[d];break;default:throw new Error("Unexpected stream case")}},x=new WeakSet,ot=async function(S,d){var T,P,F;await Promise.allSettled([(T=S.startCall)==null?void 0:T.promise,(P=S.pullCall)==null?void 0:P.promise,(F=S.cancelCall)==null?void 0:F.promise]),delete this.streamControllers[d]},t.MessageHandler=b},(e,t,n)=>{var s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var i=n(1);class r{constructor({parsedData:E,rawData:l}){ee(this,s,void 0);ee(this,a,void 0);ge(this,s,E),ge(this,a,l)}getRaw(){return k(this,a)}get(E){return k(this,s).get(E)??null}getAll(){return(0,i.objectFromMap)(k(this,s))}has(E){return k(this,s).has(E)}}s=new WeakMap,a=new WeakMap,t.Metadata=r},(e,t,n)=>{var E,l,c,I,x,m,At;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var i=n(1),r=n(8);const s=Symbol("INTERNAL");class a{constructor(d,T){ee(this,E,!0);this.name=d,this.intent=T}get visible(){return k(this,E)}_setVisible(d,T){d!==s&&(0,i.unreachable)("Internal method `_setVisible` called."),ge(this,E,T)}}E=new WeakMap;class b{constructor(d){ee(this,m);ee(this,l,null);ee(this,c,new Map);ee(this,I,null);ee(this,x,null);if(this.name=null,this.creator=null,d!==null){this.name=d.name,this.creator=d.creator,ge(this,x,d.order);for(const T of d.groups)k(this,c).set(T.id,new a(T.name,T.intent));if(d.baseState==="OFF")for(const T of k(this,c).values())T._setVisible(s,!1);for(const T of d.on)k(this,c).get(T)._setVisible(s,!0);for(const T of d.off)k(this,c).get(T)._setVisible(s,!1);ge(this,I,this.getHash())}}isVisible(d){if(k(this,c).size===0)return!0;if(!d)return(0,i.warn)("Optional content group not defined."),!0;if(d.type==="OCG")return k(this,c).has(d.id)?k(this,c).get(d.id).visible:((0,i.warn)(`Optional content group not found: ${d.id}`),!0);if(d.type==="OCMD"){if(d.expression)return ie(this,m,At).call(this,d.expression);if(!d.policy||d.policy==="AnyOn"){for(const T of d.ids){if(!k(this,c).has(T))return(0,i.warn)(`Optional content group not found: ${T}`),!0;if(k(this,c).get(T).visible)return!0}return!1}else if(d.policy==="AllOn"){for(const T of d.ids){if(!k(this,c).has(T))return(0,i.warn)(`Optional content group not found: ${T}`),!0;if(!k(this,c).get(T).visible)return!1}return!0}else if(d.policy==="AnyOff"){for(const T of d.ids){if(!k(this,c).has(T))return(0,i.warn)(`Optional content group not found: ${T}`),!0;if(!k(this,c).get(T).visible)return!0}return!1}else if(d.policy==="AllOff"){for(const T of d.ids){if(!k(this,c).has(T))return(0,i.warn)(`Optional content group not found: ${T}`),!0;if(k(this,c).get(T).visible)return!1}return!0}return(0,i.warn)(`Unknown optional content policy ${d.policy}.`),!0}return(0,i.warn)(`Unknown group type ${d.type}.`),!0}setVisibility(d,T=!0){if(!k(this,c).has(d)){(0,i.warn)(`Optional content group not found: ${d}`);return}k(this,c).get(d)._setVisible(s,!!T),ge(this,l,null)}get hasInitialVisibility(){return this.getHash()===k(this,I)}getOrder(){return k(this,c).size?k(this,x)?k(this,x).slice():[...k(this,c).keys()]:null}getGroups(){return k(this,c).size>0?(0,i.objectFromMap)(k(this,c)):null}getGroup(d){return k(this,c).get(d)||null}getHash(){if(k(this,l)!==null)return k(this,l);const d=new r.MurmurHash3_64;for(const[T,P]of k(this,c))d.update(`${T}:${P.visible}`);return ge(this,l,d.hexdigest())}}l=new WeakMap,c=new WeakMap,I=new WeakMap,x=new WeakMap,m=new WeakSet,At=function(d){const T=d.length;if(T<2)return!0;const P=d[0];for(let F=1;F<T;F++){const y=d[F];let o;if(Array.isArray(y))o=ie(this,m,At).call(this,y);else if(k(this,c).has(y))o=k(this,c).get(y).visible;else return(0,i.warn)(`Optional content group not found: ${y}`),!0;switch(P){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return P==="And"},t.OptionalContentConfig=b},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var i=n(1),r=n(6);class s{constructor({length:l,initialData:c,progressiveDone:I=!1,contentDispositionFilename:x=null,disableRange:m=!1,disableStream:g=!1},S){if((0,i.assert)(S,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=I,this._contentDispositionFilename=x,(c==null?void 0:c.length)>0){const d=c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength?c.buffer:new Uint8Array(c).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=S,this._isStreamingSupported=!g,this._isRangeSupported=!m,this._contentLength=l,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((d,T)=>{this._onReceiveData({begin:d,chunk:T})}),this._pdfDataRangeTransport.addProgressListener((d,T)=>{this._onProgress({loaded:d,total:T})}),this._pdfDataRangeTransport.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:l,chunk:c}){const I=c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength?c.buffer:new Uint8Array(c).buffer;if(l===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(I):this._queuedChunks.push(I);else{const x=this._rangeReaders.some(function(m){return m._begin!==l?!1:(m._enqueue(I),!0)});(0,i.assert)(x,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var l;return((l=this._fullRequestReader)==null?void 0:l._loaded)??0}_onProgress(l){var c,I,x,m;l.total===void 0?(I=(c=this._rangeReaders[0])==null?void 0:c.onProgress)==null||I.call(c,{loaded:l.loaded}):(m=(x=this._fullRequestReader)==null?void 0:x.onProgress)==null||m.call(x,{loaded:l.loaded,total:l.total})}_onProgressiveDone(){var l;(l=this._fullRequestReader)==null||l.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(l){const c=this._rangeReaders.indexOf(l);c>=0&&this._rangeReaders.splice(c,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const l=this._queuedChunks;return this._queuedChunks=null,new a(this,l,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(l,c){if(c<=this._progressiveDataLength)return null;const I=new b(this,l,c);return this._pdfDataRangeTransport.requestDataRange(l,c),this._rangeReaders.push(I),I}cancelAllRequests(l){var c;(c=this._fullRequestReader)==null||c.cancel(l);for(const I of this._rangeReaders.slice(0))I.cancel(l);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=s;class a{constructor(l,c,I=!1,x=null){this._stream=l,this._done=I||!1,this._filename=(0,r.isPdfFile)(x)?x:null,this._queuedChunks=c||[],this._loaded=0;for(const m of this._queuedChunks)this._loaded+=m.byteLength;this._requests=[],this._headersReady=Promise.resolve(),l._fullRequestReader=this,this.onProgress=null}_enqueue(l){this._done||(this._requests.length>0?this._requests.shift().resolve({value:l,done:!1}):this._queuedChunks.push(l),this._loaded+=l.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const l=new i.PromiseCapability;return this._requests.push(l),l.promise}cancel(l){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class b{constructor(l,c,I){this._stream=l,this._begin=c,this._end=I,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(l){if(!this._done){if(this._requests.length===0)this._queuedChunk=l;else{this._requests.shift().resolve({value:l,done:!1});for(const I of this._requests)I.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const c=this._queuedChunk;return this._queuedChunk=null,{value:c,done:!1}}if(this._done)return{value:void 0,done:!0};const l=new i.PromiseCapability;return this._requests.push(l),l.promise}cancel(l){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class n{static textContent(r){const s=[],a={items:s,styles:Object.create(null)};function b(E){var I;if(!E)return;let l=null;const c=E.name;if(c==="#text")l=E.value;else if(n.shouldBuildText(c))(I=E==null?void 0:E.attributes)!=null&&I.textContent?l=E.attributes.textContent:E.value&&(l=E.value);else return;if(l!==null&&s.push({str:l}),!!E.children)for(const x of E.children)b(x)}return b(r),a}static shouldBuildText(r){return!(r==="textarea"||r==="input"||r==="option"||r==="select")}}t.XfaText=n},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var i=n(7);const r=function(l){return new Promise((c,I)=>{require$$0.readFile(l,(m,g)=>{if(m||!g){I(new Error(m));return}c(new Uint8Array(g))})})};class s extends i.BaseFilterFactory{}t.NodeFilterFactory=s;class a extends i.BaseCanvasFactory{_createCanvas(c,I){return require$$1.createCanvas(c,I)}}t.NodeCanvasFactory=a;class b extends i.BaseCMapReaderFactory{_fetchData(c,I){return r(c).then(x=>({cMapData:x,compressionType:I}))}}t.NodeCMapReaderFactory=b;class E extends i.BaseStandardFontDataFactory{_fetchData(c){return r(c)}}t.NodeStandardFontDataFactory=E},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var i=n(1),r=n(22);const s=require$$0,a=require$$2,b=require$$3,E=require$$4,l=/^file:\/\/\/[a-zA-Z]:\//;function c(F){const y=E.parse(F);return y.protocol==="file:"||y.host?y:/^[a-z]:[/\\]/i.test(F)?E.parse(`file:///${F}`):(y.host||(y.protocol="file:"),y)}class I{constructor(y){this.source=y,this.url=c(y.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&y.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var y;return((y=this._fullRequestReader)==null?void 0:y._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new T(this):new S(this),this._fullRequestReader}getRangeReader(y,o){if(o<=this._progressiveDataLength)return null;const p=this.isFsUrl?new P(this,y,o):new d(this,y,o);return this._rangeRequestReaders.push(p),p}cancelAllRequests(y){var o;(o=this._fullRequestReader)==null||o.cancel(y);for(const p of this._rangeRequestReaders.slice(0))p.cancel(y)}}t.PDFNodeStream=I;class x{constructor(y){this._url=y.url,this._done=!1,this._storedError=null,this.onProgress=null;const o=y.source;this._contentLength=o.length,this._loaded=0,this._filename=null,this._disableRange=o.disableRange||!1,this._rangeChunkSize=o.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!o.disableStream,this._isRangeSupported=!o.disableRange,this._readableStream=null,this._readCapability=new i.PromiseCapability,this._headersCapability=new i.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var p;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const y=this._readableStream.read();return y===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=y.length,(p=this.onProgress)==null||p.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(y).buffer,done:!1})}cancel(y){if(!this._readableStream){this._error(y);return}this._readableStream.destroy(y)}_error(y){this._storedError=y,this._readCapability.resolve()}_setReadableStream(y){this._readableStream=y,y.on("readable",()=>{this._readCapability.resolve()}),y.on("end",()=>{y.destroy(),this._done=!0,this._readCapability.resolve()}),y.on("error",o=>{this._error(o)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class m{constructor(y){this._url=y.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new i.PromiseCapability;const o=y.source;this._isStreamingSupported=!o.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var p;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const y=this._readableStream.read();return y===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=y.length,(p=this.onProgress)==null||p.call(this,{loaded:this._loaded}),{value:new Uint8Array(y).buffer,done:!1})}cancel(y){if(!this._readableStream){this._error(y);return}this._readableStream.destroy(y)}_error(y){this._storedError=y,this._readCapability.resolve()}_setReadableStream(y){this._readableStream=y,y.on("readable",()=>{this._readCapability.resolve()}),y.on("end",()=>{y.destroy(),this._done=!0,this._readCapability.resolve()}),y.on("error",o=>{this._error(o)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function g(F,y){return{protocol:F.protocol,auth:F.auth,host:F.hostname,port:F.port,path:F.path,method:"GET",headers:y}}class S extends x{constructor(y){super(y);const o=p=>{if(p.statusCode===404){const O=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=O,this._headersCapability.reject(O);return}this._headersCapability.resolve(),this._setReadableStream(p);const f=O=>this._readableStream.headers[O.toLowerCase()],{allowRangeRequests:u,suggestedLength:w}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:f,isHttp:y.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=w||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(f)};this._request=null,this._url.protocol==="http:"?this._request=a.request(g(this._url,y.httpHeaders),o):this._request=b.request(g(this._url,y.httpHeaders),o),this._request.on("error",p=>{this._storedError=p,this._headersCapability.reject(p)}),this._request.end()}}class d extends m{constructor(y,o,p){super(y),this._httpHeaders={};for(const u in y.httpHeaders){const w=y.httpHeaders[u];w!==void 0&&(this._httpHeaders[u]=w)}this._httpHeaders.Range=`bytes=${o}-${p-1}`;const f=u=>{if(u.statusCode===404){const w=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=w;return}this._setReadableStream(u)};this._request=null,this._url.protocol==="http:"?this._request=a.request(g(this._url,this._httpHeaders),f):this._request=b.request(g(this._url,this._httpHeaders),f),this._request.on("error",u=>{this._storedError=u}),this._request.end()}}class T extends x{constructor(y){super(y);let o=decodeURIComponent(this._url.path);l.test(this._url.href)&&(o=o.replace(/^\//,"")),s.lstat(o,(p,f)=>{if(p){p.code==="ENOENT"&&(p=new i.MissingPDFException(`Missing PDF "${o}".`)),this._storedError=p,this._headersCapability.reject(p);return}this._contentLength=f.size,this._setReadableStream(s.createReadStream(o)),this._headersCapability.resolve()})}}class P extends m{constructor(y,o,p){super(y);let f=decodeURIComponent(this._url.path);l.test(this._url.href)&&(f=f.replace(/^\//,"")),this._setReadableStream(s.createReadStream(f,{start:o,end:p-1}))}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=E,t.extractFilenameFromHeader=b,t.validateRangeRequestCapabilities=a,t.validateResponseStatus=l;var i=n(1),r=n(23),s=n(6);function a({getResponseHeader:c,isHttp:I,rangeChunkSize:x,disableRange:m}){const g={allowRangeRequests:!1,suggestedLength:void 0},S=parseInt(c("Content-Length"),10);return!Number.isInteger(S)||(g.suggestedLength=S,S<=2*x)||m||!I||c("Accept-Ranges")!=="bytes"||(c("Content-Encoding")||"identity")!=="identity"||(g.allowRangeRequests=!0),g}function b(c){const I=c("Content-Disposition");if(I){let x=(0,r.getFilenameFromContentDispositionHeader)(I);if(x.includes("%"))try{x=decodeURIComponent(x)}catch{}if((0,s.isPdfFile)(x))return x}return null}function E(c,I){return c===404||c===0&&I.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+I+'".'):new i.UnexpectedResponseException(`Unexpected server response (${c}) while retrieving PDF "${I}".`,c)}function l(c){return c===200||c===206}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=r;var i=n(1);function r(s){let a=!0,b=E("filename\\*","i").exec(s);if(b){b=b[1];let S=x(b);return S=unescape(S),S=m(S),S=g(S),c(S)}if(b=I(s),b){const S=g(b);return c(S)}if(b=E("filename","i").exec(s),b){b=b[1];let S=x(b);return S=g(S),c(S)}function E(S,d){return new RegExp("(?:^|;)\\s*"+S+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function l(S,d){if(S){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const T=new TextDecoder(S,{fatal:!0}),P=(0,i.stringToBytes)(d);d=T.decode(P),a=!1}catch{}}return d}function c(S){return a&&/[\x80-\xff]/.test(S)&&(S=l("utf-8",S),a&&(S=l("iso-8859-1",S))),S}function I(S){const d=[];let T;const P=E("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(T=P.exec(S))!==null;){let[,y,o,p]=T;if(y=parseInt(y,10),y in d){if(y===0)break;continue}d[y]=[o,p]}const F=[];for(let y=0;y<d.length&&y in d;++y){let[o,p]=d[y];p=x(p),o&&(p=unescape(p),y===0&&(p=m(p))),F.push(p)}return F.join("")}function x(S){if(S.startsWith('"')){const d=S.slice(1).split('\\"');for(let T=0;T<d.length;++T){const P=d[T].indexOf('"');P!==-1&&(d[T]=d[T].slice(0,P),d.length=T+1),d[T]=d[T].replaceAll(/\\(.)/g,"$1")}S=d.join('"')}return S}function m(S){const d=S.indexOf("'");if(d===-1)return S;const T=S.slice(0,d),F=S.slice(d+1).replace(/^[^']*'/,"");return l(T,F)}function g(S){return!S.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(S)?S:S.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,T,P,F){if(P==="q"||P==="Q")return F=F.replaceAll("_"," "),F=F.replaceAll(/=([0-9a-fA-F]{2})/g,function(y,o){return String.fromCharCode(parseInt(o,16))}),l(T,F);try{F=atob(F)}catch{}return l(T,F)})}return""}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var i=n(1),r=n(22);const s=200,a=206;function b(x){const m=x.response;return typeof m!="string"?m:(0,i.stringToBytes)(m).buffer}class E{constructor(m,g={}){this.url=m,this.isHttp=/^https?:/i.test(m),this.httpHeaders=this.isHttp&&g.httpHeaders||Object.create(null),this.withCredentials=g.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(m,g,S){const d={begin:m,end:g};for(const T in S)d[T]=S[T];return this.request(d)}requestFull(m){return this.request(m)}request(m){const g=new XMLHttpRequest,S=this.currXhrId++,d=this.pendingRequests[S]={xhr:g};g.open("GET",this.url),g.withCredentials=this.withCredentials;for(const T in this.httpHeaders){const P=this.httpHeaders[T];P!==void 0&&g.setRequestHeader(T,P)}return this.isHttp&&"begin"in m&&"end"in m?(g.setRequestHeader("Range",`bytes=${m.begin}-${m.end-1}`),d.expectedStatus=a):d.expectedStatus=s,g.responseType="arraybuffer",m.onError&&(g.onerror=function(T){m.onError(g.status)}),g.onreadystatechange=this.onStateChange.bind(this,S),g.onprogress=this.onProgress.bind(this,S),d.onHeadersReceived=m.onHeadersReceived,d.onDone=m.onDone,d.onError=m.onError,d.onProgress=m.onProgress,g.send(null),S}onProgress(m,g){var d;const S=this.pendingRequests[m];S&&((d=S.onProgress)==null||d.call(S,g))}onStateChange(m,g){var y,o,p;const S=this.pendingRequests[m];if(!S)return;const d=S.xhr;if(d.readyState>=2&&S.onHeadersReceived&&(S.onHeadersReceived(),delete S.onHeadersReceived),d.readyState!==4||!(m in this.pendingRequests))return;if(delete this.pendingRequests[m],d.status===0&&this.isHttp){(y=S.onError)==null||y.call(S,d.status);return}const T=d.status||s;if(!(T===s&&S.expectedStatus===a)&&T!==S.expectedStatus){(o=S.onError)==null||o.call(S,d.status);return}const F=b(d);if(T===a){const f=d.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);S.onDone({begin:parseInt(u[1],10),chunk:F})}else F?S.onDone({begin:0,chunk:F}):(p=S.onError)==null||p.call(S,d.status)}getRequestXhr(m){return this.pendingRequests[m].xhr}isPendingRequest(m){return m in this.pendingRequests}abortRequest(m){const g=this.pendingRequests[m].xhr;delete this.pendingRequests[m],g.abort()}}class l{constructor(m){this._source=m,this._manager=new E(m.url,{httpHeaders:m.httpHeaders,withCredentials:m.withCredentials}),this._rangeChunkSize=m.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(m){const g=this._rangeRequestReaders.indexOf(m);g>=0&&this._rangeRequestReaders.splice(g,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new c(this._manager,this._source),this._fullRequestReader}getRangeReader(m,g){const S=new I(this._manager,m,g);return S.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(S),S}cancelAllRequests(m){var g;(g=this._fullRequestReader)==null||g.cancel(m);for(const S of this._rangeRequestReaders.slice(0))S.cancel(m)}}t.PDFNetworkStream=l;class c{constructor(m,g){this._manager=m;const S={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=g.url,this._fullRequestId=m.requestFull(S),this._headersReceivedCapability=new i.PromiseCapability,this._disableRange=g.disableRange||!1,this._contentLength=g.length,this._rangeChunkSize=g.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const m=this._fullRequestId,g=this._manager.getRequestXhr(m),S=P=>g.getResponseHeader(P),{allowRangeRequests:d,suggestedLength:T}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:S,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});d&&(this._isRangeSupported=!0),this._contentLength=T||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(S),this._isRangeSupported&&this._manager.abortRequest(m),this._headersReceivedCapability.resolve()}_onDone(m){if(m&&(this._requests.length>0?this._requests.shift().resolve({value:m.chunk,done:!1}):this._cachedChunks.push(m.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(m){this._storedError=(0,r.createResponseStatusError)(m,this._url),this._headersReceivedCapability.reject(this._storedError);for(const g of this._requests)g.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(m){var g;(g=this.onProgress)==null||g.call(this,{loaded:m.loaded,total:m.lengthComputable?m.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const m=new i.PromiseCapability;return this._requests.push(m),m.promise}cancel(m){this._done=!0,this._headersReceivedCapability.reject(m);for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class I{constructor(m,g,S){this._manager=m;const d={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=m.url,this._requestId=m.requestRange(g,S,d),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var m;(m=this.onClosed)==null||m.call(this,this)}_onDone(m){const g=m.chunk;this._requests.length>0?this._requests.shift().resolve({value:g,done:!1}):this._queuedChunk=g,this._done=!0;for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(m){this._storedError=(0,r.createResponseStatusError)(m,this._url);for(const g of this._requests)g.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(m){var g;this.isStreamingSupported||(g=this.onProgress)==null||g.call(this,{loaded:m.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const g=this._queuedChunk;return this._queuedChunk=null,{value:g,done:!1}}if(this._done)return{value:void 0,done:!0};const m=new i.PromiseCapability;return this._requests.push(m),m.promise}cancel(m){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var i=n(1),r=n(22);function s(I,x,m){return{method:"GET",headers:I,signal:m.signal,mode:"cors",credentials:x?"include":"same-origin",redirect:"follow"}}function a(I){const x=new Headers;for(const m in I){const g=I[m];g!==void 0&&x.append(m,g)}return x}function b(I){return I instanceof Uint8Array?I.buffer:I instanceof ArrayBuffer?I:((0,i.warn)(`getArrayBuffer - unexpected data format: ${I}`),new Uint8Array(I).buffer)}class E{constructor(x){this.source=x,this.isHttp=/^https?:/i.test(x.url),this.httpHeaders=this.isHttp&&x.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var x;return((x=this._fullRequestReader)==null?void 0:x._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new l(this),this._fullRequestReader}getRangeReader(x,m){if(m<=this._progressiveDataLength)return null;const g=new c(this,x,m);return this._rangeRequestReaders.push(g),g}cancelAllRequests(x){var m;(m=this._fullRequestReader)==null||m.cancel(x);for(const g of this._rangeRequestReaders.slice(0))g.cancel(x)}}t.PDFFetchStream=E;class l{constructor(x){this._stream=x,this._reader=null,this._loaded=0,this._filename=null;const m=x.source;this._withCredentials=m.withCredentials||!1,this._contentLength=m.length,this._headersCapability=new i.PromiseCapability,this._disableRange=m.disableRange||!1,this._rangeChunkSize=m.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!m.disableStream,this._isRangeSupported=!m.disableRange,this._headers=a(this._stream.httpHeaders);const g=m.url;fetch(g,s(this._headers,this._withCredentials,this._abortController)).then(S=>{if(!(0,r.validateResponseStatus)(S.status))throw(0,r.createResponseStatusError)(S.status,g);this._reader=S.body.getReader(),this._headersCapability.resolve();const d=F=>S.headers.get(F),{allowRangeRequests:T,suggestedLength:P}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:d,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=T,this._contentLength=P||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(d),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var g;await this._headersCapability.promise;const{value:x,done:m}=await this._reader.read();return m?{value:x,done:m}:(this._loaded+=x.byteLength,(g=this.onProgress)==null||g.call(this,{loaded:this._loaded,total:this._contentLength}),{value:b(x),done:!1})}cancel(x){var m;(m=this._reader)==null||m.cancel(x),this._abortController.abort()}}class c{constructor(x,m,g){this._stream=x,this._reader=null,this._loaded=0;const S=x.source;this._withCredentials=S.withCredentials||!1,this._readCapability=new i.PromiseCapability,this._isStreamingSupported=!S.disableStream,this._abortController=new AbortController,this._headers=a(this._stream.httpHeaders),this._headers.append("Range",`bytes=${m}-${g-1}`);const d=S.url;fetch(d,s(this._headers,this._withCredentials,this._abortController)).then(T=>{if(!(0,r.validateResponseStatus)(T.status))throw(0,r.createResponseStatusError)(T.status,d);this._readCapability.resolve(),this._reader=T.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var g;await this._readCapability.promise;const{value:x,done:m}=await this._reader.read();return m?{value:x,done:m}:(this._loaded+=x.byteLength,(g=this.onProgress)==null||g.call(this,{loaded:this._loaded}),{value:b(x),done:!1})}cancel(x){var m;(m=this._reader)==null||m.cancel(x),this._abortController.abort()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=S,t.updateTextLayer=d;var i=n(1),r=n(6);const s=1e5,a=30,b=.8,E=new Map;function l(T,P){let F;if(P&&i.FeatureTest.isOffscreenCanvasSupported)F=new OffscreenCanvas(T,T).getContext("2d",{alpha:!1});else{const y=document.createElement("canvas");y.width=y.height=T,F=y.getContext("2d",{alpha:!1})}return F}function c(T,P){const F=E.get(T);if(F)return F;const y=l(a,P);y.font=`${a}px ${T}`;const o=y.measureText("");let p=o.fontBoundingBoxAscent,f=Math.abs(o.fontBoundingBoxDescent);if(p){const w=p/(p+f);return E.set(T,w),y.canvas.width=y.canvas.height=0,w}y.strokeStyle="red",y.clearRect(0,0,a,a),y.strokeText("g",0,0);let u=y.getImageData(0,0,a,a).data;f=0;for(let w=u.length-1-3;w>=0;w-=4)if(u[w]>0){f=Math.ceil(w/4/a);break}y.clearRect(0,0,a,a),y.strokeText("A",0,a),u=y.getImageData(0,0,a,a).data,p=0;for(let w=0,O=u.length;w<O;w+=4)if(u[w]>0){p=a-Math.floor(w/4/a);break}if(y.canvas.width=y.canvas.height=0,p){const w=p/(p+f);return E.set(T,w),w}return E.set(T,b),b}function I(T,P,F){const y=document.createElement("span"),o={angle:0,canvasWidth:0,hasText:P.str!=="",hasEOL:P.hasEOL,fontSize:0};T._textDivs.push(y);const p=i.Util.transform(T._transform,P.transform);let f=Math.atan2(p[1],p[0]);const u=F[P.fontName];u.vertical&&(f+=Math.PI/2);const w=Math.hypot(p[2],p[3]),O=w*c(u.fontFamily,T._isOffscreenCanvasSupported);let _,$;f===0?(_=p[4],$=p[5]-O):(_=p[4]+O*Math.sin(f),$=p[5]-O*Math.cos(f));const X="calc(var(--scale-factor)*",K=y.style;T._container===T._rootContainer?(K.left=`${(100*_/T._pageWidth).toFixed(2)}%`,K.top=`${(100*$/T._pageHeight).toFixed(2)}%`):(K.left=`${X}${_.toFixed(2)}px)`,K.top=`${X}${$.toFixed(2)}px)`),K.fontSize=`${X}${w.toFixed(2)}px)`,K.fontFamily=u.fontFamily,o.fontSize=w,y.setAttribute("role","presentation"),y.textContent=P.str,y.dir=P.dir,T._fontInspectorEnabled&&(y.dataset.fontName=P.fontName),f!==0&&(o.angle=f*(180/Math.PI));let Q=!1;if(P.str.length>1)Q=!0;else if(P.str!==" "&&P.transform[0]!==P.transform[3]){const te=Math.abs(P.transform[0]),ue=Math.abs(P.transform[3]);te!==ue&&Math.max(te,ue)/Math.min(te,ue)>1.5&&(Q=!0)}Q&&(o.canvasWidth=u.vertical?P.height:P.width),T._textDivProperties.set(y,o),T._isReadableStream&&T._layoutText(y)}function x(T){const{div:P,scale:F,properties:y,ctx:o,prevFontSize:p,prevFontFamily:f}=T,{style:u}=P;let w="";if(y.canvasWidth!==0&&y.hasText){const{fontFamily:O}=u,{canvasWidth:_,fontSize:$}=y;(p!==$||f!==O)&&(o.font=`${$*F}px ${O}`,T.prevFontSize=$,T.prevFontFamily=O);const{width:X}=o.measureText(P.textContent);X>0&&(w=`scaleX(${_*F/X})`)}y.angle!==0&&(w=`rotate(${y.angle}deg) ${w}`),w.length>0&&(u.transform=w)}function m(T){if(T._canceled)return;const P=T._textDivs,F=T._capability;if(P.length>s){F.resolve();return}if(!T._isReadableStream)for(const o of P)T._layoutText(o);F.resolve()}class g{constructor({textContentSource:P,container:F,viewport:y,textDivs:o,textDivProperties:p,textContentItemsStr:f,isOffscreenCanvasSupported:u}){var X;this._textContentSource=P,this._isReadableStream=P instanceof ReadableStream,this._container=this._rootContainer=F,this._textDivs=o||[],this._textContentItemsStr=f||[],this._isOffscreenCanvasSupported=u,this._fontInspectorEnabled=!!((X=globalThis.FontInspector)!=null&&X.enabled),this._reader=null,this._textDivProperties=p||new WeakMap,this._canceled=!1,this._capability=new i.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:y.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:l(0,u)};const{pageWidth:w,pageHeight:O,pageX:_,pageY:$}=y.rawDims;this._transform=[1,0,0,-1,-_,$+O],this._pageWidth=w,this._pageHeight=O,(0,r.setLayerDimensions)(F,y),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new i.AbortException("TextLayer task cancelled."))}_processItems(P,F){for(const y of P){if(y.str===void 0){if(y.type==="beginMarkedContentProps"||y.type==="beginMarkedContent"){const o=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),y.id!==null&&this._container.setAttribute("id",`${y.id}`),o.append(this._container)}else y.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(y.str),I(this,y,F)}}_layoutText(P){const F=this._layoutTextParams.properties=this._textDivProperties.get(P);if(this._layoutTextParams.div=P,x(this._layoutTextParams),F.hasText&&this._container.append(P),F.hasEOL){const y=document.createElement("br");y.setAttribute("role","presentation"),this._container.append(y)}}_render(){const P=new i.PromiseCapability;let F=Object.create(null);if(this._isReadableStream){const y=()=>{this._reader.read().then(({value:o,done:p})=>{if(p){P.resolve();return}Object.assign(F,o.styles),this._processItems(o.items,F),y()},P.reject)};this._reader=this._textContentSource.getReader(),y()}else if(this._textContentSource){const{items:y,styles:o}=this._textContentSource;this._processItems(y,o),P.resolve()}else throw new Error('No "textContentSource" parameter specified.');P.promise.then(()=>{F=null,m(this)},this._capability.reject)}}t.TextLayerRenderTask=g;function S(T){!T.textContentSource&&(T.textContent||T.textContentStream)&&((0,r.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),T.textContentSource=T.textContent||T.textContentStream);const{container:P,viewport:F}=T,y=getComputedStyle(P),o=y.getPropertyValue("visibility"),p=parseFloat(y.getPropertyValue("--scale-factor"));o==="visible"&&(!p||Math.abs(p-F.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const f=new g(T);return f._render(),f}function d({container:T,viewport:P,textDivs:F,textDivProperties:y,isOffscreenCanvasSupported:o,mustRotate:p=!0,mustRescale:f=!0}){if(p&&(0,r.setLayerDimensions)(T,{rotation:P.rotation}),f){const u=l(0,o),O={prevFontSize:null,prevFontFamily:null,div:null,scale:P.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:u};for(const _ of F)O.properties=y.get(_),O.div=_,x(O)}}},(e,t,n)=>{var l,c,I,x,m,g,S,d,T,yt,F,Wt,o,Et,f,St;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var i=n(1),r=n(5),s=n(28),a=n(29),b=n(6);const w=class w{constructor(_){ee(this,T);ee(this,F);ee(this,o);ee(this,f);ee(this,l,void 0);ee(this,c,!1);ee(this,I,this.pointerup.bind(this));ee(this,x,this.pointerdown.bind(this));ee(this,m,new Map);ee(this,g,!1);ee(this,S,!1);ee(this,d,void 0);w._initialized||(w._initialized=!0,s.FreeTextEditor.initialize(_.l10n),a.InkEditor.initialize(_.l10n)),_.uiManager.registerEditorTypes([s.FreeTextEditor,a.InkEditor]),ge(this,d,_.uiManager),this.pageIndex=_.pageIndex,this.div=_.div,ge(this,l,_.accessibilityManager),k(this,d).addLayer(this)}get isEmpty(){return k(this,m).size===0}updateToolbar(_){k(this,d).updateToolbar(_)}updateMode(_=k(this,d).getMode()){ie(this,f,St).call(this),_===i.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),k(this,d).unselectAll(),_!==i.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",_===i.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",_===i.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(_){if(!_&&k(this,d).getMode()!==i.AnnotationEditorType.INK)return;if(!_){for(const X of k(this,m).values())if(X.isEmpty()){X.setInBackground();return}}ie(this,o,Et).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(_){k(this,d).setEditingState(_)}addCommands(_){k(this,d).addCommands(_)}enable(){this.div.style.pointerEvents="auto";for(const _ of k(this,m).values())_.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const _ of k(this,m).values())_.disableEditing();ie(this,f,St).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(_){k(this,d).getActive()!==_&&k(this,d).setActiveEditor(_)}enableClick(){this.div.addEventListener("pointerdown",k(this,x)),this.div.addEventListener("pointerup",k(this,I))}disableClick(){this.div.removeEventListener("pointerdown",k(this,x)),this.div.removeEventListener("pointerup",k(this,I))}attach(_){k(this,m).set(_.id,_)}detach(_){var $;k(this,m).delete(_.id),($=k(this,l))==null||$.removePointerInTextLayer(_.contentDiv)}remove(_){k(this,d).removeEditor(_),this.detach(_),_.div.style.display="none",setTimeout(()=>{_.div.style.display="",_.div.remove(),_.isAttachedToDOM=!1,document.activeElement===document.body&&k(this,d).focusMainContainer()},0),k(this,S)||this.addInkEditorIfNeeded(!1)}add(_){if(ie(this,T,yt).call(this,_),k(this,d).addEditor(_),this.attach(_),!_.isAttachedToDOM){const $=_.render();this.div.append($),_.isAttachedToDOM=!0}this.moveEditorInDOM(_),_.onceAdded(),k(this,d).addToAnnotationStorage(_)}moveEditorInDOM(_){var $;($=k(this,l))==null||$.moveElementInDOM(this.div,_.div,_.contentDiv,!0)}addOrRebuild(_){_.needsToBeRebuilt()?_.rebuild():this.add(_)}addANewEditor(_){const $=()=>{this.addOrRebuild(_)},X=()=>{_.remove()};this.addCommands({cmd:$,undo:X,mustExec:!0})}addUndoableEditor(_){const $=()=>{this.addOrRebuild(_)},X=()=>{_.remove()};this.addCommands({cmd:$,undo:X,mustExec:!1})}getNextId(){return k(this,d).getId()}deserialize(_){switch(_.annotationType){case i.AnnotationEditorType.FREETEXT:return s.FreeTextEditor.deserialize(_,this,k(this,d));case i.AnnotationEditorType.INK:return a.InkEditor.deserialize(_,this,k(this,d))}return null}setSelected(_){k(this,d).setSelected(_)}toggleSelected(_){k(this,d).toggleSelected(_)}isSelected(_){return k(this,d).isSelected(_)}unselect(_){k(this,d).unselect(_)}pointerup(_){const{isMac:$}=i.FeatureTest.platform;if(!(_.button!==0||_.ctrlKey&&$)&&_.target===this.div&&k(this,g)){if(ge(this,g,!1),!k(this,c)){ge(this,c,!0);return}ie(this,o,Et).call(this,_)}}pointerdown(_){const{isMac:$}=i.FeatureTest.platform;if(_.button!==0||_.ctrlKey&&$||_.target!==this.div)return;ge(this,g,!0);const X=k(this,d).getActive();ge(this,c,!X||X.isEmpty())}drop(_){const $=_.dataTransfer.getData("text/plain"),X=k(this,d).getEditor($);if(!X)return;_.preventDefault(),_.dataTransfer.dropEffect="move",ie(this,T,yt).call(this,X);const K=this.div.getBoundingClientRect(),Q=_.clientX-K.x,te=_.clientY-K.y;X.translate(Q-X.startX,te-X.startY),this.moveEditorInDOM(X),X.div.focus()}dragover(_){_.preventDefault()}destroy(){var _,$;((_=k(this,d).getActive())==null?void 0:_.parent)===this&&k(this,d).setActiveEditor(null);for(const X of k(this,m).values())($=k(this,l))==null||$.removePointerInTextLayer(X.contentDiv),X.setParent(null),X.isAttachedToDOM=!1,X.div.remove();this.div=null,k(this,m).clear(),k(this,d).removeLayer(this)}render({viewport:_}){this.viewport=_,(0,b.setLayerDimensions)(this.div,_),(0,r.bindEvents)(this,this.div,["dragover","drop"]);for(const $ of k(this,d).getEditors(this.pageIndex))this.add($);this.updateMode()}update({viewport:_}){k(this,d).commitOrRemove(),this.viewport=_,(0,b.setLayerDimensions)(this.div,{rotation:_.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:_,pageHeight:$}=this.viewport.rawDims;return[_,$]}};l=new WeakMap,c=new WeakMap,I=new WeakMap,x=new WeakMap,m=new WeakMap,g=new WeakMap,S=new WeakMap,d=new WeakMap,T=new WeakSet,yt=function(_){var $;_.parent!==this&&(this.attach(_),($=_.parent)==null||$.detach(_),_.setParent(this),_.div&&_.isAttachedToDOM&&(_.div.remove(),this.div.append(_.div)))},F=new WeakSet,Wt=function(_){switch(k(this,d).getMode()){case i.AnnotationEditorType.FREETEXT:return new s.FreeTextEditor(_);case i.AnnotationEditorType.INK:return new a.InkEditor(_)}return null},o=new WeakSet,Et=function(_){const $=this.getNextId(),X=ie(this,F,Wt).call(this,{parent:this,id:$,x:_.offsetX,y:_.offsetY,uiManager:k(this,d)});return X&&this.add(X),X},f=new WeakSet,St=function(){ge(this,S,!0);for(const _ of k(this,m).values())_.isEmpty()&&_.remove();ge(this,S,!1)},De(w,"_initialized",!1);let E=w;t.AnnotationEditorLayer=E},(e,t,n)=>{var b,E,l,c,I,x,m,g,S,d,qt,P,Zt,y,Gt,p,wt;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var i=n(1),r=n(5),s=n(4);const u=class u extends s.AnnotationEditor{constructor(_){super({..._,name:"freeTextEditor"});ee(this,d);ee(this,P);ee(this,y);ee(this,p);ee(this,b,this.editorDivBlur.bind(this));ee(this,E,this.editorDivFocus.bind(this));ee(this,l,this.editorDivInput.bind(this));ee(this,c,this.editorDivKeydown.bind(this));ee(this,I,void 0);ee(this,x,"");ee(this,m,`${this.id}-editor`);ee(this,g,!1);ee(this,S,void 0);ge(this,I,_.color||u._defaultColor||s.AnnotationEditor._defaultLineColor),ge(this,S,_.fontSize||u._defaultFontSize)}static initialize(_){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(X=>[X,_.get(X)]));const $=getComputedStyle(document.documentElement);this._internalPadding=parseFloat($.getPropertyValue("--freetext-padding"))}static updateDefaultParams(_,$){switch(_){case i.AnnotationEditorParamsType.FREETEXT_SIZE:u._defaultFontSize=$;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:u._defaultColor=$;break}}updateParams(_,$){switch(_){case i.AnnotationEditorParamsType.FREETEXT_SIZE:ie(this,d,qt).call(this,$);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:ie(this,P,Zt).call(this,$);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,u._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,u._defaultColor||s.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,k(this,S)],[i.AnnotationEditorParamsType.FREETEXT_COLOR,k(this,I)]]}getInitialTranslation(){const _=this.parentScale;return[-u._internalPadding*_,-(u._internalPadding+k(this,S))*_]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",k(this,c)),this.editorDiv.addEventListener("focus",k(this,E)),this.editorDiv.addEventListener("blur",k(this,b)),this.editorDiv.addEventListener("input",k(this,l)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",k(this,m)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",k(this,c)),this.editorDiv.removeEventListener("focus",k(this,E)),this.editorDiv.removeEventListener("blur",k(this,b)),this.editorDiv.removeEventListener("input",k(this,l)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(_){super.focusin(_),_.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),k(this,g)||(ge(this,g,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),ge(this,x,ie(this,y,Gt).call(this).trimEnd()),ie(this,p,wt).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(_){this.enableEditMode(),this.editorDiv.focus()}keydown(_){_.target===this.div&&_.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(_){u._keyboardManager.exec(this,_)}editorDivFocus(_){this.isEditing=!0}editorDivBlur(_){this.isEditing=!1}editorDivInput(_){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let _,$;this.width&&(_=this.x,$=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",k(this,m)),this.enableEditing(),u._l10nPromise.get("editor_free_text2_aria_label").then(K=>{var Q;return(Q=this.editorDiv)==null?void 0:Q.setAttribute("aria-label",K)}),u._l10nPromise.get("free_text2_default_content").then(K=>{var Q;return(Q=this.editorDiv)==null?void 0:Q.setAttribute("default-content",K)}),this.editorDiv.contentEditable=!0;const{style:X}=this.editorDiv;if(X.fontSize=`calc(${k(this,S)}px * var(--scale-factor))`,X.color=k(this,I),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,r.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[K,Q]=this.parentDimensions;this.setAt(_*K,$*Q,this.width*K,this.height*Q);for(const te of k(this,x).split(`
`)){const ue=document.createElement("div");ue.append(te?document.createTextNode(te):document.createElement("br")),this.editorDiv.append(ue)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(_,$,X){const K=super.deserialize(_,$,X);return ge(K,S,_.fontSize),ge(K,I,i.Util.makeHexColor(..._.color)),ge(K,x,_.value),K}serialize(){if(this.isEmpty())return null;const _=u._internalPadding*this.parentScale,$=this.getRect(_,_),X=s.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:k(this,I));return{annotationType:i.AnnotationEditorType.FREETEXT,color:X,fontSize:k(this,S),value:k(this,x),pageIndex:this.pageIndex,rect:$,rotation:this.rotation}}};b=new WeakMap,E=new WeakMap,l=new WeakMap,c=new WeakMap,I=new WeakMap,x=new WeakMap,m=new WeakMap,g=new WeakMap,S=new WeakMap,d=new WeakSet,qt=function(_){const $=K=>{this.editorDiv.style.fontSize=`calc(${K}px * var(--scale-factor))`,this.translate(0,-(K-k(this,S))*this.parentScale),ge(this,S,K),ie(this,p,wt).call(this)},X=k(this,S);this.addCommands({cmd:()=>{$(_)},undo:()=>{$(X)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},P=new WeakSet,Zt=function(_){const $=k(this,I);this.addCommands({cmd:()=>{ge(this,I,this.editorDiv.style.color=_)},undo:()=>{ge(this,I,this.editorDiv.style.color=$)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},y=new WeakSet,Gt=function(){const _=this.editorDiv.getElementsByTagName("div");if(_.length===0)return this.editorDiv.innerText;const $=[];for(const X of _)$.push(X.innerText.replace(/\r\n?|\n/,""));return $.join(`
`)},p=new WeakSet,wt=function(){const[_,$]=this.parentDimensions;let X;if(this.isAttachedToDOM)X=this.div.getBoundingClientRect();else{const{currentLayer:K,div:Q}=this,te=Q.style.display;Q.style.display="hidden",K.div.append(this.div),X=Q.getBoundingClientRect(),Q.remove(),Q.style.display=te}this.width=X.width/_,this.height=X.height/$},De(u,"_freeTextDefaultContent",""),De(u,"_l10nPromise"),De(u,"_internalPadding",0),De(u,"_defaultColor",null),De(u,"_defaultFontSize",10),De(u,"_keyboardManager",new r.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],u.prototype.commitOrRemove]])),De(u,"_type","freetext");let a=u;t.FreeTextEditor=a},(e,t,n)=>{var l,c,I,x,m,g,S,d,T,P,F,y,o,p,f,Xt,w,Yt,_,Vt,X,Kt,Q,Tt,ue,Jt,de,Qt,Ee,en,ve,Ge,C,Ct,L,lt,W,ct,j,Qe,z,xt,A,ht,D,Rt,Z,tn,J,nn,oe,rn,ae,kt,pe,ut,Ae,et,V,Mt;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0,Object.defineProperty(t,"fitCurve",{enumerable:!0,get:function(){return s.fitCurve}});var i=n(1),r=n(4),s=n(30),a=n(5);const b=16,ye=class ye extends r.AnnotationEditor{constructor(B){super({...B,name:"inkEditor"});ee(this,f);ee(this,w);ee(this,_);ee(this,X);ee(this,Q);ee(this,ue);ee(this,de);ee(this,Ee);ee(this,ve);ee(this,C);ee(this,L);ee(this,W);ee(this,j);ee(this,z);ee(this,A);ee(this,Z);ee(this,J);ee(this,oe);ee(this,ae);ee(this,pe);ee(this,Ae);ee(this,V);ee(this,l,0);ee(this,c,0);ee(this,I,0);ee(this,x,this.canvasPointermove.bind(this));ee(this,m,this.canvasPointerleave.bind(this));ee(this,g,this.canvasPointerup.bind(this));ee(this,S,this.canvasPointerdown.bind(this));ee(this,d,!1);ee(this,T,!1);ee(this,P,null);ee(this,F,null);ee(this,y,0);ee(this,o,0);ee(this,p,null);this.color=B.color||null,this.thickness=B.thickness||null,this.opacity=B.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(B){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(U=>[U,B.get(U)]))}static updateDefaultParams(B,U){switch(B){case i.AnnotationEditorParamsType.INK_THICKNESS:ye._defaultThickness=U;break;case i.AnnotationEditorParamsType.INK_COLOR:ye._defaultColor=U;break;case i.AnnotationEditorParamsType.INK_OPACITY:ye._defaultOpacity=U/100;break}}updateParams(B,U){switch(B){case i.AnnotationEditorParamsType.INK_THICKNESS:ie(this,f,Xt).call(this,U);break;case i.AnnotationEditorParamsType.INK_COLOR:ie(this,w,Yt).call(this,U);break;case i.AnnotationEditorParamsType.INK_OPACITY:ie(this,_,Vt).call(this,U);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,ye._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,ye._defaultColor||r.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(ye._defaultOpacity*100)]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ye._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||ye._defaultColor||r.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??ye._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(ie(this,L,lt).call(this),ie(this,W,ct).call(this)),this.isAttachedToDOM||(this.parent.add(this),ie(this,j,Qe).call(this)),ie(this,Ae,et).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,k(this,F).disconnect(),ge(this,F,null),super.remove())}setParent(B){!this.parent&&B?this._uiManager.removeShouldRescale(this):this.parent&&B===null&&this._uiManager.addShouldRescale(this),super.setParent(B)}onScaleChanging(){const[B,U]=this.parentDimensions,le=this.width*B,_e=this.height*U;this.setDimensions(le,_e)}enableEditMode(){k(this,d)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",k(this,S)),this.canvas.addEventListener("pointerup",k(this,g)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",k(this,S)),this.canvas.removeEventListener("pointerup",k(this,g)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){k(this,d)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ge(this,d,!0),this.div.classList.add("disabled"),ie(this,Ae,et).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(B){super.focusin(B),this.enableEditMode()}canvasPointerdown(B){B.button!==0||!this.isInEditMode()||k(this,d)||(this.setInForeground(),B.type!=="mouse"&&this.div.focus(),B.stopPropagation(),this.canvas.addEventListener("pointerleave",k(this,m)),this.canvas.addEventListener("pointermove",k(this,x)),ie(this,ue,Jt).call(this,B.offsetX,B.offsetY))}canvasPointermove(B){B.stopPropagation(),ie(this,de,Qt).call(this,B.offsetX,B.offsetY)}canvasPointerup(B){B.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(B.stopPropagation(),ie(this,C,Ct).call(this,B),this.setInBackground())}canvasPointerleave(B){ie(this,C,Ct).call(this,B),this.setInBackground()}render(){if(this.div)return this.div;let B,U;this.width&&(B=this.x,U=this.y),super.render(),ye._l10nPromise.get("editor_ink2_aria_label").then(Me=>{var ke;return(ke=this.div)==null?void 0:ke.setAttribute("aria-label",Me)});const[le,_e,Ce,Re]=ie(this,X,Kt).call(this);if(this.setAt(le,_e,0,0),this.setDims(Ce,Re),ie(this,L,lt).call(this),this.width){const[Me,ke]=this.parentDimensions;this.setAt(B*Me,U*ke,this.width*Me,this.height*ke),ge(this,T,!0),ie(this,j,Qe).call(this),this.setDims(this.width*Me,this.height*ke),ie(this,ve,Ge).call(this),ie(this,V,Mt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return ie(this,W,ct).call(this),this.div}setDimensions(B,U){const le=Math.round(B),_e=Math.round(U);if(k(this,y)===le&&k(this,o)===_e)return;ge(this,y,le),ge(this,o,_e),this.canvas.style.visibility="hidden",k(this,l)&&Math.abs(k(this,l)-B/U)>.01&&(U=Math.ceil(B/k(this,l)),this.setDims(B,U));const[Ce,Re]=this.parentDimensions;this.width=B/Ce,this.height=U/Re,k(this,d)&&ie(this,z,xt).call(this,B,U),ie(this,j,Qe).call(this),ie(this,ve,Ge).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(B,U,le){var Oe,Le;const _e=super.deserialize(B,U,le);_e.thickness=B.thickness,_e.color=i.Util.makeHexColor(...B.color),_e.opacity=B.opacity;const[Ce,Re]=_e.pageDimensions,Me=_e.width*Ce,ke=_e.height*Re,Ie=_e.parentScale,xe=B.thickness/2;ge(_e,l,Me/ke),ge(_e,d,!0),ge(_e,y,Math.round(Me)),ge(_e,o,Math.round(ke));for(const{bezier:Fe}of B.paths){const He=[];_e.paths.push(He);let $e=Ie*(Fe[0]-xe),ze=Ie*(ke-Fe[1]-xe);for(let Be=2,Ue=Fe.length;Be<Ue;Be+=6){const qe=Ie*(Fe[Be]-xe),Xe=Ie*(ke-Fe[Be+1]-xe),it=Ie*(Fe[Be+2]-xe),rt=Ie*(ke-Fe[Be+3]-xe),It=Ie*(Fe[Be+4]-xe),Ot=Ie*(ke-Fe[Be+5]-xe);He.push([[$e,ze],[qe,Xe],[it,rt],[It,Ot]]),$e=It,ze=Ot}const We=ie(this,D,Rt).call(this,He);_e.bezierPath2D.push(We)}const Ne=ie(Oe=_e,ae,kt).call(Oe);return ge(_e,I,Math.max(b,Ne[2]-Ne[0])),ge(_e,c,Math.max(b,Ne[3]-Ne[1])),ie(Le=_e,z,xt).call(Le,Me,ke),_e}serialize(){if(this.isEmpty())return null;const B=this.getRect(0,0),U=this.rotation%180===0?B[3]-B[1]:B[2]-B[0],le=r.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:i.AnnotationEditorType.INK,color:le,thickness:this.thickness,opacity:this.opacity,paths:ie(this,Z,tn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,U),pageIndex:this.pageIndex,rect:B,rotation:this.rotation}}};l=new WeakMap,c=new WeakMap,I=new WeakMap,x=new WeakMap,m=new WeakMap,g=new WeakMap,S=new WeakMap,d=new WeakMap,T=new WeakMap,P=new WeakMap,F=new WeakMap,y=new WeakMap,o=new WeakMap,p=new WeakMap,f=new WeakSet,Xt=function(B){const U=this.thickness;this.addCommands({cmd:()=>{this.thickness=B,ie(this,Ae,et).call(this)},undo:()=>{this.thickness=U,ie(this,Ae,et).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},w=new WeakSet,Yt=function(B){const U=this.color;this.addCommands({cmd:()=>{this.color=B,ie(this,ve,Ge).call(this)},undo:()=>{this.color=U,ie(this,ve,Ge).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},_=new WeakSet,Vt=function(B){B/=100;const U=this.opacity;this.addCommands({cmd:()=>{this.opacity=B,ie(this,ve,Ge).call(this)},undo:()=>{this.opacity=U,ie(this,ve,Ge).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},X=new WeakSet,Kt=function(){const{parentRotation:B,parentDimensions:[U,le]}=this;switch(B){case 90:return[0,le,le,U];case 180:return[U,le,U,le];case 270:return[U,0,le,U];default:return[0,0,U,le]}},Q=new WeakSet,Tt=function(){const{ctx:B,color:U,opacity:le,thickness:_e,parentScale:Ce,scaleFactor:Re}=this;B.lineWidth=_e*Ce/Re,B.lineCap="round",B.lineJoin="round",B.miterLimit=10,B.strokeStyle=`${U}${(0,a.opacityToHex)(le)}`},ue=new WeakSet,Jt=function(B,U){this.isEditing=!0,k(this,T)||(ge(this,T,!0),ie(this,j,Qe).call(this),this.thickness||(this.thickness=ye._defaultThickness),this.color||(this.color=ye._defaultColor||r.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=ye._defaultOpacity)),this.currentPath.push([B,U]),ge(this,P,null),ie(this,Q,Tt).call(this),this.ctx.beginPath(),this.ctx.moveTo(B,U),ge(this,p,()=>{k(this,p)&&(k(this,P)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):ie(this,ve,Ge).call(this),this.ctx.lineTo(...k(this,P)),ge(this,P,null),this.ctx.stroke()),window.requestAnimationFrame(k(this,p)))}),window.requestAnimationFrame(k(this,p))},de=new WeakSet,Qt=function(B,U){const[le,_e]=this.currentPath.at(-1);B===le&&U===_e||(this.currentPath.push([B,U]),ge(this,P,[B,U]))},Ee=new WeakSet,en=function(B,U){var Ie;this.ctx.closePath(),ge(this,p,null),B=Math.min(Math.max(B,0),this.canvas.width),U=Math.min(Math.max(U,0),this.canvas.height);const[le,_e]=this.currentPath.at(-1);(B!==le||U!==_e)&&this.currentPath.push([B,U]);let Ce;if(this.currentPath.length!==1)Ce=(0,s.fitCurve)(this.currentPath,30,null);else{const xe=[B,U];Ce=[[xe,xe.slice(),xe.slice(),xe]]}const Re=ie(Ie=ye,D,Rt).call(Ie,Ce);this.currentPath.length=0;const Me=()=>{this.paths.push(Ce),this.bezierPath2D.push(Re),this.rebuild()},ke=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(ie(this,L,lt).call(this),ie(this,W,ct).call(this)),ie(this,Ae,et).call(this))};this.addCommands({cmd:Me,undo:ke,mustExec:!0})},ve=new WeakSet,Ge=function(){if(this.isEmpty()){ie(this,A,ht).call(this);return}ie(this,Q,Tt).call(this);const{canvas:B,ctx:U}=this;U.setTransform(1,0,0,1,0,0),U.clearRect(0,0,B.width,B.height),ie(this,A,ht).call(this);for(const le of this.bezierPath2D)U.stroke(le)},C=new WeakSet,Ct=function(B){ie(this,Ee,en).call(this,B.offsetX,B.offsetY),this.canvas.removeEventListener("pointerleave",k(this,m)),this.canvas.removeEventListener("pointermove",k(this,x)),this.addToAnnotationStorage()},L=new WeakSet,lt=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",ye._l10nPromise.get("editor_ink_canvas_aria_label").then(B=>{var U;return(U=this.canvas)==null?void 0:U.setAttribute("aria-label",B)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},W=new WeakSet,ct=function(){ge(this,F,new ResizeObserver(B=>{const U=B[0].contentRect;U.width&&U.height&&this.setDimensions(U.width,U.height)})),k(this,F).observe(this.div)},j=new WeakSet,Qe=function(){if(!k(this,T))return;const[B,U]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*B),this.canvas.height=Math.ceil(this.height*U),ie(this,A,ht).call(this)},z=new WeakSet,xt=function(B,U){const le=ie(this,pe,ut).call(this),_e=(B-le)/k(this,I),Ce=(U-le)/k(this,c);this.scaleFactor=Math.min(_e,Ce)},A=new WeakSet,ht=function(){const B=ie(this,pe,ut).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+B,this.translationY*this.scaleFactor+B)},D=new WeakSet,Rt=function(B){const U=new Path2D;for(let le=0,_e=B.length;le<_e;le++){const[Ce,Re,Me,ke]=B[le];le===0&&U.moveTo(...Ce),U.bezierCurveTo(Re[0],Re[1],Me[0],Me[1],ke[0],ke[1])}return U},Z=new WeakSet,tn=function(B,U,le,_e){const Re=[],Me=this.thickness/2;let ke,Ie;for(const xe of this.paths){ke=[],Ie=[];for(let Ne=0,Oe=xe.length;Ne<Oe;Ne++){const[Le,Fe,He,$e]=xe[Ne],ze=B*(Le[0]+U)+Me,We=_e-B*(Le[1]+le)-Me,Be=B*(Fe[0]+U)+Me,Ue=_e-B*(Fe[1]+le)-Me,qe=B*(He[0]+U)+Me,Xe=_e-B*(He[1]+le)-Me,it=B*($e[0]+U)+Me,rt=_e-B*($e[1]+le)-Me;Ne===0&&(ke.push(ze,We),Ie.push(ze,We)),ke.push(Be,Ue,qe,Xe,it,rt),ie(this,J,nn).call(this,ze,We,Be,Ue,qe,Xe,it,rt,4,Ie)}Re.push({bezier:ke,points:Ie})}return Re},J=new WeakSet,nn=function(B,U,le,_e,Ce,Re,Me,ke,Ie,xe){if(ie(this,oe,rn).call(this,B,U,le,_e,Ce,Re,Me,ke)){xe.push(Me,ke);return}for(let Ne=1;Ne<Ie-1;Ne++){const Oe=Ne/Ie,Le=1-Oe;let Fe=Oe*B+Le*le,He=Oe*U+Le*_e,$e=Oe*le+Le*Ce,ze=Oe*_e+Le*Re;const We=Oe*Ce+Le*Me,Be=Oe*Re+Le*ke;Fe=Oe*Fe+Le*$e,He=Oe*He+Le*ze,$e=Oe*$e+Le*We,ze=Oe*ze+Le*Be,Fe=Oe*Fe+Le*$e,He=Oe*He+Le*ze,xe.push(Fe,He)}xe.push(Me,ke)},oe=new WeakSet,rn=function(B,U,le,_e,Ce,Re,Me,ke){const xe=(3*le-2*B-Me)**2,Ne=(3*_e-2*U-ke)**2,Oe=(3*Ce-B-2*Me)**2,Le=(3*Re-U-2*ke)**2;return Math.max(xe,Oe)+Math.max(Ne,Le)<=10},ae=new WeakSet,kt=function(){let B=1/0,U=-1/0,le=1/0,_e=-1/0;for(const Ce of this.paths)for(const[Re,Me,ke,Ie]of Ce){const xe=i.Util.bezierBoundingBox(...Re,...Me,...ke,...Ie);B=Math.min(B,xe[0]),le=Math.min(le,xe[1]),U=Math.max(U,xe[2]),_e=Math.max(_e,xe[3])}return[B,le,U,_e]},pe=new WeakSet,ut=function(){return k(this,d)?Math.ceil(this.thickness*this.parentScale):0},Ae=new WeakSet,et=function(B=!1){if(this.isEmpty())return;if(!k(this,d)){ie(this,ve,Ge).call(this);return}const U=ie(this,ae,kt).call(this),le=ie(this,pe,ut).call(this);ge(this,I,Math.max(b,U[2]-U[0])),ge(this,c,Math.max(b,U[3]-U[1]));const _e=Math.ceil(le+k(this,I)*this.scaleFactor),Ce=Math.ceil(le+k(this,c)*this.scaleFactor),[Re,Me]=this.parentDimensions;this.width=_e/Re,this.height=Ce/Me,ge(this,l,_e/Ce),ie(this,V,Mt).call(this);const ke=this.translationX,Ie=this.translationY;this.translationX=-U[0],this.translationY=-U[1],ie(this,j,Qe).call(this),ie(this,ve,Ge).call(this),ge(this,y,_e),ge(this,o,Ce),this.setDims(_e,Ce);const xe=B?le/this.scaleFactor/2:0;this.translate(ke-this.translationX-xe,Ie-this.translationY-xe)},V=new WeakSet,Mt=function(){const{style:B}=this.div;k(this,l)>=1?(B.minHeight=`${b}px`,B.minWidth=`${Math.round(k(this,l)*b)}px`):(B.minWidth=`${b}px`,B.minHeight=`${Math.round(b/k(this,l))}px`)},ee(ye,D),De(ye,"_defaultColor",null),De(ye,"_defaultOpacity",1),De(ye,"_defaultThickness",1),De(ye,"_l10nPromise"),De(ye,"_type","ink");let E=ye;t.InkEditor=E},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fitCurve=void 0;const i=n(31);t.fitCurve=i},e=>{function t(g,S,d){if(!Array.isArray(g))throw new TypeError("First argument should be an array");if(g.forEach(y=>{if(!Array.isArray(y)||y.some(o=>typeof o!="number")||y.length!==g[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),g=g.filter((y,o)=>o===0||!y.every((p,f)=>p===g[o-1][f])),g.length<2)return[];const T=g.length,P=I(g[1],g[0]),F=I(g[T-2],g[T-1]);return n(g,P,F,S,d)}function n(g,S,d,T,P){var y,o,p,f,u,w,O,_,$,X,K,Q,te;if(g.length===2)return Q=x.vectorLen(x.subtract(g[0],g[1]))/3,y=[g[0],x.addArrays(g[0],x.mulItems(S,Q)),x.addArrays(g[1],x.mulItems(d,Q)),g[1]],[y];if(o=b(g),[y,f,w]=i(g,o,o,S,d,P),f===0||f<T)return[y];if(f<T*T)for(p=o,u=f,O=w,te=0;te<20;te++){if(p=s(y,g,p),[y,f,w]=i(g,o,p,S,d,P),f<T)return[y];if(w===O){let ue=f/u;if(ue>.9999&&ue<1.0001)break}u=f,O=w}return K=[],_=x.subtract(g[w-1],g[w+1]),_.every(ue=>ue===0)&&(_=x.subtract(g[w-1],g[w]),[_[0],_[1]]=[-_[1],_[0]]),$=x.normalize(_),X=x.mulItems($,-1),K=K.concat(n(g.slice(0,w+1),S,$,T,P)),K=K.concat(n(g.slice(w),X,d,T,P)),K}function i(g,S,d,T,P,F){var y,o,p;return y=r(g,d,T,P),[o,p]=E(g,y,S),F&&F({bez:y,points:g,params:S,maxErr:o,maxPoint:p}),[y,o,p]}function r(g,S,d,T){var P,F,y,o,p,f,u,w,O,_,$,X,K,Q,te,ue,ce,de=g[0],me=g[g.length-1];for(P=[de,null,null,me],F=x.zeros_Xx2x2(S.length),K=0,Q=S.length;K<Q;K++)ue=S[K],ce=1-ue,y=F[K],y[0]=x.mulItems(d,3*ue*(ce*ce)),y[1]=x.mulItems(T,3*ce*(ue*ue));for(o=[[0,0],[0,0]],p=[0,0],K=0,Q=g.length;K<Q;K++)ue=S[K],y=F[K],o[0][0]+=x.dot(y[0],y[0]),o[0][1]+=x.dot(y[0],y[1]),o[1][0]+=x.dot(y[0],y[1]),o[1][1]+=x.dot(y[1],y[1]),te=x.subtract(g[K],m.q([de,de,me,me],ue)),p[0]+=x.dot(y[0],te),p[1]+=x.dot(y[1],te);return f=o[0][0]*o[1][1]-o[1][0]*o[0][1],u=o[0][0]*p[1]-o[1][0]*p[0],w=p[0]*o[1][1]-p[1]*o[0][1],O=f===0?0:w/f,_=f===0?0:u/f,X=x.vectorLen(x.subtract(de,me)),$=1e-6*X,O<$||_<$?(P[1]=x.addArrays(de,x.mulItems(d,X/3)),P[2]=x.addArrays(me,x.mulItems(T,X/3))):(P[1]=x.addArrays(de,x.mulItems(d,O)),P[2]=x.addArrays(me,x.mulItems(T,_))),P}function s(g,S,d){return d.map((T,P)=>a(g,S[P],T))}function a(g,S,d){var T=x.subtract(m.q(g,d),S),P=m.qprime(g,d),F=x.mulMatrix(T,P),y=x.sum(x.squareItems(P))+2*x.mulMatrix(T,m.qprimeprime(g,d));return y===0?d:d-F/y}function b(g){var S=[],d,T,P;return g.forEach((F,y)=>{d=y?T+x.vectorLen(x.subtract(F,P)):0,S.push(d),T=d,P=F}),S=S.map(F=>F/T),S}function E(g,S,d){var T,P,F,y,o,p,f,u;P=0,F=Math.floor(g.length/2);const w=l(S,10);for(o=0,p=g.length;o<p;o++)f=g[o],u=c(S,d[o],w,10),y=x.subtract(m.q(S,u),f),T=y[0]*y[0]+y[1]*y[1],T>P&&(P=T,F=o);return[P,F]}var l=function(g,S){for(var d,T=[0],P=g[0],F=0,y=1;y<=S;y++)d=m.q(g,y/S),F+=x.vectorLen(x.subtract(d,P)),T.push(F),P=d;return T=T.map(o=>o/F),T};function c(g,S,d,T){if(S<0)return 0;if(S>1)return 1;for(var P,F,y,o,p,f=1;f<=T;f++)if(S<=d[f]){o=(f-1)/T,y=f/T,F=d[f-1],P=d[f],p=(S-F)/(P-F)*(y-o)+o;break}return p}function I(g,S){return x.normalize(x.subtract(g,S))}class x{static zeros_Xx2x2(S){for(var d=[];S--;)d.push([0,0]);return d}static mulItems(S,d){return S.map(T=>T*d)}static mulMatrix(S,d){return S.reduce((T,P,F)=>T+P*d[F],0)}static subtract(S,d){return S.map((T,P)=>T-d[P])}static addArrays(S,d){return S.map((T,P)=>T+d[P])}static addItems(S,d){return S.map(T=>T+d)}static sum(S){return S.reduce((d,T)=>d+T)}static dot(S,d){return x.mulMatrix(S,d)}static vectorLen(S){return Math.hypot(...S)}static divItems(S,d){return S.map(T=>T/d)}static squareItems(S){return S.map(d=>d*d)}static normalize(S){return this.divItems(S,this.vectorLen(S))}}class m{static q(S,d){var T=1-d,P=x.mulItems(S[0],T*T*T),F=x.mulItems(S[1],3*T*T*d),y=x.mulItems(S[2],3*T*d*d),o=x.mulItems(S[3],d*d*d);return x.addArrays(x.addArrays(P,F),x.addArrays(y,o))}static qprime(S,d){var T=1-d,P=x.mulItems(x.subtract(S[1],S[0]),3*T*T),F=x.mulItems(x.subtract(S[2],S[1]),6*T*d),y=x.mulItems(x.subtract(S[3],S[2]),3*d*d);return x.addArrays(x.addArrays(P,F),y)}static qprimeprime(S,d){return x.addArrays(x.mulItems(x.addArrays(x.subtract(S[2],x.mulItems(S[1],2)),S[0]),6*(1-d)),x.mulItems(x.addArrays(x.subtract(S[3],x.mulItems(S[2],2)),S[1]),6*d))}}e.exports=t,e.exports.fitCubic=n,e.exports.createTangent=I},(e,t,n)=>{var ve,Ve,C,sn,q,Ft,Y,Pt;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var i=n(1),r=n(6),s=n(3),a=n(33),b=n(34);const E=1e3,l=9,c=new WeakSet;function I(z){return{width:z[2]-z[0],height:z[3]-z[1]}}class x{static create(h){switch(h.data.annotationType){case i.AnnotationType.LINK:return new g(h);case i.AnnotationType.TEXT:return new S(h);case i.AnnotationType.WIDGET:switch(h.data.fieldType){case"Tx":return new T(h);case"Btn":return h.data.radioButton?new F(h):h.data.checkBox?new P(h):new y(h);case"Ch":return new o(h)}return new d(h);case i.AnnotationType.POPUP:return new p(h);case i.AnnotationType.FREETEXT:return new u(h);case i.AnnotationType.LINE:return new w(h);case i.AnnotationType.SQUARE:return new O(h);case i.AnnotationType.CIRCLE:return new _(h);case i.AnnotationType.POLYLINE:return new $(h);case i.AnnotationType.CARET:return new K(h);case i.AnnotationType.INK:return new Q(h);case i.AnnotationType.POLYGON:return new X(h);case i.AnnotationType.HIGHLIGHT:return new te(h);case i.AnnotationType.UNDERLINE:return new ue(h);case i.AnnotationType.SQUIGGLY:return new ce(h);case i.AnnotationType.STRIKEOUT:return new de(h);case i.AnnotationType.STAMP:return new me(h);case i.AnnotationType.FILEATTACHMENT:return new Ee(h);default:return new m(h)}}}class m{constructor(h,{isRenderable:A=!1,ignoreBorder:M=!1,createQuadrilaterals:D=!1}={}){this.isRenderable=A,this.data=h.data,this.layer=h.layer,this.page=h.page,this.viewport=h.viewport,this.linkService=h.linkService,this.downloadManager=h.downloadManager,this.imageResourcesPath=h.imageResourcesPath,this.renderForms=h.renderForms,this.svgFactory=h.svgFactory,this.annotationStorage=h.annotationStorage,this.enableScripting=h.enableScripting,this.hasJSActions=h.hasJSActions,this._fieldObjects=h.fieldObjects,A&&(this.container=this._createContainer(M)),D&&(this.quadrilaterals=this._createQuadrilaterals(M))}_createContainer(h=!1){const{data:A,page:M,viewport:D}=this,N=document.createElement("section");N.setAttribute("data-annotation-id",A.id),A.noRotate&&N.classList.add("norotate");const{pageWidth:Z,pageHeight:re,pageX:J,pageY:se}=D.rawDims,{width:oe,height:ne}=I(A.rect),ae=i.Util.normalizeRect([A.rect[0],M.view[3]-A.rect[1]+M.view[1],A.rect[2],M.view[3]-A.rect[3]+M.view[1]]);if(!h&&A.borderStyle.width>0){N.style.borderWidth=`${A.borderStyle.width}px`;const pe=A.borderStyle.horizontalCornerRadius,we=A.borderStyle.verticalCornerRadius;if(pe>0||we>0){const Te=`calc(${pe}px * var(--scale-factor)) / calc(${we}px * var(--scale-factor))`;N.style.borderRadius=Te}else if(this instanceof F){const Te=`calc(${oe}px * var(--scale-factor)) / calc(${ne}px * var(--scale-factor))`;N.style.borderRadius=Te}switch(A.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:N.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:N.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:N.style.borderBottomStyle="solid";break}const Ae=A.borderColor||null;Ae?N.style.borderColor=i.Util.makeHexColor(Ae[0]|0,Ae[1]|0,Ae[2]|0):N.style.borderWidth=0}N.style.left=`${100*(ae[0]-J)/Z}%`,N.style.top=`${100*(ae[1]-se)/re}%`;const{rotation:fe}=A;return A.hasOwnCanvas||fe===0?(N.style.width=`${100*oe/Z}%`,N.style.height=`${100*ne/re}%`):this.setRotation(fe,N),N}setRotation(h,A=this.container){const{pageWidth:M,pageHeight:D}=this.viewport.rawDims,{width:N,height:Z}=I(this.data.rect);let re,J;h%180===0?(re=100*N/M,J=100*Z/D):(re=100*Z/M,J=100*N/D),A.style.width=`${re}%`,A.style.height=`${J}%`,A.setAttribute("data-main-rotation",(360-h)%360)}get _commonActions(){const h=(A,M,D)=>{const N=D.detail[A];D.target.style[M]=a.ColorConverters[`${N[0]}_HTML`](N.slice(1))};return(0,i.shadow)(this,"_commonActions",{display:A=>{const M=A.detail.display%2===1;this.container.style.visibility=M?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:M,print:A.detail.display===0||A.detail.display===3})},print:A=>{this.annotationStorage.setValue(this.data.id,{print:A.detail.print})},hidden:A=>{this.container.style.visibility=A.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:A.detail.hidden})},focus:A=>{setTimeout(()=>A.target.focus({preventScroll:!1}),0)},userName:A=>{A.target.title=A.detail.userName},readonly:A=>{A.detail.readonly?A.target.setAttribute("readonly",""):A.target.removeAttribute("readonly")},required:A=>{this._setRequired(A.target,A.detail.required)},bgColor:A=>{h("bgColor","backgroundColor",A)},fillColor:A=>{h("fillColor","backgroundColor",A)},fgColor:A=>{h("fgColor","color",A)},textColor:A=>{h("textColor","color",A)},borderColor:A=>{h("borderColor","borderColor",A)},strokeColor:A=>{h("strokeColor","borderColor",A)},rotation:A=>{const M=A.detail.rotation;this.setRotation(M),this.annotationStorage.setValue(this.data.id,{rotation:M})}})}_dispatchEventFromSandbox(h,A){const M=this._commonActions;for(const D of Object.keys(A.detail)){const N=h[D]||M[D];N==null||N(A)}}_setDefaultPropertiesFromJS(h){if(!this.enableScripting)return;const A=this.annotationStorage.getRawValue(this.data.id);if(!A)return;const M=this._commonActions;for(const[D,N]of Object.entries(A)){const Z=M[D];if(Z){const re={detail:{[D]:N},target:h};Z(re),delete A[D]}}}_createQuadrilaterals(h=!1){if(!this.data.quadPoints)return null;const A=[],M=this.data.rect;for(const D of this.data.quadPoints)this.data.rect=[D[2].x,D[2].y,D[1].x,D[1].y],A.push(this._createContainer(h));return this.data.rect=M,A}_createPopup(h,A){let M=this.container;this.quadrilaterals&&(h||(h=this.quadrilaterals),M=this.quadrilaterals[0]),h||(h=document.createElement("div"),h.classList.add("popupTriggerArea"),M.append(h));const N=new f({container:M,trigger:h,color:A.color,titleObj:A.titleObj,modificationDate:A.modificationDate,contentsObj:A.contentsObj,richText:A.richText,hideWrapper:!0}).render();N.style.left="100%",M.append(N)}_renderQuadrilaterals(h){for(const A of this.quadrilaterals)A.classList.add(h);return this.quadrilaterals}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(h,A=null){const M=[];if(this._fieldObjects){const D=this._fieldObjects[h];if(D)for(const{page:N,id:Z,exportValues:re}of D){if(N===-1||Z===A)continue;const J=typeof re=="string"?re:null,se=document.querySelector(`[data-element-id="${Z}"]`);if(se&&!c.has(se)){(0,i.warn)(`_getElementsByName - element not allowed: ${Z}`);continue}M.push({id:Z,exportValue:J,domElement:se})}return M}for(const D of document.getElementsByName(h)){const{exportValue:N}=D,Z=D.getAttribute("data-element-id");Z!==A&&c.has(D)&&M.push({id:Z,exportValue:N,domElement:D})}return M}}class g extends m{constructor(A,M=null){super(A,{isRenderable:!0,ignoreBorder:!!(M!=null&&M.ignoreBorder),createQuadrilaterals:!0});ee(this,ve);ee(this,C);this.isTooltipOnly=A.data.isTooltipOnly}render(){const{data:A,linkService:M}=this,D=document.createElement("a");D.setAttribute("data-element-id",A.id);let N=!1;return A.url?(M.addLinkAttributes(D,A.url,A.newWindow),N=!0):A.action?(this._bindNamedAction(D,A.action),N=!0):A.attachment?(this._bindAttachment(D,A.attachment),N=!0):A.setOCGState?(ie(this,C,sn).call(this,D,A.setOCGState),N=!0):A.dest?(this._bindLink(D,A.dest),N=!0):(A.actions&&(A.actions.Action||A.actions["Mouse Up"]||A.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(D,A),N=!0),A.resetForm?(this._bindResetFormAction(D,A.resetForm),N=!0):this.isTooltipOnly&&!N&&(this._bindLink(D,""),N=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((Z,re)=>{const J=re===0?D:D.cloneNode();return Z.append(J),Z}):(this.container.classList.add("linkAnnotation"),N&&this.container.append(D),this.container)}_bindLink(A,M){A.href=this.linkService.getDestinationHash(M),A.onclick=()=>(M&&this.linkService.goToDestination(M),!1),(M||M==="")&&ie(this,ve,Ve).call(this)}_bindNamedAction(A,M){A.href=this.linkService.getAnchorUrl(""),A.onclick=()=>(this.linkService.executeNamedAction(M),!1),ie(this,ve,Ve).call(this)}_bindAttachment(A,M){A.href=this.linkService.getAnchorUrl(""),A.onclick=()=>{var D;return(D=this.downloadManager)==null||D.openOrDownloadData(this.container,M.content,M.filename),!1},ie(this,ve,Ve).call(this)}_bindJSAction(A,M){A.href=this.linkService.getAnchorUrl("");const D=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const N of Object.keys(M.actions)){const Z=D.get(N);Z&&(A[Z]=()=>{var re;return(re=this.linkService.eventBus)==null||re.dispatch("dispatcheventinsandbox",{source:this,detail:{id:M.id,name:N}}),!1})}A.onclick||(A.onclick=()=>!1),ie(this,ve,Ve).call(this)}_bindResetFormAction(A,M){const D=A.onclick;if(D||(A.href=this.linkService.getAnchorUrl("")),ie(this,ve,Ve).call(this),!this._fieldObjects){(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),D||(A.onclick=()=>!1);return}A.onclick=()=>{var ne;D==null||D();const{fields:N,refs:Z,include:re}=M,J=[];if(N.length!==0||Z.length!==0){const ae=new Set(Z);for(const fe of N){const pe=this._fieldObjects[fe]||[];for(const{id:we}of pe)ae.add(we)}for(const fe of Object.values(this._fieldObjects))for(const pe of fe)ae.has(pe.id)===re&&J.push(pe)}else for(const ae of Object.values(this._fieldObjects))J.push(...ae);const se=this.annotationStorage,oe=[];for(const ae of J){const{id:fe}=ae;switch(oe.push(fe),ae.type){case"text":{const we=ae.defaultValue||"";se.setValue(fe,{value:we});break}case"checkbox":case"radiobutton":{const we=ae.defaultValue===ae.exportValues;se.setValue(fe,{value:we});break}case"combobox":case"listbox":{const we=ae.defaultValue||"";se.setValue(fe,{value:we});break}default:continue}const pe=document.querySelector(`[data-element-id="${fe}"]`);if(pe){if(!c.has(pe)){(0,i.warn)(`_bindResetFormAction - element not allowed: ${fe}`);continue}}else continue;pe.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((ne=this.linkService.eventBus)==null||ne.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:oe,name:"ResetForm"}})),!1}}}ve=new WeakSet,Ve=function(){this.container.setAttribute("data-internal-link","")},C=new WeakSet,sn=function(A,M){A.href=this.linkService.getAnchorUrl(""),A.onclick=()=>(this.linkService.executeSetOCGState(M),!1),ie(this,ve,Ve).call(this)};class S extends m{constructor(h){var M,D,N;const A=!!(h.data.hasPopup||(M=h.data.titleObj)!=null&&M.str||(D=h.data.contentsObj)!=null&&D.str||(N=h.data.richText)!=null&&N.str);super(h,{isRenderable:A})}render(){this.container.classList.add("textAnnotation");const h=document.createElement("img");return h.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",h.alt="[{{type}} Annotation]",h.dataset.l10nId="text_annotation_type",h.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(h,this.data),this.container.append(h),this.container}}class d extends m{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(h){var A;this.data.hasOwnCanvas&&(((A=h.previousSibling)==null?void 0:A.nodeName)==="CANVAS"&&(h.previousSibling.hidden=!0),h.hidden=!1)}_getKeyModifier(h){const{isWin:A,isMac:M}=i.FeatureTest.platform;return A&&h.ctrlKey||M&&h.metaKey}_setEventListener(h,A,M,D){A.includes("mouse")?h.addEventListener(A,N=>{var Z;(Z=this.linkService.eventBus)==null||Z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:M,value:D(N),shift:N.shiftKey,modifier:this._getKeyModifier(N)}})}):h.addEventListener(A,N=>{var Z;(Z=this.linkService.eventBus)==null||Z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:M,value:D(N)}})})}_setEventListeners(h,A,M){var D;for(const[N,Z]of A)(Z==="Action"||(D=this.data.actions)!=null&&D[Z])&&this._setEventListener(h,N,Z,M)}_setBackgroundColor(h){const A=this.data.backgroundColor||null;h.style.backgroundColor=A===null?"transparent":i.Util.makeHexColor(A[0],A[1],A[2])}_setTextStyle(h){const A=["left","center","right"],{fontColor:M}=this.data.defaultAppearanceData,D=this.data.defaultAppearanceData.fontSize||l,N=h.style;let Z;const re=2,J=se=>Math.round(10*se)/10;if(this.data.multiLine){const se=Math.abs(this.data.rect[3]-this.data.rect[1]-re),oe=Math.round(se/(i.LINE_FACTOR*D))||1,ne=se/oe;Z=Math.min(D,J(ne/i.LINE_FACTOR))}else{const se=Math.abs(this.data.rect[3]-this.data.rect[1]-re);Z=Math.min(D,J(se/i.LINE_FACTOR))}N.fontSize=`calc(${Z}px * var(--scale-factor))`,N.color=i.Util.makeHexColor(M[0],M[1],M[2]),this.data.textAlignment!==null&&(N.textAlign=A[this.data.textAlignment])}_setRequired(h,A){A?h.setAttribute("required",!0):h.removeAttribute("required"),h.setAttribute("aria-required",A)}}class T extends d{constructor(h){const A=h.renderForms||!h.data.hasAppearance&&!!h.data.fieldValue;super(h,{isRenderable:A})}setPropertyOnSiblings(h,A,M,D){const N=this.annotationStorage;for(const Z of this._getElementsByName(h.name,h.id))Z.domElement&&(Z.domElement[A]=M),N.setValue(Z.id,{[D]:M})}render(){var D;const h=this.annotationStorage,A=this.data.id;this.container.classList.add("textWidgetAnnotation");let M=null;if(this.renderForms){const N=h.getValue(A,{value:this.data.fieldValue});let Z=N.formattedValue||N.value||"";const re=h.getValue(A,{charLimit:this.data.maxLen}).charLimit;re&&Z.length>re&&(Z=Z.slice(0,re));const J={userValue:Z,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(M=document.createElement("textarea"),M.textContent=Z,this.data.doNotScroll&&(M.style.overflowY="hidden")):(M=document.createElement("input"),M.type="text",M.setAttribute("value",Z),this.data.doNotScroll&&(M.style.overflowX="hidden")),this.data.hasOwnCanvas&&(M.hidden=!0),c.add(M),M.setAttribute("data-element-id",A),M.disabled=this.data.readOnly,M.name=this.data.fieldName,M.tabIndex=E,this._setRequired(M,this.data.required),re&&(M.maxLength=re),M.addEventListener("input",oe=>{h.setValue(A,{value:oe.target.value}),this.setPropertyOnSiblings(M,"value",oe.target.value,"value")}),M.addEventListener("resetform",oe=>{const ne=this.data.defaultFieldValue??"";M.value=J.userValue=ne,J.formattedValue=null});let se=oe=>{const{formattedValue:ne}=J;ne!=null&&(oe.target.value=ne),oe.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){M.addEventListener("focus",ne=>{const{target:ae}=ne;J.userValue&&(ae.value=J.userValue),J.lastCommittedValue=ae.value,J.commitKey=1}),M.addEventListener("updatefromsandbox",ne=>{this.showElementAndHideCanvas(ne.target);const ae={value(fe){J.userValue=fe.detail.value??"",h.setValue(A,{value:J.userValue.toString()}),fe.target.value=J.userValue},formattedValue(fe){const{formattedValue:pe}=fe.detail;J.formattedValue=pe,pe!=null&&fe.target!==document.activeElement&&(fe.target.value=pe),h.setValue(A,{formattedValue:pe})},selRange(fe){fe.target.setSelectionRange(...fe.detail.selRange)},charLimit:fe=>{var Te;const{charLimit:pe}=fe.detail,{target:we}=fe;if(pe===0){we.removeAttribute("maxLength");return}we.setAttribute("maxLength",pe);let Ae=J.userValue;!Ae||Ae.length<=pe||(Ae=Ae.slice(0,pe),we.value=J.userValue=Ae,h.setValue(A,{value:Ae}),(Te=this.linkService.eventBus)==null||Te.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:Ae,willCommit:!0,commitKey:1,selStart:we.selectionStart,selEnd:we.selectionEnd}}))}};this._dispatchEventFromSandbox(ae,ne)}),M.addEventListener("keydown",ne=>{var pe;J.commitKey=1;let ae=-1;if(ne.key==="Escape"?ae=0:ne.key==="Enter"&&!this.data.multiLine?ae=2:ne.key==="Tab"&&(J.commitKey=3),ae===-1)return;const{value:fe}=ne.target;J.lastCommittedValue!==fe&&(J.lastCommittedValue=fe,J.userValue=fe,(pe=this.linkService.eventBus)==null||pe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:fe,willCommit:!0,commitKey:ae,selStart:ne.target.selectionStart,selEnd:ne.target.selectionEnd}}))});const oe=se;se=null,M.addEventListener("blur",ne=>{var fe;if(!ne.relatedTarget)return;const{value:ae}=ne.target;J.userValue=ae,J.lastCommittedValue!==ae&&((fe=this.linkService.eventBus)==null||fe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:ae,willCommit:!0,commitKey:J.commitKey,selStart:ne.target.selectionStart,selEnd:ne.target.selectionEnd}})),oe(ne)}),(D=this.data.actions)!=null&&D.Keystroke&&M.addEventListener("beforeinput",ne=>{var be;J.lastCommittedValue=null;const{data:ae,target:fe}=ne,{value:pe,selectionStart:we,selectionEnd:Ae}=fe;let Te=we,V=Ae;switch(ne.inputType){case"deleteWordBackward":{const ye=pe.substring(0,we).match(/\w*[^\w]*$/);ye&&(Te-=ye[0].length);break}case"deleteWordForward":{const ye=pe.substring(we).match(/^[^\w]*\w*/);ye&&(V+=ye[0].length);break}case"deleteContentBackward":we===Ae&&(Te-=1);break;case"deleteContentForward":we===Ae&&(V+=1);break}ne.preventDefault(),(be=this.linkService.eventBus)==null||be.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:pe,change:ae||"",willCommit:!1,selStart:Te,selEnd:V}})}),this._setEventListeners(M,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ne=>ne.target.value)}if(se&&M.addEventListener("blur",se),this.data.comb){const ne=(this.data.rect[2]-this.data.rect[0])/re;M.classList.add("comb"),M.style.letterSpacing=`calc(${ne}px * var(--scale-factor) - 1ch)`}}else M=document.createElement("div"),M.textContent=this.data.fieldValue,M.style.verticalAlign="middle",M.style.display="table-cell";return this._setTextStyle(M),this._setBackgroundColor(M),this._setDefaultPropertiesFromJS(M),this.container.append(M),this.container}}class P extends d{constructor(h){super(h,{isRenderable:h.renderForms})}render(){const h=this.annotationStorage,A=this.data,M=A.id;let D=h.getValue(M,{value:A.exportValue===A.fieldValue}).value;typeof D=="string"&&(D=D!=="Off",h.setValue(M,{value:D})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const N=document.createElement("input");return c.add(N),N.setAttribute("data-element-id",M),N.disabled=A.readOnly,this._setRequired(N,this.data.required),N.type="checkbox",N.name=A.fieldName,D&&N.setAttribute("checked",!0),N.setAttribute("exportValue",A.exportValue),N.tabIndex=E,N.addEventListener("change",Z=>{const{name:re,checked:J}=Z.target;for(const se of this._getElementsByName(re,M)){const oe=J&&se.exportValue===A.exportValue;se.domElement&&(se.domElement.checked=oe),h.setValue(se.id,{value:oe})}h.setValue(M,{value:J})}),N.addEventListener("resetform",Z=>{const re=A.defaultFieldValue||"Off";Z.target.checked=re===A.exportValue}),this.enableScripting&&this.hasJSActions&&(N.addEventListener("updatefromsandbox",Z=>{const re={value(J){J.target.checked=J.detail.value!=="Off",h.setValue(M,{value:J.target.checked})}};this._dispatchEventFromSandbox(re,Z)}),this._setEventListeners(N,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Z=>Z.target.checked)),this._setBackgroundColor(N),this._setDefaultPropertiesFromJS(N),this.container.append(N),this.container}}class F extends d{constructor(h){super(h,{isRenderable:h.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const h=this.annotationStorage,A=this.data,M=A.id;let D=h.getValue(M,{value:A.fieldValue===A.buttonValue}).value;typeof D=="string"&&(D=D!==A.buttonValue,h.setValue(M,{value:D}));const N=document.createElement("input");if(c.add(N),N.setAttribute("data-element-id",M),N.disabled=A.readOnly,this._setRequired(N,this.data.required),N.type="radio",N.name=A.fieldName,D&&N.setAttribute("checked",!0),N.tabIndex=E,N.addEventListener("change",Z=>{const{name:re,checked:J}=Z.target;for(const se of this._getElementsByName(re,M))h.setValue(se.id,{value:!1});h.setValue(M,{value:J})}),N.addEventListener("resetform",Z=>{const re=A.defaultFieldValue;Z.target.checked=re!=null&&re===A.buttonValue}),this.enableScripting&&this.hasJSActions){const Z=A.buttonValue;N.addEventListener("updatefromsandbox",re=>{const J={value:se=>{const oe=Z===se.detail.value;for(const ne of this._getElementsByName(se.target.name)){const ae=oe&&ne.id===M;ne.domElement&&(ne.domElement.checked=ae),h.setValue(ne.id,{value:ae})}}};this._dispatchEventFromSandbox(J,re)}),this._setEventListeners(N,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],re=>re.target.checked)}return this._setBackgroundColor(N),this._setDefaultPropertiesFromJS(N),this.container.append(N),this.container}}class y extends g{constructor(h){super(h,{ignoreBorder:h.data.hasAppearance})}render(){const h=super.render();h.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(h.title=this.data.alternativeText);const A=h.lastChild;return this.enableScripting&&this.hasJSActions&&A&&(this._setDefaultPropertiesFromJS(A),A.addEventListener("updatefromsandbox",M=>{this._dispatchEventFromSandbox({},M)})),h}}class o extends d{constructor(h){super(h,{isRenderable:h.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const h=this.annotationStorage,A=this.data.id,M=h.getValue(A,{value:this.data.fieldValue}),D=document.createElement("select");c.add(D),D.setAttribute("data-element-id",A),D.disabled=this.data.readOnly,this._setRequired(D,this.data.required),D.name=this.data.fieldName,D.tabIndex=E;let N=this.data.combo&&this.data.options.length>0;this.data.combo||(D.size=this.data.options.length,this.data.multiSelect&&(D.multiple=!0)),D.addEventListener("resetform",oe=>{const ne=this.data.defaultFieldValue;for(const ae of D.options)ae.selected=ae.value===ne});for(const oe of this.data.options){const ne=document.createElement("option");ne.textContent=oe.displayValue,ne.value=oe.exportValue,M.value.includes(oe.exportValue)&&(ne.setAttribute("selected",!0),N=!1),D.append(ne)}let Z=null;if(N){const oe=document.createElement("option");oe.value=" ",oe.setAttribute("hidden",!0),oe.setAttribute("selected",!0),D.prepend(oe),Z=()=>{oe.remove(),D.removeEventListener("input",Z),Z=null},D.addEventListener("input",Z)}const re=oe=>{const ne=oe?"value":"textContent",{options:ae,multiple:fe}=D;return fe?Array.prototype.filter.call(ae,pe=>pe.selected).map(pe=>pe[ne]):ae.selectedIndex===-1?null:ae[ae.selectedIndex][ne]};let J=re(!1);const se=oe=>{const ne=oe.target.options;return Array.prototype.map.call(ne,ae=>({displayValue:ae.textContent,exportValue:ae.value}))};return this.enableScripting&&this.hasJSActions?(D.addEventListener("updatefromsandbox",oe=>{const ne={value(ae){Z==null||Z();const fe=ae.detail.value,pe=new Set(Array.isArray(fe)?fe:[fe]);for(const we of D.options)we.selected=pe.has(we.value);h.setValue(A,{value:re(!0)}),J=re(!1)},multipleSelection(ae){D.multiple=!0},remove(ae){const fe=D.options,pe=ae.detail.remove;fe[pe].selected=!1,D.remove(pe),fe.length>0&&Array.prototype.findIndex.call(fe,Ae=>Ae.selected)===-1&&(fe[0].selected=!0),h.setValue(A,{value:re(!0),items:se(ae)}),J=re(!1)},clear(ae){for(;D.length!==0;)D.remove(0);h.setValue(A,{value:null,items:[]}),J=re(!1)},insert(ae){const{index:fe,displayValue:pe,exportValue:we}=ae.detail.insert,Ae=D.children[fe],Te=document.createElement("option");Te.textContent=pe,Te.value=we,Ae?Ae.before(Te):D.append(Te),h.setValue(A,{value:re(!0),items:se(ae)}),J=re(!1)},items(ae){const{items:fe}=ae.detail;for(;D.length!==0;)D.remove(0);for(const pe of fe){const{displayValue:we,exportValue:Ae}=pe,Te=document.createElement("option");Te.textContent=we,Te.value=Ae,D.append(Te)}D.options.length>0&&(D.options[0].selected=!0),h.setValue(A,{value:re(!0),items:se(ae)}),J=re(!1)},indices(ae){const fe=new Set(ae.detail.indices);for(const pe of ae.target.options)pe.selected=fe.has(pe.index);h.setValue(A,{value:re(!0)}),J=re(!1)},editable(ae){ae.target.disabled=!ae.detail.editable}};this._dispatchEventFromSandbox(ne,oe)}),D.addEventListener("input",oe=>{var ae;const ne=re(!0);h.setValue(A,{value:ne}),oe.preventDefault(),(ae=this.linkService.eventBus)==null||ae.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:J,changeEx:ne,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(D,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],oe=>oe.target.value)):D.addEventListener("input",function(oe){h.setValue(A,{value:re(!0)})}),this.data.combo&&this._setTextStyle(D),this._setBackgroundColor(D),this._setDefaultPropertiesFromJS(D),this.container.append(D),this.container}}const L=class L extends m{constructor(h){var D,N,Z;const{data:A}=h,M=!L.IGNORE_TYPES.has(A.parentType)&&!!((D=A.titleObj)!=null&&D.str||(N=A.contentsObj)!=null&&N.str||(Z=A.richText)!=null&&Z.str);super(h,{isRenderable:M})}render(){this.container.classList.add("popupAnnotation");const h=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(h.length===0)return this.container;const A=new f({container:this.container,trigger:Array.from(h),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),M=this.page,D=i.Util.normalizeRect([this.data.parentRect[0],M.view[3]-this.data.parentRect[1]+M.view[1],this.data.parentRect[2],M.view[3]-this.data.parentRect[3]+M.view[1]]),N=D[0]+this.data.parentRect[2]-this.data.parentRect[0],Z=D[1],{pageWidth:re,pageHeight:J,pageX:se,pageY:oe}=this.viewport.rawDims;return this.container.style.left=`${100*(N-se)/re}%`,this.container.style.top=`${100*(Z-oe)/J}%`,this.container.append(A.render()),this.container}};De(L,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));let p=L;class f{constructor(h){this.container=h.container,this.trigger=h.trigger,this.color=h.color,this.titleObj=h.titleObj,this.modificationDate=h.modificationDate,this.contentsObj=h.contentsObj,this.richText=h.richText,this.hideWrapper=h.hideWrapper||!1,this.pinned=!1}render(){var re,J;const A=document.createElement("div");A.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?A:this.container,this.hideElement.hidden=!0;const M=document.createElement("div");M.classList.add("popup");const D=this.color;if(D){const se=.7*(255-D[0])+D[0],oe=.7*(255-D[1])+D[1],ne=.7*(255-D[2])+D[2];M.style.backgroundColor=i.Util.makeHexColor(se|0,oe|0,ne|0)}const N=document.createElement("h1");N.dir=this.titleObj.dir,N.textContent=this.titleObj.str,M.append(N);const Z=r.PDFDateString.toDateObject(this.modificationDate);if(Z){const se=document.createElement("span");se.classList.add("popupDate"),se.textContent="{{date}}, {{time}}",se.dataset.l10nId="annotation_date_string",se.dataset.l10nArgs=JSON.stringify({date:Z.toLocaleDateString(),time:Z.toLocaleTimeString()}),M.append(se)}if((re=this.richText)!=null&&re.str&&(!((J=this.contentsObj)!=null&&J.str)||this.contentsObj.str===this.richText.str))b.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:M}),M.lastChild.classList.add("richText","popupContent");else{const se=this._formatContents(this.contentsObj);M.append(se)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const se of this.trigger)se.addEventListener("click",this._toggle.bind(this)),se.addEventListener("mouseover",this._show.bind(this,!1)),se.addEventListener("mouseout",this._hide.bind(this,!1));return M.addEventListener("click",this._hide.bind(this,!0)),A.append(M),A}_formatContents({str:h,dir:A}){const M=document.createElement("p");M.classList.add("popupContent"),M.dir=A;const D=h.split(/(?:\r\n?|\n)/);for(let N=0,Z=D.length;N<Z;++N){const re=D[N];M.append(document.createTextNode(re)),N<Z-1&&M.append(document.createElement("br"))}return M}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(h=!1){h&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(h=!0){h&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class u extends m{constructor(h){var M,D,N;const A=!!(h.data.hasPopup||(M=h.data.titleObj)!=null&&M.str||(D=h.data.contentsObj)!=null&&D.str||(N=h.data.richText)!=null&&N.str);super(h,{isRenderable:A,ignoreBorder:!0}),this.textContent=h.data.textContent}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const h=document.createElement("div");h.classList.add("annotationTextContent"),h.setAttribute("role","comment");for(const A of this.textContent){const M=document.createElement("span");M.textContent=A,h.append(M)}this.container.append(h)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class w extends m{constructor(h){var M,D,N;const A=!!(h.data.hasPopup||(M=h.data.titleObj)!=null&&M.str||(D=h.data.contentsObj)!=null&&D.str||(N=h.data.richText)!=null&&N.str);super(h,{isRenderable:A,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const h=this.data,{width:A,height:M}=I(h.rect),D=this.svgFactory.create(A,M,!0),N=this.svgFactory.createElement("svg:line");return N.setAttribute("x1",h.rect[2]-h.lineCoordinates[0]),N.setAttribute("y1",h.rect[3]-h.lineCoordinates[1]),N.setAttribute("x2",h.rect[2]-h.lineCoordinates[2]),N.setAttribute("y2",h.rect[3]-h.lineCoordinates[3]),N.setAttribute("stroke-width",h.borderStyle.width||1),N.setAttribute("stroke","transparent"),N.setAttribute("fill","transparent"),D.append(N),this.container.append(D),this._createPopup(N,h),this.container}}class O extends m{constructor(h){var M,D,N;const A=!!(h.data.hasPopup||(M=h.data.titleObj)!=null&&M.str||(D=h.data.contentsObj)!=null&&D.str||(N=h.data.richText)!=null&&N.str);super(h,{isRenderable:A,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const h=this.data,{width:A,height:M}=I(h.rect),D=this.svgFactory.create(A,M,!0),N=h.borderStyle.width,Z=this.svgFactory.createElement("svg:rect");return Z.setAttribute("x",N/2),Z.setAttribute("y",N/2),Z.setAttribute("width",A-N),Z.setAttribute("height",M-N),Z.setAttribute("stroke-width",N||1),Z.setAttribute("stroke","transparent"),Z.setAttribute("fill","transparent"),D.append(Z),this.container.append(D),this._createPopup(Z,h),this.container}}class _ extends m{constructor(h){var M,D,N;const A=!!(h.data.hasPopup||(M=h.data.titleObj)!=null&&M.str||(D=h.data.contentsObj)!=null&&D.str||(N=h.data.richText)!=null&&N.str);super(h,{isRenderable:A,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const h=this.data,{width:A,height:M}=I(h.rect),D=this.svgFactory.create(A,M,!0),N=h.borderStyle.width,Z=this.svgFactory.createElement("svg:ellipse");return Z.setAttribute("cx",A/2),Z.setAttribute("cy",M/2),Z.setAttribute("rx",A/2-N/2),Z.setAttribute("ry",M/2-N/2),Z.setAttribute("stroke-width",N||1),Z.setAttribute("stroke","transparent"),Z.setAttribute("fill","transparent"),D.append(Z),this.container.append(D),this._createPopup(Z,h),this.container}}class $ extends m{constructor(h){var M,D,N;const A=!!(h.data.hasPopup||(M=h.data.titleObj)!=null&&M.str||(D=h.data.contentsObj)!=null&&D.str||(N=h.data.richText)!=null&&N.str);super(h,{isRenderable:A,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const h=this.data,{width:A,height:M}=I(h.rect),D=this.svgFactory.create(A,M,!0);let N=[];for(const re of h.vertices){const J=re.x-h.rect[0],se=h.rect[3]-re.y;N.push(J+","+se)}N=N.join(" ");const Z=this.svgFactory.createElement(this.svgElementName);return Z.setAttribute("points",N),Z.setAttribute("stroke-width",h.borderStyle.width||1),Z.setAttribute("stroke","transparent"),Z.setAttribute("fill","transparent"),D.append(Z),this.container.append(D),this._createPopup(Z,h),this.container}}class X extends ${constructor(h){super(h),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class K extends m{constructor(h){var M,D,N;const A=!!(h.data.hasPopup||(M=h.data.titleObj)!=null&&M.str||(D=h.data.contentsObj)!=null&&D.str||(N=h.data.richText)!=null&&N.str);super(h,{isRenderable:A,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Q extends m{constructor(h){var M,D,N;const A=!!(h.data.hasPopup||(M=h.data.titleObj)!=null&&M.str||(D=h.data.contentsObj)!=null&&D.str||(N=h.data.richText)!=null&&N.str);super(h,{isRenderable:A,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const h=this.data,{width:A,height:M}=I(h.rect),D=this.svgFactory.create(A,M,!0);for(const N of h.inkLists){let Z=[];for(const J of N){const se=J.x-h.rect[0],oe=h.rect[3]-J.y;Z.push(`${se},${oe}`)}Z=Z.join(" ");const re=this.svgFactory.createElement(this.svgElementName);re.setAttribute("points",Z),re.setAttribute("stroke-width",h.borderStyle.width||1),re.setAttribute("stroke","transparent"),re.setAttribute("fill","transparent"),this._createPopup(re,h),D.append(re)}return this.container.append(D),this.container}}class te extends m{constructor(h){var M,D,N;const A=!!(h.data.hasPopup||(M=h.data.titleObj)!=null&&M.str||(D=h.data.contentsObj)!=null&&D.str||(N=h.data.richText)!=null&&N.str);super(h,{isRenderable:A,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}class ue extends m{constructor(h){var M,D,N;const A=!!(h.data.hasPopup||(M=h.data.titleObj)!=null&&M.str||(D=h.data.contentsObj)!=null&&D.str||(N=h.data.richText)!=null&&N.str);super(h,{isRenderable:A,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}class ce extends m{constructor(h){var M,D,N;const A=!!(h.data.hasPopup||(M=h.data.titleObj)!=null&&M.str||(D=h.data.contentsObj)!=null&&D.str||(N=h.data.richText)!=null&&N.str);super(h,{isRenderable:A,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}class de extends m{constructor(h){var M,D,N;const A=!!(h.data.hasPopup||(M=h.data.titleObj)!=null&&M.str||(D=h.data.contentsObj)!=null&&D.str||(N=h.data.richText)!=null&&N.str);super(h,{isRenderable:A,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}class me extends m{constructor(h){var M,D,N;const A=!!(h.data.hasPopup||(M=h.data.titleObj)!=null&&M.str||(D=h.data.contentsObj)!=null&&D.str||(N=h.data.richText)!=null&&N.str);super(h,{isRenderable:A,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Ee extends m{constructor(h){var D;super(h,{isRenderable:!0});const{filename:A,content:M}=this.data.file;this.filename=(0,r.getFilenameFromUrl)(A,!0),this.content=M,(D=this.linkService.eventBus)==null||D.dispatch("fileattachmentannotation",{source:this,filename:A,content:M})}render(){var A,M;this.container.classList.add("fileAttachmentAnnotation");let h;return this.data.hasAppearance?h=document.createElement("div"):(h=document.createElement("img"),h.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),h.classList.add("popupTriggerArea"),h.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((A=this.data.titleObj)!=null&&A.str||(M=this.data.contentsObj)!=null&&M.str||this.data.richText)&&this._createPopup(h,this.data),this.container.append(h),this.container}_download(){var h;(h=this.downloadManager)==null||h.openOrDownloadData(this.container,this.content,this.filename)}}const H=class H{static render(h){var J,se;const{annotations:A,div:M,viewport:D,accessibilityManager:N}=h;(0,r.setLayerDimensions)(M,D);const Z={data:null,layer:M,page:h.page,viewport:D,linkService:h.linkService,downloadManager:h.downloadManager,imageResourcesPath:h.imageResourcesPath||"",renderForms:h.renderForms!==!1,svgFactory:new r.DOMSVGFactory,annotationStorage:h.annotationStorage||new s.AnnotationStorage,enableScripting:h.enableScripting===!0,hasJSActions:h.hasJSActions,fieldObjects:h.fieldObjects};let re=0;for(const oe of A){if(oe.noHTML)continue;if(oe.annotationType!==i.AnnotationType.POPUP){const{width:fe,height:pe}=I(oe.rect);if(fe<=0||pe<=0)continue}Z.data=oe;const ne=x.create(Z);if(!ne.isRenderable)continue;const ae=ne.render();if(oe.hidden&&(ae.style.visibility="hidden"),Array.isArray(ae))for(const fe of ae)fe.style.zIndex=re++,ie(J=H,q,Ft).call(J,fe,oe.id,M,N);else ae.style.zIndex=re++,ne instanceof p?M.prepend(ae):ie(se=H,q,Ft).call(se,ae,oe.id,M,N)}ie(this,Y,Pt).call(this,M,h.annotationCanvasMap)}static update(h){const{annotationCanvasMap:A,div:M,viewport:D}=h;(0,r.setLayerDimensions)(M,{rotation:D.rotation}),ie(this,Y,Pt).call(this,M,A),M.hidden=!1}};q=new WeakSet,Ft=function(h,A,M,D){const N=h.firstChild||h;N.id=`${r.AnnotationPrefix}${A}`,M.append(h),D==null||D.moveElementInDOM(M,h,N,!1)},Y=new WeakSet,Pt=function(h,A){if(A){for(const[M,D]of A){const N=h.querySelector(`[data-annotation-id="${M}"]`);if(!N)continue;const{firstChild:Z}=N;Z?Z.nodeName==="CANVAS"?Z.replaceWith(D):Z.before(D):N.append(D)}A.clear()}},ee(H,q),ee(H,Y);let Se=H;t.AnnotationLayer=Se},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function n(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}class i{static CMYK_G([s,a,b,E]){return["G",1-Math.min(1,.3*s+.59*b+.11*a+E)]}static G_CMYK([s]){return["CMYK",0,0,0,1-s]}static G_RGB([s]){return["RGB",s,s,s]}static G_HTML([s]){const a=n(s);return`#${a}${a}${a}`}static RGB_G([s,a,b]){return["G",.3*s+.59*a+.11*b]}static RGB_HTML([s,a,b]){const E=n(s),l=n(a),c=n(b);return`#${E}${l}${c}`}static T_HTML(){return"#00000000"}static CMYK_RGB([s,a,b,E]){return["RGB",1-Math.min(1,s+E),1-Math.min(1,b+E),1-Math.min(1,a+E)]}static CMYK_HTML(s){const a=this.CMYK_RGB(s).slice(1);return this.RGB_HTML(a)}static RGB_CMYK([s,a,b]){const E=1-s,l=1-a,c=1-b,I=Math.min(E,l,c);return["CMYK",E,l,c,I]}}t.ColorConverters=i},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var i=n(19);class r{static setupStorage(a,b,E,l,c){const I=l.getValue(b,{value:null});switch(E.name){case"textarea":if(I.value!==null&&(a.textContent=I.value),c==="print")break;a.addEventListener("input",x=>{l.setValue(b,{value:x.target.value})});break;case"input":if(E.attributes.type==="radio"||E.attributes.type==="checkbox"){if(I.value===E.attributes.xfaOn?a.setAttribute("checked",!0):I.value===E.attributes.xfaOff&&a.removeAttribute("checked"),c==="print")break;a.addEventListener("change",x=>{l.setValue(b,{value:x.target.checked?x.target.getAttribute("xfaOn"):x.target.getAttribute("xfaOff")})})}else{if(I.value!==null&&a.setAttribute("value",I.value),c==="print")break;a.addEventListener("input",x=>{l.setValue(b,{value:x.target.value})})}break;case"select":if(I.value!==null)for(const x of E.children)x.attributes.value===I.value&&(x.attributes.selected=!0);a.addEventListener("input",x=>{const m=x.target.options,g=m.selectedIndex===-1?"":m[m.selectedIndex].value;l.setValue(b,{value:g})});break}}static setAttributes({html:a,element:b,storage:E=null,intent:l,linkService:c}){const{attributes:I}=b,x=a instanceof HTMLAnchorElement;I.type==="radio"&&(I.name=`${I.name}-${l}`);for(const[m,g]of Object.entries(I))if(g!=null)switch(m){case"class":g.length&&a.setAttribute(m,g.join(" "));break;case"dataId":break;case"id":a.setAttribute("data-element-id",g);break;case"style":Object.assign(a.style,g);break;case"textContent":a.textContent=g;break;default:(!x||m!=="href"&&m!=="newWindow")&&a.setAttribute(m,g)}x&&c.addLinkAttributes(a,I.href,I.newWindow),E&&I.dataId&&this.setupStorage(a,I.dataId,b,E)}static render(a){var S;const b=a.annotationStorage,E=a.linkService,l=a.xfaHtml,c=a.intent||"display",I=document.createElement(l.name);l.attributes&&this.setAttributes({html:I,element:l,intent:c,linkService:E});const x=[[l,-1,I]],m=a.div;if(m.append(I),a.viewport){const d=`matrix(${a.viewport.transform.join(",")})`;m.style.transform=d}c!=="richText"&&m.setAttribute("class","xfaLayer xfaFont");const g=[];for(;x.length>0;){const[d,T,P]=x.at(-1);if(T+1===d.children.length){x.pop();continue}const F=d.children[++x.at(-1)[1]];if(F===null)continue;const{name:y}=F;if(y==="#text"){const p=document.createTextNode(F.value);g.push(p),P.append(p);continue}let o;if((S=F==null?void 0:F.attributes)!=null&&S.xmlns?o=document.createElementNS(F.attributes.xmlns,y):o=document.createElement(y),P.append(o),F.attributes&&this.setAttributes({html:o,element:F,storage:b,intent:c,linkService:E}),F.children&&F.children.length>0)x.push([F,-1,o]);else if(F.value){const p=document.createTextNode(F.value);i.XfaText.shouldBuildText(y)&&g.push(p),o.append(p)}}for(const d of m.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:g}}static update(a){const b=`matrix(${a.viewport.transform.join(",")})`;a.div.style.transform=b,a.div.hidden=!1}}t.XfaLayer=r},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var i=n(6),r=n(1),s=n(10);let a=class{constructor(){(0,r.unreachable)("Not implemented: SVGGraphics")}};t.SVGGraphics=a;{let S=function(o){let p=[];const f=[];for(const u of o){if(u.fn==="save"){p.push({fnId:92,fn:"group",items:[]}),f.push(p),p=p.at(-1).items;continue}u.fn==="restore"?p=f.pop():p.push(u)}return p},d=function(o){if(Number.isInteger(o))return o.toString();const p=o.toFixed(10);let f=p.length-1;if(p[f]!=="0")return p;do f--;while(p[f]==="0");return p.substring(0,p[f]==="."?f:f+1)},T=function(o){if(o[4]===0&&o[5]===0){if(o[1]===0&&o[2]===0)return o[0]===1&&o[3]===1?"":`scale(${d(o[0])} ${d(o[3])})`;if(o[0]===o[3]&&o[1]===-o[2]){const p=Math.acos(o[0])*180/Math.PI;return`rotate(${d(p)})`}}else if(o[0]===1&&o[1]===0&&o[2]===0&&o[3]===1)return`translate(${d(o[4])} ${d(o[5])})`;return`matrix(${d(o[0])} ${d(o[1])} ${d(o[2])} ${d(o[3])} ${d(o[4])} ${d(o[5])})`};const b={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},E="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/1999/xlink",c=["butt","round","square"],I=["miter","round","bevel"],x=function(o,p="",f=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!f)return URL.createObjectURL(new Blob([o],{type:p}));const u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let w=`data:${p};base64,`;for(let O=0,_=o.length;O<_;O+=3){const $=o[O]&255,X=o[O+1]&255,K=o[O+2]&255,Q=$>>2,te=($&3)<<4|X>>4,ue=O+1<_?(X&15)<<2|K>>6:64,ce=O+2<_?K&63:64;w+=u[Q]+u[te]+u[ue]+u[ce]}return w},m=function(){const o=new Uint8Array([137,80,78,71,13,10,26,10]),p=12,f=new Int32Array(256);for(let K=0;K<256;K++){let Q=K;for(let te=0;te<8;te++)Q&1?Q=3988292384^Q>>1&2147483647:Q=Q>>1&2147483647;f[K]=Q}function u(K,Q,te){let ue=-1;for(let ce=Q;ce<te;ce++){const de=(ue^K[ce])&255,me=f[de];ue=ue>>>8^me}return ue^-1}function w(K,Q,te,ue){let ce=ue;const de=Q.length;te[ce]=de>>24&255,te[ce+1]=de>>16&255,te[ce+2]=de>>8&255,te[ce+3]=de&255,ce+=4,te[ce]=K.charCodeAt(0)&255,te[ce+1]=K.charCodeAt(1)&255,te[ce+2]=K.charCodeAt(2)&255,te[ce+3]=K.charCodeAt(3)&255,ce+=4,te.set(Q,ce),ce+=Q.length;const me=u(te,ue+4,ce);te[ce]=me>>24&255,te[ce+1]=me>>16&255,te[ce+2]=me>>8&255,te[ce+3]=me&255}function O(K,Q,te){let ue=1,ce=0;for(let de=Q;de<te;++de)ue=(ue+(K[de]&255))%65521,ce=(ce+ue)%65521;return ce<<16|ue}function _(K){if(!s.isNodeJS)return $(K);try{let Q;parseInt(browser$1.versions.node)>=8?Q=K:Q=Buffer.from(K);const te=require$$5.deflateSync(Q,{level:9});return te instanceof Uint8Array?te:new Uint8Array(te)}catch(Q){(0,r.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Q)}return $(K)}function $(K){let Q=K.length;const te=65535,ue=Math.ceil(Q/te),ce=new Uint8Array(2+Q+ue*5+4);let de=0;ce[de++]=120,ce[de++]=156;let me=0;for(;Q>te;)ce[de++]=0,ce[de++]=255,ce[de++]=255,ce[de++]=0,ce[de++]=0,ce.set(K.subarray(me,me+te),de),de+=te,me+=te,Q-=te;ce[de++]=1,ce[de++]=Q&255,ce[de++]=Q>>8&255,ce[de++]=~Q&65535&255,ce[de++]=(~Q&65535)>>8&255,ce.set(K.subarray(me),de),de+=K.length-me;const Ee=O(K,0,K.length);return ce[de++]=Ee>>24&255,ce[de++]=Ee>>16&255,ce[de++]=Ee>>8&255,ce[de++]=Ee&255,ce}function X(K,Q,te,ue){const ce=K.width,de=K.height;let me,Ee,Se;const ve=K.data;switch(Q){case r.ImageKind.GRAYSCALE_1BPP:Ee=0,me=1,Se=ce+7>>3;break;case r.ImageKind.RGB_24BPP:Ee=2,me=8,Se=ce*3;break;case r.ImageKind.RGBA_32BPP:Ee=6,me=8,Se=ce*4;break;default:throw new Error("invalid format")}const G=new Uint8Array((1+Se)*de);let C=0,R=0;for(let H=0;H<de;++H)G[C++]=0,G.set(ve.subarray(R,R+Se),C),R+=Se,C+=Se;if(Q===r.ImageKind.GRAYSCALE_1BPP&&ue){C=0;for(let H=0;H<de;H++){C++;for(let z=0;z<Se;z++)G[C++]^=255}}const L=new Uint8Array([ce>>24&255,ce>>16&255,ce>>8&255,ce&255,de>>24&255,de>>16&255,de>>8&255,de&255,me,Ee,0,0,0]),q=_(G),W=o.length+p*3+L.length+q.length,Y=new Uint8Array(W);let j=0;return Y.set(o,j),j+=o.length,w("IHDR",L,Y,j),j+=p+L.length,w("IDATA",q,Y,j),j+=p+q.length,w("IEND",new Uint8Array(0),Y,j),x(Y,"image/png",te)}return function(Q,te,ue){const ce=Q.kind===void 0?r.ImageKind.GRAYSCALE_1BPP:Q.kind;return X(Q,ce,te,ue)}}();class g{constructor(){this.fontSizeScale=1,this.fontWeight=b.fontWeight,this.fontSize=0,this.textMatrix=r.IDENTITY_MATRIX,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=r.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=b.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(p,f){this.x=p,this.y=f}}let P=0,F=0,y=0;t.SVGGraphics=a=class{constructor(o,p,f=!1){(0,i.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new i.DOMSVGFactory,this.current=new g,this.transformMatrix=r.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=o,this.objs=p,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!f,this._operatorIdMapping=[];for(const u in r.OPS)this._operatorIdMapping[r.OPS[u]]=u}getObject(o,p=null){return typeof o=="string"?o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o):p}save(){this.transformStack.push(this.transformMatrix);const o=this.current;this.extraStack.push(o),this.current=o.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(o){this.save(),this.executeOpTree(o),this.restore()}loadDependencies(o){const p=o.fnArray,f=o.argsArray;for(let u=0,w=p.length;u<w;u++)if(p[u]===r.OPS.dependency)for(const O of f[u]){const _=O.startsWith("g_")?this.commonObjs:this.objs,$=new Promise(X=>{_.get(O,X)});this.current.dependencies.push($)}return Promise.all(this.current.dependencies)}transform(o,p,f,u,w,O){const _=[o,p,f,u,w,O];this.transformMatrix=r.Util.transform(this.transformMatrix,_),this.tgrp=null}getSVG(o,p){this.viewport=p;const f=this._initialize(p);return this.loadDependencies(o).then(()=>(this.transformMatrix=r.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(o)),f))}convertOpList(o){const p=this._operatorIdMapping,f=o.argsArray,u=o.fnArray,w=[];for(let O=0,_=u.length;O<_;O++){const $=u[O];w.push({fnId:$,fn:p[$],args:f[O]})}return S(w)}executeOpTree(o){for(const p of o){const f=p.fn,u=p.fnId,w=p.args;switch(u|0){case r.OPS.beginText:this.beginText();break;case r.OPS.dependency:break;case r.OPS.setLeading:this.setLeading(w);break;case r.OPS.setLeadingMoveText:this.setLeadingMoveText(w[0],w[1]);break;case r.OPS.setFont:this.setFont(w);break;case r.OPS.showText:this.showText(w[0]);break;case r.OPS.showSpacedText:this.showText(w[0]);break;case r.OPS.endText:this.endText();break;case r.OPS.moveText:this.moveText(w[0],w[1]);break;case r.OPS.setCharSpacing:this.setCharSpacing(w[0]);break;case r.OPS.setWordSpacing:this.setWordSpacing(w[0]);break;case r.OPS.setHScale:this.setHScale(w[0]);break;case r.OPS.setTextMatrix:this.setTextMatrix(w[0],w[1],w[2],w[3],w[4],w[5]);break;case r.OPS.setTextRise:this.setTextRise(w[0]);break;case r.OPS.setTextRenderingMode:this.setTextRenderingMode(w[0]);break;case r.OPS.setLineWidth:this.setLineWidth(w[0]);break;case r.OPS.setLineJoin:this.setLineJoin(w[0]);break;case r.OPS.setLineCap:this.setLineCap(w[0]);break;case r.OPS.setMiterLimit:this.setMiterLimit(w[0]);break;case r.OPS.setFillRGBColor:this.setFillRGBColor(w[0],w[1],w[2]);break;case r.OPS.setStrokeRGBColor:this.setStrokeRGBColor(w[0],w[1],w[2]);break;case r.OPS.setStrokeColorN:this.setStrokeColorN(w);break;case r.OPS.setFillColorN:this.setFillColorN(w);break;case r.OPS.shadingFill:this.shadingFill(w[0]);break;case r.OPS.setDash:this.setDash(w[0],w[1]);break;case r.OPS.setRenderingIntent:this.setRenderingIntent(w[0]);break;case r.OPS.setFlatness:this.setFlatness(w[0]);break;case r.OPS.setGState:this.setGState(w[0]);break;case r.OPS.fill:this.fill();break;case r.OPS.eoFill:this.eoFill();break;case r.OPS.stroke:this.stroke();break;case r.OPS.fillStroke:this.fillStroke();break;case r.OPS.eoFillStroke:this.eoFillStroke();break;case r.OPS.clip:this.clip("nonzero");break;case r.OPS.eoClip:this.clip("evenodd");break;case r.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case r.OPS.paintImageXObject:this.paintImageXObject(w[0]);break;case r.OPS.paintInlineImageXObject:this.paintInlineImageXObject(w[0]);break;case r.OPS.paintImageMaskXObject:this.paintImageMaskXObject(w[0]);break;case r.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(w[0],w[1]);break;case r.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case r.OPS.closePath:this.closePath();break;case r.OPS.closeStroke:this.closeStroke();break;case r.OPS.closeFillStroke:this.closeFillStroke();break;case r.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case r.OPS.nextLine:this.nextLine();break;case r.OPS.transform:this.transform(w[0],w[1],w[2],w[3],w[4],w[5]);break;case r.OPS.constructPath:this.constructPath(w[0],w[1]);break;case r.OPS.endPath:this.endPath();break;case 92:this.group(p.items);break;default:(0,r.warn)(`Unimplemented operator ${f}`);break}}}setWordSpacing(o){this.current.wordSpacing=o}setCharSpacing(o){this.current.charSpacing=o}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(o,p,f,u,w,O){const _=this.current;_.textMatrix=_.lineMatrix=[o,p,f,u,w,O],_.textMatrixScale=Math.hypot(o,p),_.x=_.lineX=0,_.y=_.lineY=0,_.xcoords=[],_.ycoords=[],_.tspan=this.svgFactory.createElement("svg:tspan"),_.tspan.setAttributeNS(null,"font-family",_.fontFamily),_.tspan.setAttributeNS(null,"font-size",`${d(_.fontSize)}px`),_.tspan.setAttributeNS(null,"y",d(-_.y)),_.txtElement=this.svgFactory.createElement("svg:text"),_.txtElement.append(_.tspan)}beginText(){const o=this.current;o.x=o.lineX=0,o.y=o.lineY=0,o.textMatrix=r.IDENTITY_MATRIX,o.lineMatrix=r.IDENTITY_MATRIX,o.textMatrixScale=1,o.tspan=this.svgFactory.createElement("svg:tspan"),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtgrp=this.svgFactory.createElement("svg:g"),o.xcoords=[],o.ycoords=[]}moveText(o,p){const f=this.current;f.x=f.lineX+=o,f.y=f.lineY+=p,f.xcoords=[],f.ycoords=[],f.tspan=this.svgFactory.createElement("svg:tspan"),f.tspan.setAttributeNS(null,"font-family",f.fontFamily),f.tspan.setAttributeNS(null,"font-size",`${d(f.fontSize)}px`),f.tspan.setAttributeNS(null,"y",d(-f.y))}showText(o){const p=this.current,f=p.font,u=p.fontSize;if(u===0)return;const w=p.fontSizeScale,O=p.charSpacing,_=p.wordSpacing,$=p.fontDirection,X=p.textHScale*$,K=f.vertical,Q=K?1:-1,te=f.defaultVMetrics,ue=u*p.fontMatrix[0];let ce=0;for(const Ee of o){if(Ee===null){ce+=$*_;continue}else if(typeof Ee=="number"){ce+=Q*Ee*u/1e3;continue}const Se=(Ee.isSpace?_:0)+O,ve=Ee.fontChar;let G,C,R=Ee.width;if(K){let q;const W=Ee.vmetric||te;q=Ee.vmetric?W[1]:R*.5,q=-q*ue;const Y=W[2]*ue;R=W?-W[0]:R,G=q/w,C=(ce+Y)/w}else G=ce/w,C=0;(Ee.isInFont||f.missingFile)&&(p.xcoords.push(p.x+G),K&&p.ycoords.push(-p.y+C),p.tspan.textContent+=ve);let L;K?L=R*ue-Se*$:L=R*ue+Se*$,ce+=L}p.tspan.setAttributeNS(null,"x",p.xcoords.map(d).join(" ")),K?p.tspan.setAttributeNS(null,"y",p.ycoords.map(d).join(" ")):p.tspan.setAttributeNS(null,"y",d(-p.y)),K?p.y-=ce:p.x+=ce*X,p.tspan.setAttributeNS(null,"font-family",p.fontFamily),p.tspan.setAttributeNS(null,"font-size",`${d(p.fontSize)}px`),p.fontStyle!==b.fontStyle&&p.tspan.setAttributeNS(null,"font-style",p.fontStyle),p.fontWeight!==b.fontWeight&&p.tspan.setAttributeNS(null,"font-weight",p.fontWeight);const de=p.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;if(de===r.TextRenderingMode.FILL||de===r.TextRenderingMode.FILL_STROKE?(p.fillColor!==b.fillColor&&p.tspan.setAttributeNS(null,"fill",p.fillColor),p.fillAlpha<1&&p.tspan.setAttributeNS(null,"fill-opacity",p.fillAlpha)):p.textRenderingMode===r.TextRenderingMode.ADD_TO_PATH?p.tspan.setAttributeNS(null,"fill","transparent"):p.tspan.setAttributeNS(null,"fill","none"),de===r.TextRenderingMode.STROKE||de===r.TextRenderingMode.FILL_STROKE){const Ee=1/(p.textMatrixScale||1);this._setStrokeAttributes(p.tspan,Ee)}let me=p.textMatrix;p.textRise!==0&&(me=me.slice(),me[5]+=p.textRise),p.txtElement.setAttributeNS(null,"transform",`${T(me)} scale(${d(X)}, -1)`),p.txtElement.setAttributeNS(E,"xml:space","preserve"),p.txtElement.append(p.tspan),p.txtgrp.append(p.txtElement),this._ensureTransformGroup().append(p.txtElement)}setLeadingMoveText(o,p){this.setLeading(-p),this.moveText(o,p)}addFontStyle(o){if(!o.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const p=x(o.data,o.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${o.loadedName}"; src: url(${p}); }
`}setFont(o){const p=this.current,f=this.commonObjs.get(o[0]);let u=o[1];p.font=f,this.embedFonts&&!f.missingFile&&!this.embeddedFonts[f.loadedName]&&(this.addFontStyle(f),this.embeddedFonts[f.loadedName]=f),p.fontMatrix=f.fontMatrix||r.FONT_IDENTITY_MATRIX;let w="normal";f.black?w="900":f.bold&&(w="bold");const O=f.italic?"italic":"normal";u<0?(u=-u,p.fontDirection=-1):p.fontDirection=1,p.fontSize=u,p.fontFamily=f.loadedName,p.fontWeight=w,p.fontStyle=O,p.tspan=this.svgFactory.createElement("svg:tspan"),p.tspan.setAttributeNS(null,"y",d(-p.y)),p.xcoords=[],p.ycoords=[]}endText(){var p;const o=this.current;o.textRenderingMode&r.TextRenderingMode.ADD_TO_PATH_FLAG&&((p=o.txtElement)!=null&&p.hasChildNodes())&&(o.element=o.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(o){o>0&&(this.current.lineWidth=o)}setLineCap(o){this.current.lineCap=c[o]}setLineJoin(o){this.current.lineJoin=I[o]}setMiterLimit(o){this.current.miterLimit=o}setStrokeAlpha(o){this.current.strokeAlpha=o}setStrokeRGBColor(o,p,f){this.current.strokeColor=r.Util.makeHexColor(o,p,f)}setFillAlpha(o){this.current.fillAlpha=o}setFillRGBColor(o,p,f){this.current.fillColor=r.Util.makeHexColor(o,p,f),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(o){this.current.strokeColor=this._makeColorN_Pattern(o)}setFillColorN(o){this.current.fillColor=this._makeColorN_Pattern(o)}shadingFill(o){const p=this.viewport.width,f=this.viewport.height,u=r.Util.inverseTransform(this.transformMatrix),w=r.Util.applyTransform([0,0],u),O=r.Util.applyTransform([0,f],u),_=r.Util.applyTransform([p,0],u),$=r.Util.applyTransform([p,f],u),X=Math.min(w[0],O[0],_[0],$[0]),K=Math.min(w[1],O[1],_[1],$[1]),Q=Math.max(w[0],O[0],_[0],$[0]),te=Math.max(w[1],O[1],_[1],$[1]),ue=this.svgFactory.createElement("svg:rect");ue.setAttributeNS(null,"x",X),ue.setAttributeNS(null,"y",K),ue.setAttributeNS(null,"width",Q-X),ue.setAttributeNS(null,"height",te-K),ue.setAttributeNS(null,"fill",this._makeShadingPattern(o)),this.current.fillAlpha<1&&ue.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(ue)}_makeColorN_Pattern(o){return o[0]==="TilingPattern"?this._makeTilingPattern(o):this._makeShadingPattern(o)}_makeTilingPattern(o){const p=o[1],f=o[2],u=o[3]||r.IDENTITY_MATRIX,[w,O,_,$]=o[4],X=o[5],K=o[6],Q=o[7],te=`shading${y++}`,[ue,ce,de,me]=r.Util.normalizeRect([...r.Util.applyTransform([w,O],u),...r.Util.applyTransform([_,$],u)]),[Ee,Se]=r.Util.singularValueDecompose2dScale(u),ve=X*Ee,G=K*Se,C=this.svgFactory.createElement("svg:pattern");C.setAttributeNS(null,"id",te),C.setAttributeNS(null,"patternUnits","userSpaceOnUse"),C.setAttributeNS(null,"width",ve),C.setAttributeNS(null,"height",G),C.setAttributeNS(null,"x",`${ue}`),C.setAttributeNS(null,"y",`${ce}`);const R=this.svg,L=this.transformMatrix,q=this.current.fillColor,W=this.current.strokeColor,Y=this.svgFactory.create(de-ue,me-ce);if(this.svg=Y,this.transformMatrix=u,Q===2){const j=r.Util.makeHexColor(...p);this.current.fillColor=j,this.current.strokeColor=j}return this.executeOpTree(this.convertOpList(f)),this.svg=R,this.transformMatrix=L,this.current.fillColor=q,this.current.strokeColor=W,C.append(Y.childNodes[0]),this.defs.append(C),`url(#${te})`}_makeShadingPattern(o){switch(typeof o=="string"&&(o=this.objs.get(o)),o[0]){case"RadialAxial":const p=`shading${y++}`,f=o[3];let u;switch(o[1]){case"axial":const w=o[4],O=o[5];u=this.svgFactory.createElement("svg:linearGradient"),u.setAttributeNS(null,"id",p),u.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),u.setAttributeNS(null,"x1",w[0]),u.setAttributeNS(null,"y1",w[1]),u.setAttributeNS(null,"x2",O[0]),u.setAttributeNS(null,"y2",O[1]);break;case"radial":const _=o[4],$=o[5],X=o[6],K=o[7];u=this.svgFactory.createElement("svg:radialGradient"),u.setAttributeNS(null,"id",p),u.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),u.setAttributeNS(null,"cx",$[0]),u.setAttributeNS(null,"cy",$[1]),u.setAttributeNS(null,"r",K),u.setAttributeNS(null,"fx",_[0]),u.setAttributeNS(null,"fy",_[1]),u.setAttributeNS(null,"fr",X);break;default:throw new Error(`Unknown RadialAxial type: ${o[1]}`)}for(const w of f){const O=this.svgFactory.createElement("svg:stop");O.setAttributeNS(null,"offset",w[0]),O.setAttributeNS(null,"stop-color",w[1]),u.append(O)}return this.defs.append(u),`url(#${p})`;case"Mesh":return(0,r.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${o[0]}`)}}setDash(o,p){this.current.dashArray=o,this.current.dashPhase=p}constructPath(o,p){const f=this.current;let u=f.x,w=f.y,O=[],_=0;for(const $ of o)switch($|0){case r.OPS.rectangle:u=p[_++],w=p[_++];const X=p[_++],K=p[_++],Q=u+X,te=w+K;O.push("M",d(u),d(w),"L",d(Q),d(w),"L",d(Q),d(te),"L",d(u),d(te),"Z");break;case r.OPS.moveTo:u=p[_++],w=p[_++],O.push("M",d(u),d(w));break;case r.OPS.lineTo:u=p[_++],w=p[_++],O.push("L",d(u),d(w));break;case r.OPS.curveTo:u=p[_+4],w=p[_+5],O.push("C",d(p[_]),d(p[_+1]),d(p[_+2]),d(p[_+3]),d(u),d(w)),_+=6;break;case r.OPS.curveTo2:O.push("C",d(u),d(w),d(p[_]),d(p[_+1]),d(p[_+2]),d(p[_+3])),u=p[_+2],w=p[_+3],_+=4;break;case r.OPS.curveTo3:u=p[_+2],w=p[_+3],O.push("C",d(p[_]),d(p[_+1]),d(u),d(w),d(u),d(w)),_+=4;break;case r.OPS.closePath:O.push("Z");break}O=O.join(" "),f.path&&o.length>0&&o[0]!==r.OPS.rectangle&&o[0]!==r.OPS.moveTo?O=f.path.getAttributeNS(null,"d")+O:(f.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(f.path)),f.path.setAttributeNS(null,"d",O),f.path.setAttributeNS(null,"fill","none"),f.element=f.path,f.setCurrentPoint(u,w)}endPath(){const o=this.current;if(o.path=null,!this.pendingClip)return;if(!o.element){this.pendingClip=null;return}const p=`clippath${P++}`,f=this.svgFactory.createElement("svg:clipPath");f.setAttributeNS(null,"id",p),f.setAttributeNS(null,"transform",T(this.transformMatrix));const u=o.element.cloneNode(!0);if(this.pendingClip==="evenodd"?u.setAttributeNS(null,"clip-rule","evenodd"):u.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,f.append(u),this.defs.append(f),o.activeClipUrl){o.clipGroup=null;for(const w of this.extraStack)w.clipGroup=null;f.setAttributeNS(null,"clip-path",o.activeClipUrl)}o.activeClipUrl=`url(#${p})`,this.tgrp=null}clip(o){this.pendingClip=o}closePath(){const o=this.current;if(o.path){const p=`${o.path.getAttributeNS(null,"d")}Z`;o.path.setAttributeNS(null,"d",p)}}setLeading(o){this.current.leading=-o}setTextRise(o){this.current.textRise=o}setTextRenderingMode(o){this.current.textRenderingMode=o}setHScale(o){this.current.textHScale=o/100}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(const[p,f]of o)switch(p){case"LW":this.setLineWidth(f);break;case"LC":this.setLineCap(f);break;case"LJ":this.setLineJoin(f);break;case"ML":this.setMiterLimit(f);break;case"D":this.setDash(f[0],f[1]);break;case"RI":this.setRenderingIntent(f);break;case"FL":this.setFlatness(f);break;case"Font":this.setFont(f);break;case"CA":this.setStrokeAlpha(f);break;case"ca":this.setFillAlpha(f);break;default:(0,r.warn)(`Unimplemented graphic state operator ${p}`);break}}fill(){const o=this.current;o.element&&(o.element.setAttributeNS(null,"fill",o.fillColor),o.element.setAttributeNS(null,"fill-opacity",o.fillAlpha),this.endPath())}stroke(){const o=this.current;o.element&&(this._setStrokeAttributes(o.element),o.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(o,p=1){const f=this.current;let u=f.dashArray;p!==1&&u.length>0&&(u=u.map(function(w){return p*w})),o.setAttributeNS(null,"stroke",f.strokeColor),o.setAttributeNS(null,"stroke-opacity",f.strokeAlpha),o.setAttributeNS(null,"stroke-miterlimit",d(f.miterLimit)),o.setAttributeNS(null,"stroke-linecap",f.lineCap),o.setAttributeNS(null,"stroke-linejoin",f.lineJoin),o.setAttributeNS(null,"stroke-width",d(p*f.lineWidth)+"px"),o.setAttributeNS(null,"stroke-dasharray",u.map(d).join(" ")),o.setAttributeNS(null,"stroke-dashoffset",d(p*f.dashPhase)+"px")}eoFill(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width","1px"),o.setAttributeNS(null,"height","1px"),o.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(o)}paintImageXObject(o){const p=this.getObject(o);if(!p){(0,r.warn)(`Dependent image with object ID ${o} is not ready yet`);return}this.paintInlineImageXObject(p)}paintInlineImageXObject(o,p){const f=o.width,u=o.height,w=m(o,this.forceDataSchema,!!p),O=this.svgFactory.createElement("svg:rect");O.setAttributeNS(null,"x","0"),O.setAttributeNS(null,"y","0"),O.setAttributeNS(null,"width",d(f)),O.setAttributeNS(null,"height",d(u)),this.current.element=O,this.clip("nonzero");const _=this.svgFactory.createElement("svg:image");_.setAttributeNS(l,"xlink:href",w),_.setAttributeNS(null,"x","0"),_.setAttributeNS(null,"y",d(-u)),_.setAttributeNS(null,"width",d(f)+"px"),_.setAttributeNS(null,"height",d(u)+"px"),_.setAttributeNS(null,"transform",`scale(${d(1/f)} ${d(-1/u)})`),p?p.append(_):this._ensureTransformGroup().append(_)}paintImageMaskXObject(o){const p=this.getObject(o.data,o);if(p.bitmap){(0,r.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const f=this.current,u=p.width,w=p.height,O=f.fillColor;f.maskId=`mask${F++}`;const _=this.svgFactory.createElement("svg:mask");_.setAttributeNS(null,"id",f.maskId);const $=this.svgFactory.createElement("svg:rect");$.setAttributeNS(null,"x","0"),$.setAttributeNS(null,"y","0"),$.setAttributeNS(null,"width",d(u)),$.setAttributeNS(null,"height",d(w)),$.setAttributeNS(null,"fill",O),$.setAttributeNS(null,"mask",`url(#${f.maskId})`),this.defs.append(_),this._ensureTransformGroup().append($),this.paintInlineImageXObject(p,_)}paintFormXObjectBegin(o,p){if(Array.isArray(o)&&o.length===6&&this.transform(o[0],o[1],o[2],o[3],o[4],o[5]),p){const f=p[2]-p[0],u=p[3]-p[1],w=this.svgFactory.createElement("svg:rect");w.setAttributeNS(null,"x",p[0]),w.setAttributeNS(null,"y",p[1]),w.setAttributeNS(null,"width",d(f)),w.setAttributeNS(null,"height",d(u)),this.current.element=w,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(o){const p=this.svgFactory.create(o.width,o.height),f=this.svgFactory.createElement("svg:defs");p.append(f),this.defs=f;const u=this.svgFactory.createElement("svg:g");return u.setAttributeNS(null,"transform",T(o.transform)),p.append(u),this.svg=u,p}_ensureClipGroup(){if(!this.current.clipGroup){const o=this.svgFactory.createElement("svg:g");o.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(o),this.current.clipGroup=o}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",T(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__w_pdfjs_require__),n.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return s.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return a.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return b.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return E.GlobalWorkerOptions}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return i.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return l.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return c.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return i.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return i.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return i.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return i.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return r.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return i.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return r.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return n.version}});var t=__w_pdfjs_require__(1),n=__w_pdfjs_require__(2),i=__w_pdfjs_require__(6),r=__w_pdfjs_require__(26),s=__w_pdfjs_require__(27),a=__w_pdfjs_require__(5),b=__w_pdfjs_require__(32),E=__w_pdfjs_require__(14),l=__w_pdfjs_require__(35),c=__w_pdfjs_require__(34)})(),__webpack_exports__})())})(pdf$2);var pdfExports=pdf$2.exports;const pdf=pdfExports;var pdf_1=pdf,pdf$1=getDefaultExportFromCjs(pdf_1);function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var basicLightbox_min={exports:{}};(function(e,t){(function(n){e.exports=n()})(function(){return function n(i,r,s){function a(l,c){if(!r[l]){if(!i[l]){var I=typeof commonjsRequire=="function"&&commonjsRequire;if(!c&&I)return I(l,!0);if(b)return b(l,!0);var x=new Error("Cannot find module '"+l+"'");throw x.code="MODULE_NOT_FOUND",x}var m=r[l]={exports:{}};i[l][0].call(m.exports,function(g){return a(i[l][1][g]||g)},m,m.exports,n,i,r,s)}return r[l].exports}for(var b=typeof commonjsRequire=="function"&&commonjsRequire,E=0;E<s.length;E++)a(s[E]);return a}({1:[function(n,i,r){Object.defineProperty(r,"__esModule",{value:!0}),r.create=r.visible=void 0;var s=function(E){var l=arguments.length>1&&arguments[1]!==void 0&&arguments[1],c=document.createElement("div");return c.innerHTML=E.trim(),l===!0?c.children:c.firstChild},a=function(E,l){var c=E.children;return c.length===1&&c[0].tagName===l},b=function(E){return(E=E||document.querySelector(".basicLightbox"))!=null&&E.ownerDocument.body.contains(E)===!0};r.visible=b,r.create=function(E,l){var c=function(m,g){var S=s(`
		<div class="basicLightbox `.concat(g.className,`">
			<div class="basicLightbox__placeholder" role="dialog"></div>
		</div>
	`)),d=S.querySelector(".basicLightbox__placeholder");m.forEach(function(y){return d.appendChild(y)});var T=a(d,"IMG"),P=a(d,"VIDEO"),F=a(d,"IFRAME");return T===!0&&S.classList.add("basicLightbox--img"),P===!0&&S.classList.add("basicLightbox--video"),F===!0&&S.classList.add("basicLightbox--iframe"),S}(E=function(m){var g=typeof m=="string",S=m instanceof HTMLElement==1;if(g===!1&&S===!1)throw new Error("Content must be a DOM element/node or string");return g===!0?Array.from(s(m,!0)):m.tagName==="TEMPLATE"?[m.content.cloneNode(!0)]:Array.from(m.children)}(E),l=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if((m=Object.assign({},m)).closable==null&&(m.closable=!0),m.className==null&&(m.className=""),m.onShow==null&&(m.onShow=function(){}),m.onClose==null&&(m.onClose=function(){}),typeof m.closable!="boolean")throw new Error("Property `closable` must be a boolean");if(typeof m.className!="string")throw new Error("Property `className` must be a string");if(typeof m.onShow!="function")throw new Error("Property `onShow` must be a function");if(typeof m.onClose!="function")throw new Error("Property `onClose` must be a function");return m}(l)),I=function(m){return l.onClose(x)!==!1&&function(g,S){return g.classList.remove("basicLightbox--visible"),setTimeout(function(){return b(g)===!1||g.parentElement.removeChild(g),S()},410),!0}(c,function(){if(typeof m=="function")return m(x)})};l.closable===!0&&c.addEventListener("click",function(m){m.target===c&&I()});var x={element:function(){return c},visible:function(){return b(c)},show:function(m){return l.onShow(x)!==!1&&function(g,S){return document.body.appendChild(g),setTimeout(function(){requestAnimationFrame(function(){return g.classList.add("basicLightbox--visible"),S()})},10),!0}(c,function(){if(typeof m=="function")return m(x)})},close:I};return x}},{}]},{},[1])(1)})})(basicLightbox_min);var basicLightbox_minExports=basicLightbox_min.exports;export{basicLightbox_minExports as b,pdf$1 as p};